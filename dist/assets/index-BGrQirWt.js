(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Sf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ud={exports:{}},La={},cd={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function zE(){if(bg)return De;bg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.iterator;function P(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function $(D,H,le){this.props=D,this.context=H,this.refs=q,this.updater=le||M}$.prototype.isReactComponent={},$.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},$.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Q(){}Q.prototype=$.prototype;function X(D,H,le){this.props=D,this.context=H,this.refs=q,this.updater=le||M}var Z=X.prototype=new Q;Z.constructor=X,U(Z,$.prototype),Z.isPureReactComponent=!0;var te=Array.isArray,fe=Object.prototype.hasOwnProperty,J={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function E(D,H,le){var Pe,we={},Ne=null,Ae=null;if(H!=null)for(Pe in H.ref!==void 0&&(Ae=H.ref),H.key!==void 0&&(Ne=""+H.key),H)fe.call(H,Pe)&&!R.hasOwnProperty(Pe)&&(we[Pe]=H[Pe]);var Ce=arguments.length-2;if(Ce===1)we.children=le;else if(1<Ce){for(var Se=Array(Ce),He=0;He<Ce;He++)Se[He]=arguments[He+2];we.children=Se}if(D&&D.defaultProps)for(Pe in Ce=D.defaultProps,Ce)we[Pe]===void 0&&(we[Pe]=Ce[Pe]);return{$$typeof:r,type:D,key:Ne,ref:Ae,props:we,_owner:J.current}}function A(D,H){return{$$typeof:r,type:D.type,key:H,ref:D.ref,props:D.props,_owner:D._owner}}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function x(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return H[le]})}var V=/\/+/g;function C(D,H){return typeof D=="object"&&D!==null&&D.key!=null?x(""+D.key):H.toString(36)}function ae(D,H,le,Pe,we){var Ne=typeof D;(Ne==="undefined"||Ne==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(Ne){case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case r:case e:Ae=!0}}if(Ae)return Ae=D,we=we(Ae),D=Pe===""?"."+C(Ae,0):Pe,te(we)?(le="",D!=null&&(le=D.replace(V,"$&/")+"/"),ae(we,H,le,"",function(He){return He})):we!=null&&(N(we)&&(we=A(we,le+(!we.key||Ae&&Ae.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+D)),H.push(we)),1;if(Ae=0,Pe=Pe===""?".":Pe+":",te(D))for(var Ce=0;Ce<D.length;Ce++){Ne=D[Ce];var Se=Pe+C(Ne,Ce);Ae+=ae(Ne,H,le,Se,we)}else if(Se=P(D),typeof Se=="function")for(D=Se.call(D),Ce=0;!(Ne=D.next()).done;)Ne=Ne.value,Se=Pe+C(Ne,Ce++),Ae+=ae(Ne,H,le,Se,we);else if(Ne==="object")throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ae}function ze(D,H,le){if(D==null)return D;var Pe=[],we=0;return ae(D,Pe,"","",function(Ne){return H.call(le,Ne,we++)}),Pe}function Ze(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var $e={current:null},ie={transition:null},ge={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:ie,ReactCurrentOwner:J};return De.Children={map:ze,forEach:function(D,H,le){ze(D,function(){H.apply(this,arguments)},le)},count:function(D){var H=0;return ze(D,function(){H++}),H},toArray:function(D){return ze(D,function(H){return H})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},De.Component=$,De.Fragment=t,De.Profiler=o,De.PureComponent=X,De.StrictMode=i,De.Suspense=p,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,De.cloneElement=function(D,H,le){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Pe=U({},D.props),we=D.key,Ne=D.ref,Ae=D._owner;if(H!=null){if(H.ref!==void 0&&(Ne=H.ref,Ae=J.current),H.key!==void 0&&(we=""+H.key),D.type&&D.type.defaultProps)var Ce=D.type.defaultProps;for(Se in H)fe.call(H,Se)&&!R.hasOwnProperty(Se)&&(Pe[Se]=H[Se]===void 0&&Ce!==void 0?Ce[Se]:H[Se])}var Se=arguments.length-2;if(Se===1)Pe.children=le;else if(1<Se){Ce=Array(Se);for(var He=0;He<Se;He++)Ce[He]=arguments[He+2];Pe.children=Ce}return{$$typeof:r,type:D.type,key:we,ref:Ne,props:Pe,_owner:Ae}},De.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},De.createElement=E,De.createFactory=function(D){var H=E.bind(null,D);return H.type=D,H},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=N,De.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:Ze}},De.memo=function(D,H){return{$$typeof:y,type:D,compare:H===void 0?null:H}},De.startTransition=function(D){var H=ie.transition;ie.transition={};try{D()}finally{ie.transition=H}},De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},De.useCallback=function(D,H){return $e.current.useCallback(D,H)},De.useContext=function(D){return $e.current.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D){return $e.current.useDeferredValue(D)},De.useEffect=function(D,H){return $e.current.useEffect(D,H)},De.useId=function(){return $e.current.useId()},De.useImperativeHandle=function(D,H,le){return $e.current.useImperativeHandle(D,H,le)},De.useInsertionEffect=function(D,H){return $e.current.useInsertionEffect(D,H)},De.useLayoutEffect=function(D,H){return $e.current.useLayoutEffect(D,H)},De.useMemo=function(D,H){return $e.current.useMemo(D,H)},De.useReducer=function(D,H,le){return $e.current.useReducer(D,H,le)},De.useRef=function(D){return $e.current.useRef(D)},De.useState=function(D){return $e.current.useState(D)},De.useSyncExternalStore=function(D,H,le){return $e.current.useSyncExternalStore(D,H,le)},De.useTransition=function(){return $e.current.useTransition()},De.version="18.2.0",De}var Lg;function Af(){return Lg||(Lg=1,cd.exports=zE()),cd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function qE(){if(Mg)return La;Mg=1;var r=Af(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var w,S={},P=null,M=null;y!==void 0&&(P=""+y),p.key!==void 0&&(P=""+p.key),p.ref!==void 0&&(M=p.ref);for(w in p)i.call(p,w)&&!l.hasOwnProperty(w)&&(S[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)S[w]===void 0&&(S[w]=p[w]);return{$$typeof:e,type:f,key:P,ref:M,props:S,_owner:o.current}}return La.Fragment=t,La.jsx=h,La.jsxs=h,La}var Og;function $E(){return Og||(Og=1,ud.exports=qE()),ud.exports}var I=$E(),de=Af();const HE=Sf(de);var Nu={},hd={exports:{}},Gt={},dd={exports:{}},fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function WE(){return Fg||(Fg=1,(function(r){function e(ie,ge){var D=ie.length;ie.push(ge);e:for(;0<D;){var H=D-1>>>1,le=ie[H];if(0<o(le,ge))ie[H]=ge,ie[D]=le,D=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ge=ie[0],D=ie.pop();if(D!==ge){ie[0]=D;e:for(var H=0,le=ie.length,Pe=le>>>1;H<Pe;){var we=2*(H+1)-1,Ne=ie[we],Ae=we+1,Ce=ie[Ae];if(0>o(Ne,D))Ae<le&&0>o(Ce,Ne)?(ie[H]=Ce,ie[Ae]=D,H=Ae):(ie[H]=Ne,ie[we]=D,H=we);else if(Ae<le&&0>o(Ce,D))ie[H]=Ce,ie[Ae]=D,H=Ae;else break e}}return ge}function o(ie,ge){var D=ie.sortIndex-ge.sortIndex;return D!==0?D:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],w=1,S=null,P=3,M=!1,U=!1,q=!1,$=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ie){for(var ge=t(y);ge!==null;){if(ge.callback===null)i(y);else if(ge.startTime<=ie)i(y),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(y)}}function te(ie){if(q=!1,Z(ie),!U)if(t(p)!==null)U=!0,Ze(fe);else{var ge=t(y);ge!==null&&$e(te,ge.startTime-ie)}}function fe(ie,ge){U=!1,q&&(q=!1,Q(E),E=-1),M=!0;var D=P;try{for(Z(ge),S=t(p);S!==null&&(!(S.expirationTime>ge)||ie&&!x());){var H=S.callback;if(typeof H=="function"){S.callback=null,P=S.priorityLevel;var le=H(S.expirationTime<=ge);ge=r.unstable_now(),typeof le=="function"?S.callback=le:S===t(p)&&i(p),Z(ge)}else i(p);S=t(p)}if(S!==null)var Pe=!0;else{var we=t(y);we!==null&&$e(te,we.startTime-ge),Pe=!1}return Pe}finally{S=null,P=D,M=!1}}var J=!1,R=null,E=-1,A=5,N=-1;function x(){return!(r.unstable_now()-N<A)}function V(){if(R!==null){var ie=r.unstable_now();N=ie;var ge=!0;try{ge=R(!0,ie)}finally{ge?C():(J=!1,R=null)}}else J=!1}var C;if(typeof X=="function")C=function(){X(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ze=ae.port2;ae.port1.onmessage=V,C=function(){ze.postMessage(null)}}else C=function(){$(V,0)};function Ze(ie){R=ie,J||(J=!0,C())}function $e(ie,ge){E=$(function(){ie(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){U||M||(U=!0,Ze(fe))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(ie){switch(P){case 1:case 2:case 3:var ge=3;break;default:ge=P}var D=P;P=ge;try{return ie()}finally{P=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var D=P;P=ie;try{return ge()}finally{P=D}},r.unstable_scheduleCallback=function(ie,ge,D){var H=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?H+D:H):D=H,ie){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=D+le,ie={id:w++,callback:ge,priorityLevel:ie,startTime:D,expirationTime:le,sortIndex:-1},D>H?(ie.sortIndex=D,e(y,ie),t(p)===null&&ie===t(y)&&(q?(Q(E),E=-1):q=!0,$e(te,D-H))):(ie.sortIndex=le,e(p,ie),U||M||(U=!0,Ze(fe))),ie},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(ie){var ge=P;return function(){var D=P;P=ge;try{return ie.apply(this,arguments)}finally{P=D}}}})(fd)),fd}var jg;function KE(){return jg||(jg=1,dd.exports=WE()),dd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function GE(){if(Ug)return Gt;Ug=1;var r=Af(),e=KE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},S={};function P(n){return p.call(S,n)?!0:p.call(w,n)?!1:y.test(n)?S[n]=!0:(w[n]=!0,!1)}function M(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function U(n,s,a,c){if(s===null||typeof s>"u"||M(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(n,s,a,c,d,m,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=v}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];$[s]=new q(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Q,X);$[s]=new q(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Q,X);$[s]=new q(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Q,X);$[s]=new q(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function Z(n,s,a,c){var d=$.hasOwnProperty(s)?$[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,a,d,c)&&(a=null),c||d===null?P(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),J=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var D=Object.assign,H;function le(n){if(H===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);H=s&&s[1]||""}return`
`+H+n}var Pe=!1;function we(n,s){if(!n||Pe)return"";Pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){c=B}n.call(s.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),v=d.length-1,k=m.length-1;1<=v&&0<=k&&d[v]!==m[k];)k--;for(;1<=v&&0<=k;v--,k--)if(d[v]!==m[k]){if(v!==1||k!==1)do if(v--,k--,0>k||d[v]!==m[k]){var b=`
`+d[v].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=v&&0<=k);break}}}finally{Pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?le(n):""}function Ne(n){switch(n.tag){case 5:return le(n.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case J:return"Portal";case A:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ze:return s=n.displayName||null,s!==null?s:Ae(n.type)||"Memo";case Ze:s=n._payload,n=n._init;try{return Ae(n(s))}catch{}}return null}function Ce(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(s);case 8:return s===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Se(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lr(n){var s=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Vn(n){n._valueTracker||(n._valueTracker=lr(n))}function Bo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cs(n,s){var a=s.checked;return D({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function gl(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Se(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rs(n,s){s=s.checked,s!=null&&Z(n,"checked",s,!1)}function bi(n,s){Rs(n,s);var a=Se(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ht(n,s.type,a):s.hasOwnProperty("defaultValue")&&ht(n,s.type,Se(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function zo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ht(n,s,a){(s!=="number"||Fr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ot=Array.isArray;function _n(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Se(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return D({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $o(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ot(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Se(a)}}function yl(n,s){var a=Se(s.value),c=Se(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function jr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ho(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ps(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ho(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ur,_l=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ur=Ur||document.createElement("div"),Ur.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ur.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Li(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vl=["Webkit","ms","Moz","O"];Object.keys(Br).forEach(function(n){vl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Br[s]=Br[n]})});function zr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Br.hasOwnProperty(n)&&Br[n]?(""+s).trim():s+"px"}function ks(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=zr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Wo=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vn(n,s){if(s){if(Wo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function xs(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qr=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ur=null,cr=null,it=null;function Ko(n){if(n=wa(n)){if(typeof ur!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Wl(s),ur(n.stateNode,n.type,s))}}function $r(n){cr?it?it.push(n):it=[n]:cr=n}function Hr(){if(cr){var n=cr,s=it;if(it=cr=null,Ko(n),s)for(n=0;n<s.length;n++)Ko(s[n])}}function wl(n,s){return n(s)}function El(){}var bn=!1;function Tl(n,s,a){if(bn)return n(s,a);bn=!0;try{return wl(n,s,a)}finally{bn=!1,(cr!==null||it!==null)&&(El(),Hr())}}function Mi(n,s){var a=n.stateNode;if(a===null)return null;var c=Wl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Wr=!1;if(f)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Wr=!1}function Il(n,s,a,c,d,m,v,k,b){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(Y){this.onError(Y)}}var hr=!1,Ln=null,Ds=!1,an=null,Sl={onError:function(n){hr=!0,Ln=n}};function Al(n,s,a,c,d,m,v,k,b){hr=!1,Ln=null,Il.apply(Sl,arguments)}function Go(n,s,a,c,d,m,v,k,b){if(Al.apply(this,arguments),hr){if(hr){var B=Ln;hr=!1,Ln=null}else throw Error(t(198));Ds||(Ds=!0,an=B)}}function wn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Qo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Cl(n){if(wn(n)!==n)throw Error(t(188))}function Rl(n){var s=n.alternate;if(!s){if(s=wn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Cl(d),n;if(m===c)return Cl(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var v=!1,k=d.child;k;){if(k===a){v=!0,a=d,c=m;break}if(k===c){v=!0,c=d,a=m;break}k=k.sibling}if(!v){for(k=m.child;k;){if(k===a){v=!0,a=m,c=d;break}if(k===c){v=!0,c=m,a=d;break}k=k.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Pl(n){return n=Rl(n),n!==null?Oi(n):null}function Oi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Oi(n);if(s!==null)return s;n=n.sibling}return null}var Yo=e.unstable_scheduleCallback,Vs=e.unstable_cancelCallback,Fi=e.unstable_shouldYield,dr=e.unstable_requestPaint,Qe=e.unstable_now,Uc=e.unstable_getCurrentPriorityLevel,bs=e.unstable_ImmediatePriority,Jo=e.unstable_UserBlockingPriority,ji=e.unstable_NormalPriority,Xo=e.unstable_LowPriority,Ls=e.unstable_IdlePriority,Ui=null,Jt=null;function kl(n){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ui,n,void 0,(n.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Bi,Mn=Math.log,ln=Math.LN2;function Bi(n){return n>>>=0,n===0?32:31-(Mn(n)/ln|0)|0}var On=64,Gr=4194304;function Ue(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function fr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var k=v&~d;k!==0?c=Ue(k):(m&=v,m!==0&&(c=Ue(m)))}else v=a&~d,v!==0?c=Ue(v):m!==0&&(c=Ue(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Xt(s),d=1<<a,c|=n[a],s&=~d;return c}function zi(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-Xt(m),k=1<<v,b=d[v];b===-1?((k&a)===0||(k&c)!==0)&&(d[v]=zi(k,s)):b<=s&&(n.expiredLanes|=k),m&=~k}}function Zo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ea(){var n=On;return On<<=1,(On&4194240)===0&&(On=64),n}function ta(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function $i(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Xt(s),n[s]=a}function Bc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Xt(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function na(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Xt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Me=0;function Fn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ra,Ms,ia,sa,oa,jn=!1,Os=[],Un=null,Bn=null,St=null,Hi=new Map,pr=new Map,Zt=[],xl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qr(n,s){switch(n){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(s.pointerId)}}function En(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=wa(s),s!==null&&Ms(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Nl(n,s,a,c,d){switch(s){case"focusin":return Un=En(Un,n,s,a,c,d),!0;case"dragenter":return Bn=En(Bn,n,s,a,c,d),!0;case"mouseover":return St=En(St,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return Hi.set(m,En(Hi.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,pr.set(m,En(pr.get(m)||null,n,s,a,c,d)),!0}return!1}function Fs(n){var s=Qi(n.target);if(s!==null){var a=wn(s);if(a!==null){if(s=a.tag,s===13){if(s=Qo(a),s!==null){n.blockedOn=s,oa(n.priority,function(){ia(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function We(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=js(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);qr=c,a.target.dispatchEvent(c),qr=null}else return s=wa(a),s!==null&&Ms(s),n.blockedOn=a,!1;s.shift()}return!0}function Dl(n,s,a){We(n)&&a.delete(s)}function zc(){jn=!1,Un!==null&&We(Un)&&(Un=null),Bn!==null&&We(Bn)&&(Bn=null),St!==null&&We(St)&&(St=null),Hi.forEach(Dl),pr.forEach(Dl)}function Yr(n,s){n.blockedOn===s&&(n.blockedOn=null,jn||(jn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zc)))}function Jr(n){function s(d){return Yr(d,n)}if(0<Os.length){Yr(Os[0],n);for(var a=1;a<Os.length;a++){var c=Os[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Un!==null&&Yr(Un,n),Bn!==null&&Yr(Bn,n),St!==null&&Yr(St,n),Hi.forEach(s),pr.forEach(s),a=0;a<Zt.length;a++)c=Zt[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Zt.length&&(a=Zt[0],a.blockedOn===null);)Fs(a),a.blockedOn===null&&Zt.shift()}var mr=te.ReactCurrentBatchConfig,gr=!0;function zn(n,s,a,c){var d=Me,m=mr.transition;mr.transition=null;try{Me=1,aa(n,s,a,c)}finally{Me=d,mr.transition=m}}function Vl(n,s,a,c){var d=Me,m=mr.transition;mr.transition=null;try{Me=4,aa(n,s,a,c)}finally{Me=d,mr.transition=m}}function aa(n,s,a,c){if(gr){var d=js(n,s,a,c);if(d===null)Zc(n,s,c,qn,a),Qr(n,c);else if(Nl(d,n,s,a,c))c.stopPropagation();else if(Qr(n,c),s&4&&-1<xl.indexOf(n)){for(;d!==null;){var m=wa(d);if(m!==null&&ra(m),m=js(n,s,a,c),m===null&&Zc(n,s,c,qn,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Zc(n,s,c,null,a)}}var qn=null;function js(n,s,a,c){if(qn=null,n=Ns(c),n=Qi(n),n!==null)if(s=wn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Qo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qn=n,null}function Us(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uc()){case bs:return 1;case Jo:return 4;case ji:case Xo:return 16;case Ls:return 536870912;default:return 16}default:return 16}}var en=null,Bs=null,yr=null;function bl(){if(yr)return yr;var n,s=Bs,a=s.length,c,d="value"in en?en.value:en.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&s[a-c]===d[m-c];c++);return yr=d.slice(n,1<c?1-c:void 0)}function Wi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function $n(){return!0}function la(){return!1}function Nt(n){function s(a,c,d,m,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$n:la,this.isPropagationStopped=la,this}return D(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),s}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=Nt(Hn),Xr=D({},Hn,{view:0,detail:0}),zs=Nt(Xr),qs,$s,tn,Gi=D({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==tn&&(tn&&n.type==="mousemove"?(qs=n.screenX-tn.screenX,$s=n.screenY-tn.screenY):$s=qs=0,tn=n),qs)},movementY:function(n){return"movementY"in n?n.movementY:$s}}),ua=Nt(Gi),Ll=D({},Gi,{dataTransfer:0}),Ml=Nt(Ll),Hs=D({},Xr,{relatedTarget:0}),At=Nt(Hs),Ol=D({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fl=Nt(Ol),Zr=D({},Hn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Nt(Zr),g=D({},Hn,{data:0}),_=Nt(g),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function re(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=z[n])?!!s[n]:!1}function ke(){return re}var at=D({},Xr,{key:function(n){if(n.key){var s=T[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Wi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(n){return n.type==="keypress"?Wi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qe=Nt(at),dt=D({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nn=Nt(dt),_r=D({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),Wn=Nt(_r),Kn=D({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=Nt(Kn),ca=D({},Gi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Mw=Nt(ca),Ow=[9,13,27,32],qc=f&&"CompositionEvent"in window,ha=null;f&&"documentMode"in document&&(ha=document.documentMode);var Fw=f&&"TextEvent"in window&&!ha,Ap=f&&(!qc||ha&&8<ha&&11>=ha),Cp=" ",Rp=!1;function Pp(n,s){switch(n){case"keyup":return Ow.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ks=!1;function jw(n,s){switch(n){case"compositionend":return kp(s);case"keypress":return s.which!==32?null:(Rp=!0,Cp);case"textInput":return n=s.data,n===Cp&&Rp?null:n;default:return null}}function Uw(n,s){if(Ks)return n==="compositionend"||!qc&&Pp(n,s)?(n=bl(),yr=Bs=en=null,Ks=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ap&&s.locale!=="ko"?null:s.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Bw[n.type]:s==="textarea"}function Np(n,s,a,c){$r(c),s=ql(s,"onChange"),0<s.length&&(a=new Ki("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var da=null,fa=null;function zw(n){Qp(n,0)}function jl(n){var s=Xs(n);if(Bo(s))return n}function qw(n,s){if(n==="change")return s}var Dp=!1;if(f){var $c;if(f){var Hc="oninput"in document;if(!Hc){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),Hc=typeof Vp.oninput=="function"}$c=Hc}else $c=!1;Dp=$c&&(!document.documentMode||9<document.documentMode)}function bp(){da&&(da.detachEvent("onpropertychange",Lp),fa=da=null)}function Lp(n){if(n.propertyName==="value"&&jl(fa)){var s=[];Np(s,fa,n,Ns(n)),Tl(zw,s)}}function $w(n,s,a){n==="focusin"?(bp(),da=s,fa=a,da.attachEvent("onpropertychange",Lp)):n==="focusout"&&bp()}function Hw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jl(fa)}function Ww(n,s){if(n==="click")return jl(s)}function Kw(n,s){if(n==="input"||n==="change")return jl(s)}function Gw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Tn=typeof Object.is=="function"?Object.is:Gw;function pa(n,s){if(Tn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(s,d)||!Tn(n[d],s[d]))return!1}return!0}function Mp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Op(n,s){var a=Mp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mp(a)}}function Fp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Fp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jp(){for(var n=window,s=Fr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fr(n.document)}return s}function Wc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Qw(n){var s=jp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(c!==null&&Wc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Op(a,m);var v=Op(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yw=f&&"documentMode"in document&&11>=document.documentMode,Gs=null,Kc=null,ma=null,Gc=!1;function Up(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gc||Gs==null||Gs!==Fr(c)||(c=Gs,"selectionStart"in c&&Wc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ma&&pa(ma,c)||(ma=c,c=ql(Kc,"onSelect"),0<c.length&&(s=new Ki("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Gs)))}function Ul(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Qs={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Qc={},Bp={};f&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Bl(n){if(Qc[n])return Qc[n];if(!Qs[n])return n;var s=Qs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Bp)return Qc[n]=s[a];return n}var zp=Bl("animationend"),qp=Bl("animationiteration"),$p=Bl("animationstart"),Hp=Bl("transitionend"),Wp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(n,s){Wp.set(n,s),l(s,[n])}for(var Yc=0;Yc<Kp.length;Yc++){var Jc=Kp[Yc],Jw=Jc.toLowerCase(),Xw=Jc[0].toUpperCase()+Jc.slice(1);ei(Jw,"on"+Xw)}ei(zp,"onAnimationEnd"),ei(qp,"onAnimationIteration"),ei($p,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Hp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function Gp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Go(c,s,void 0,n),n.currentTarget=null}function Qp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var v=c.length-1;0<=v;v--){var k=c[v],b=k.instance,B=k.currentTarget;if(k=k.listener,b!==m&&d.isPropagationStopped())break e;Gp(d,k,B),m=b}else for(v=0;v<c.length;v++){if(k=c[v],b=k.instance,B=k.currentTarget,k=k.listener,b!==m&&d.isPropagationStopped())break e;Gp(d,k,B),m=b}}}if(Ds)throw n=an,Ds=!1,an=null,n}function Ye(n,s){var a=s[sh];a===void 0&&(a=s[sh]=new Set);var c=n+"__bubble";a.has(c)||(Yp(s,n,2,!1),a.add(c))}function Xc(n,s,a){var c=0;s&&(c|=4),Yp(a,n,c,s)}var zl="_reactListening"+Math.random().toString(36).slice(2);function ya(n){if(!n[zl]){n[zl]=!0,i.forEach(function(a){a!=="selectionchange"&&(Zw.has(a)||Xc(a,!1,n),Xc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[zl]||(s[zl]=!0,Xc("selectionchange",!1,s))}}function Yp(n,s,a,c){switch(Us(s)){case 1:var d=zn;break;case 4:d=Vl;break;default:d=aa}a=d.bind(null,s,a,n),d=void 0,!Wr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Zc(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var b=v.tag;if((b===3||b===4)&&(b=v.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;v=v.return}for(;k!==null;){if(v=Qi(k),v===null)return;if(b=v.tag,b===5||b===6){c=m=v;continue e}k=k.parentNode}}c=c.return}Tl(function(){var B=m,Y=Ns(a),ee=[];e:{var G=Wp.get(n);if(G!==void 0){var oe=Ki,he=n;switch(n){case"keypress":if(Wi(a)===0)break e;case"keydown":case"keyup":oe=qe;break;case"focusin":he="focus",oe=At;break;case"focusout":he="blur",oe=At;break;case"beforeblur":case"afterblur":oe=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Wn;break;case zp:case qp:case $p:oe=Fl;break;case Hp:oe=Ws;break;case"scroll":oe=zs;break;case"wheel":oe=Mw;break;case"copy":case"cut":case"paste":oe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=nn}var pe=(s&4)!==0,lt=!pe&&n==="scroll",O=pe?G!==null?G+"Capture":null:G;pe=[];for(var L=B,j;L!==null;){j=L;var ne=j.stateNode;if(j.tag===5&&ne!==null&&(j=ne,O!==null&&(ne=Mi(L,O),ne!=null&&pe.push(_a(L,ne,j)))),lt)break;L=L.return}0<pe.length&&(G=new oe(G,he,null,a,Y),ee.push({event:G,listeners:pe}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",G&&a!==qr&&(he=a.relatedTarget||a.fromElement)&&(Qi(he)||he[vr]))break e;if((oe||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,oe?(he=a.relatedTarget||a.toElement,oe=B,he=he?Qi(he):null,he!==null&&(lt=wn(he),he!==lt||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=B),oe!==he)){if(pe=ua,ne="onMouseLeave",O="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(pe=nn,ne="onPointerLeave",O="onPointerEnter",L="pointer"),lt=oe==null?G:Xs(oe),j=he==null?G:Xs(he),G=new pe(ne,L+"leave",oe,a,Y),G.target=lt,G.relatedTarget=j,ne=null,Qi(Y)===B&&(pe=new pe(O,L+"enter",he,a,Y),pe.target=j,pe.relatedTarget=lt,ne=pe),lt=ne,oe&&he)t:{for(pe=oe,O=he,L=0,j=pe;j;j=Ys(j))L++;for(j=0,ne=O;ne;ne=Ys(ne))j++;for(;0<L-j;)pe=Ys(pe),L--;for(;0<j-L;)O=Ys(O),j--;for(;L--;){if(pe===O||O!==null&&pe===O.alternate)break t;pe=Ys(pe),O=Ys(O)}pe=null}else pe=null;oe!==null&&Jp(ee,G,oe,pe,!1),he!==null&&lt!==null&&Jp(ee,lt,he,pe,!0)}}e:{if(G=B?Xs(B):window,oe=G.nodeName&&G.nodeName.toLowerCase(),oe==="select"||oe==="input"&&G.type==="file")var me=qw;else if(xp(G))if(Dp)me=Kw;else{me=Hw;var _e=$w}else(oe=G.nodeName)&&oe.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=Ww);if(me&&(me=me(n,B))){Np(ee,me,a,Y);break e}_e&&_e(n,G,B),n==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&ht(G,"number",G.value)}switch(_e=B?Xs(B):window,n){case"focusin":(xp(_e)||_e.contentEditable==="true")&&(Gs=_e,Kc=B,ma=null);break;case"focusout":ma=Kc=Gs=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Up(ee,a,Y);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":Up(ee,a,Y)}var ve;if(qc)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ks?Pp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ap&&a.locale!=="ko"&&(Ks||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ks&&(ve=bl()):(en=Y,Bs="value"in en?en.value:en.textContent,Ks=!0)),_e=ql(B,Ie),0<_e.length&&(Ie=new _(Ie,n,null,a,Y),ee.push({event:Ie,listeners:_e}),ve?Ie.data=ve:(ve=kp(a),ve!==null&&(Ie.data=ve)))),(ve=Fw?jw(n,a):Uw(n,a))&&(B=ql(B,"onBeforeInput"),0<B.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),ee.push({event:Y,listeners:B}),Y.data=ve))}Qp(ee,s)})}function _a(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ql(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=Mi(n,a),m!=null&&c.unshift(_a(n,m,d)),m=Mi(n,s),m!=null&&c.push(_a(n,m,d))),n=n.return}return c}function Ys(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Jp(n,s,a,c,d){for(var m=s._reactName,v=[];a!==null&&a!==c;){var k=a,b=k.alternate,B=k.stateNode;if(b!==null&&b===c)break;k.tag===5&&B!==null&&(k=B,d?(b=Mi(a,m),b!=null&&v.unshift(_a(a,b,k))):d||(b=Mi(a,m),b!=null&&v.push(_a(a,b,k)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var eE=/\r\n?/g,tE=/\u0000|\uFFFD/g;function Xp(n){return(typeof n=="string"?n:""+n).replace(eE,`
`).replace(tE,"")}function $l(n,s,a){if(s=Xp(s),Xp(n)!==s&&a)throw Error(t(425))}function Hl(){}var eh=null,th=null;function nh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,nE=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,rE=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(n){return Zp.resolve(null).then(n).catch(iE)}:rh;function iE(n){setTimeout(function(){throw n})}function ih(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Jr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Jr(s)}function ti(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function em(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Js=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Js,va="__reactProps$"+Js,vr="__reactContainer$"+Js,sh="__reactEvents$"+Js,sE="__reactListeners$"+Js,oE="__reactHandles$"+Js;function Qi(n){var s=n[Gn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[vr]||a[Gn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=em(n);n!==null;){if(a=n[Gn])return a;n=em(n)}return s}n=a,a=n.parentNode}return null}function wa(n){return n=n[Gn]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Wl(n){return n[va]||null}var oh=[],Zs=-1;function ni(n){return{current:n}}function Je(n){0>Zs||(n.current=oh[Zs],oh[Zs]=null,Zs--)}function Ke(n,s){Zs++,oh[Zs]=n.current,n.current=s}var ri={},Dt=ni(ri),qt=ni(!1),Yi=ri;function eo(n,s){var a=n.type.contextTypes;if(!a)return ri;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function $t(n){return n=n.childContextTypes,n!=null}function Kl(){Je(qt),Je(Dt)}function tm(n,s,a){if(Dt.current!==ri)throw Error(t(168));Ke(Dt,s),Ke(qt,a)}function nm(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Ce(n)||"Unknown",d));return D({},a,c)}function Gl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ri,Yi=Dt.current,Ke(Dt,n),Ke(qt,qt.current),!0}function rm(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=nm(n,s,Yi),c.__reactInternalMemoizedMergedChildContext=n,Je(qt),Je(Dt),Ke(Dt,n)):Je(qt),Ke(qt,a)}var wr=null,Ql=!1,ah=!1;function im(n){wr===null?wr=[n]:wr.push(n)}function aE(n){Ql=!0,im(n)}function ii(){if(!ah&&wr!==null){ah=!0;var n=0,s=Me;try{var a=wr;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}wr=null,Ql=!1}catch(d){throw wr!==null&&(wr=wr.slice(n+1)),Yo(bs,ii),d}finally{Me=s,ah=!1}}return null}var to=[],no=0,Yl=null,Jl=0,un=[],cn=0,Ji=null,Er=1,Tr="";function Xi(n,s){to[no++]=Jl,to[no++]=Yl,Yl=n,Jl=s}function sm(n,s,a){un[cn++]=Er,un[cn++]=Tr,un[cn++]=Ji,Ji=n;var c=Er;n=Tr;var d=32-Xt(c)-1;c&=~(1<<d),a+=1;var m=32-Xt(s)+d;if(30<m){var v=d-d%5;m=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Er=1<<32-Xt(s)+d|a<<d|c,Tr=m+n}else Er=1<<m|a<<d|c,Tr=n}function lh(n){n.return!==null&&(Xi(n,1),sm(n,1,0))}function uh(n){for(;n===Yl;)Yl=to[--no],to[no]=null,Jl=to[--no],to[no]=null;for(;n===Ji;)Ji=un[--cn],un[cn]=null,Tr=un[--cn],un[cn]=null,Er=un[--cn],un[cn]=null}var rn=null,sn=null,et=!1,In=null;function om(n,s){var a=pn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function am(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,rn=n,sn=ti(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,rn=n,sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ji!==null?{id:Er,overflow:Tr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=pn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,rn=n,sn=null,!0):!1;default:return!1}}function ch(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hh(n){if(et){var s=sn;if(s){var a=s;if(!am(n,s)){if(ch(n))throw Error(t(418));s=ti(a.nextSibling);var c=rn;s&&am(n,s)?om(c,a):(n.flags=n.flags&-4097|2,et=!1,rn=n)}}else{if(ch(n))throw Error(t(418));n.flags=n.flags&-4097|2,et=!1,rn=n}}}function lm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;rn=n}function Xl(n){if(n!==rn)return!1;if(!et)return lm(n),et=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!nh(n.type,n.memoizedProps)),s&&(s=sn)){if(ch(n))throw um(),Error(t(418));for(;s;)om(n,s),s=ti(s.nextSibling)}if(lm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){sn=ti(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}sn=null}}else sn=rn?ti(n.stateNode.nextSibling):null;return!0}function um(){for(var n=sn;n;)n=ti(n.nextSibling)}function ro(){sn=rn=null,et=!1}function dh(n){In===null?In=[n]:In.push(n)}var lE=te.ReactCurrentBatchConfig;function Sn(n,s){if(n&&n.defaultProps){s=D({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}var Zl=ni(null),eu=null,io=null,fh=null;function ph(){fh=io=eu=null}function mh(n){var s=Zl.current;Je(Zl),n._currentValue=s}function gh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function so(n,s){eu=n,fh=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Ht=!0),n.firstContext=null)}function hn(n){var s=n._currentValue;if(fh!==n)if(n={context:n,memoizedValue:s,next:null},io===null){if(eu===null)throw Error(t(308));io=n,eu.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return s}var Zi=null;function yh(n){Zi===null?Zi=[n]:Zi.push(n)}function cm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,yh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Ir(n,c)}function Ir(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var si=!1;function _h(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function oi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Ir(n,a)}return d=c.interleaved,d===null?(s.next=s,yh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Ir(n,a)}function tu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,na(n,a)}}function dm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function nu(n,s,a,c){var d=n.updateQueue;si=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var b=k,B=b.next;b.next=null,v===null?m=B:v.next=B,v=b;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,k=Y.lastBaseUpdate,k!==v&&(k===null?Y.firstBaseUpdate=B:k.next=B,Y.lastBaseUpdate=b))}if(m!==null){var ee=d.baseState;v=0,Y=B=b=null,k=m;do{var G=k.lane,oe=k.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:oe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var he=n,pe=k;switch(G=s,oe=a,pe.tag){case 1:if(he=pe.payload,typeof he=="function"){ee=he.call(oe,ee,G);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=pe.payload,G=typeof he=="function"?he.call(oe,ee,G):he,G==null)break e;ee=D({},ee,G);break e;case 2:si=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[k]:G.push(k))}else oe={eventTime:oe,lane:G,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Y===null?(B=Y=oe,b=ee):Y=Y.next=oe,v|=G;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;G=k,k=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(b=ee),d.baseState=b,d.firstBaseUpdate=B,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do v|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);ns|=v,n.lanes=v,n.memoizedState=ee}}function fm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var pm=new r.Component().refs;function vh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:D({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ru={isMounted:function(n){return(n=n._reactInternals)?wn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=zt(),d=ci(n),m=Sr(c,d);m.payload=s,a!=null&&(m.callback=a),s=oi(n,m,d),s!==null&&(Rn(s,n,d,c),tu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=zt(),d=ci(n),m=Sr(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=oi(n,m,d),s!==null&&(Rn(s,n,d,c),tu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=zt(),c=ci(n),d=Sr(a,c);d.tag=2,s!=null&&(d.callback=s),s=oi(n,d,c),s!==null&&(Rn(s,n,c,a),tu(s,n,c))}};function mm(n,s,a,c,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):s.prototype&&s.prototype.isPureReactComponent?!pa(a,c)||!pa(d,m):!0}function gm(n,s,a){var c=!1,d=ri,m=s.contextType;return typeof m=="object"&&m!==null?m=hn(m):(d=$t(s)?Yi:Dt.current,c=s.contextTypes,m=(c=c!=null)?eo(n,d):ri),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ru,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function ym(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&ru.enqueueReplaceState(s,s.state,null)}function wh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs=pm,_h(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=hn(m):(m=$t(s)?Yi:Dt.current,d.context=eo(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(vh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&ru.enqueueReplaceState(d,d.state,null),nu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ea(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(v){var k=d.refs;k===pm&&(k=d.refs={}),v===null?delete k[m]:k[m]=v},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function iu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function _m(n){var s=n._init;return s(n._payload)}function vm(n){function s(O,L){if(n){var j=O.deletions;j===null?(O.deletions=[L],O.flags|=16):j.push(L)}}function a(O,L){if(!n)return null;for(;L!==null;)s(O,L),L=L.sibling;return null}function c(O,L){for(O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function d(O,L){return O=di(O,L),O.index=0,O.sibling=null,O}function m(O,L,j){return O.index=j,n?(j=O.alternate,j!==null?(j=j.index,j<L?(O.flags|=2,L):j):(O.flags|=2,L)):(O.flags|=1048576,L)}function v(O){return n&&O.alternate===null&&(O.flags|=2),O}function k(O,L,j,ne){return L===null||L.tag!==6?(L=rd(j,O.mode,ne),L.return=O,L):(L=d(L,j),L.return=O,L)}function b(O,L,j,ne){var me=j.type;return me===R?Y(O,L,j.props.children,ne,j.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ze&&_m(me)===L.type)?(ne=d(L,j.props),ne.ref=Ea(O,L,j),ne.return=O,ne):(ne=Iu(j.type,j.key,j.props,null,O.mode,ne),ne.ref=Ea(O,L,j),ne.return=O,ne)}function B(O,L,j,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==j.containerInfo||L.stateNode.implementation!==j.implementation?(L=id(j,O.mode,ne),L.return=O,L):(L=d(L,j.children||[]),L.return=O,L)}function Y(O,L,j,ne,me){return L===null||L.tag!==7?(L=os(j,O.mode,ne,me),L.return=O,L):(L=d(L,j),L.return=O,L)}function ee(O,L,j){if(typeof L=="string"&&L!==""||typeof L=="number")return L=rd(""+L,O.mode,j),L.return=O,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case fe:return j=Iu(L.type,L.key,L.props,null,O.mode,j),j.ref=Ea(O,null,L),j.return=O,j;case J:return L=id(L,O.mode,j),L.return=O,L;case Ze:var ne=L._init;return ee(O,ne(L._payload),j)}if(ot(L)||ge(L))return L=os(L,O.mode,j,null),L.return=O,L;iu(O,L)}return null}function G(O,L,j,ne){var me=L!==null?L.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return me!==null?null:k(O,L,""+j,ne);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fe:return j.key===me?b(O,L,j,ne):null;case J:return j.key===me?B(O,L,j,ne):null;case Ze:return me=j._init,G(O,L,me(j._payload),ne)}if(ot(j)||ge(j))return me!==null?null:Y(O,L,j,ne,null);iu(O,j)}return null}function oe(O,L,j,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return O=O.get(j)||null,k(L,O,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case fe:return O=O.get(ne.key===null?j:ne.key)||null,b(L,O,ne,me);case J:return O=O.get(ne.key===null?j:ne.key)||null,B(L,O,ne,me);case Ze:var _e=ne._init;return oe(O,L,j,_e(ne._payload),me)}if(ot(ne)||ge(ne))return O=O.get(j)||null,Y(L,O,ne,me,null);iu(L,ne)}return null}function he(O,L,j,ne){for(var me=null,_e=null,ve=L,Ie=L=0,Tt=null;ve!==null&&Ie<j.length;Ie++){ve.index>Ie?(Tt=ve,ve=null):Tt=ve.sibling;var je=G(O,ve,j[Ie],ne);if(je===null){ve===null&&(ve=Tt);break}n&&ve&&je.alternate===null&&s(O,ve),L=m(je,L,Ie),_e===null?me=je:_e.sibling=je,_e=je,ve=Tt}if(Ie===j.length)return a(O,ve),et&&Xi(O,Ie),me;if(ve===null){for(;Ie<j.length;Ie++)ve=ee(O,j[Ie],ne),ve!==null&&(L=m(ve,L,Ie),_e===null?me=ve:_e.sibling=ve,_e=ve);return et&&Xi(O,Ie),me}for(ve=c(O,ve);Ie<j.length;Ie++)Tt=oe(ve,O,Ie,j[Ie],ne),Tt!==null&&(n&&Tt.alternate!==null&&ve.delete(Tt.key===null?Ie:Tt.key),L=m(Tt,L,Ie),_e===null?me=Tt:_e.sibling=Tt,_e=Tt);return n&&ve.forEach(function(fi){return s(O,fi)}),et&&Xi(O,Ie),me}function pe(O,L,j,ne){var me=ge(j);if(typeof me!="function")throw Error(t(150));if(j=me.call(j),j==null)throw Error(t(151));for(var _e=me=null,ve=L,Ie=L=0,Tt=null,je=j.next();ve!==null&&!je.done;Ie++,je=j.next()){ve.index>Ie?(Tt=ve,ve=null):Tt=ve.sibling;var fi=G(O,ve,je.value,ne);if(fi===null){ve===null&&(ve=Tt);break}n&&ve&&fi.alternate===null&&s(O,ve),L=m(fi,L,Ie),_e===null?me=fi:_e.sibling=fi,_e=fi,ve=Tt}if(je.done)return a(O,ve),et&&Xi(O,Ie),me;if(ve===null){for(;!je.done;Ie++,je=j.next())je=ee(O,je.value,ne),je!==null&&(L=m(je,L,Ie),_e===null?me=je:_e.sibling=je,_e=je);return et&&Xi(O,Ie),me}for(ve=c(O,ve);!je.done;Ie++,je=j.next())je=oe(ve,O,Ie,je.value,ne),je!==null&&(n&&je.alternate!==null&&ve.delete(je.key===null?Ie:je.key),L=m(je,L,Ie),_e===null?me=je:_e.sibling=je,_e=je);return n&&ve.forEach(function(BE){return s(O,BE)}),et&&Xi(O,Ie),me}function lt(O,L,j,ne){if(typeof j=="object"&&j!==null&&j.type===R&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case fe:e:{for(var me=j.key,_e=L;_e!==null;){if(_e.key===me){if(me=j.type,me===R){if(_e.tag===7){a(O,_e.sibling),L=d(_e,j.props.children),L.return=O,O=L;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ze&&_m(me)===_e.type){a(O,_e.sibling),L=d(_e,j.props),L.ref=Ea(O,_e,j),L.return=O,O=L;break e}a(O,_e);break}else s(O,_e);_e=_e.sibling}j.type===R?(L=os(j.props.children,O.mode,ne,j.key),L.return=O,O=L):(ne=Iu(j.type,j.key,j.props,null,O.mode,ne),ne.ref=Ea(O,L,j),ne.return=O,O=ne)}return v(O);case J:e:{for(_e=j.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===j.containerInfo&&L.stateNode.implementation===j.implementation){a(O,L.sibling),L=d(L,j.children||[]),L.return=O,O=L;break e}else{a(O,L);break}else s(O,L);L=L.sibling}L=id(j,O.mode,ne),L.return=O,O=L}return v(O);case Ze:return _e=j._init,lt(O,L,_e(j._payload),ne)}if(ot(j))return he(O,L,j,ne);if(ge(j))return pe(O,L,j,ne);iu(O,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,L!==null&&L.tag===6?(a(O,L.sibling),L=d(L,j),L.return=O,O=L):(a(O,L),L=rd(j,O.mode,ne),L.return=O,O=L),v(O)):a(O,L)}return lt}var oo=vm(!0),wm=vm(!1),Ta={},Qn=ni(Ta),Ia=ni(Ta),Sa=ni(Ta);function es(n){if(n===Ta)throw Error(t(174));return n}function Eh(n,s){switch(Ke(Sa,s),Ke(Ia,n),Ke(Qn,Ta),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ps(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ps(s,n)}Je(Qn),Ke(Qn,s)}function ao(){Je(Qn),Je(Ia),Je(Sa)}function Em(n){es(Sa.current);var s=es(Qn.current),a=Ps(s,n.type);s!==a&&(Ke(Ia,n),Ke(Qn,a))}function Th(n){Ia.current===n&&(Je(Qn),Je(Ia))}var tt=ni(0);function su(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ih=[];function Sh(){for(var n=0;n<Ih.length;n++)Ih[n]._workInProgressVersionPrimary=null;Ih.length=0}var ou=te.ReactCurrentDispatcher,Ah=te.ReactCurrentBatchConfig,ts=0,nt=null,yt=null,wt=null,au=!1,Aa=!1,Ca=0,uE=0;function Vt(){throw Error(t(321))}function Ch(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Tn(n[a],s[a]))return!1;return!0}function Rh(n,s,a,c,d,m){if(ts=m,nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ou.current=n===null||n.memoizedState===null?fE:pE,n=a(c,d),Aa){m=0;do{if(Aa=!1,Ca=0,25<=m)throw Error(t(301));m+=1,wt=yt=null,s.updateQueue=null,ou.current=mE,n=a(c,d)}while(Aa)}if(ou.current=cu,s=yt!==null&&yt.next!==null,ts=0,wt=yt=nt=null,au=!1,s)throw Error(t(300));return n}function Ph(){var n=Ca!==0;return Ca=0,n}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?nt.memoizedState=wt=n:wt=wt.next=n,wt}function dn(){if(yt===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var s=wt===null?nt.memoizedState:wt.next;if(s!==null)wt=s,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},wt===null?nt.memoizedState=wt=n:wt=wt.next=n}return wt}function Ra(n,s){return typeof s=="function"?s(n):s}function kh(n){var s=dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var k=v=null,b=null,B=m;do{var Y=B.lane;if((ts&Y)===Y)b!==null&&(b=b.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var ee={lane:Y,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};b===null?(k=b=ee,v=c):b=b.next=ee,nt.lanes|=Y,ns|=Y}B=B.next}while(B!==null&&B!==m);b===null?v=c:b.next=k,Tn(c,s.memoizedState)||(Ht=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,nt.lanes|=m,ns|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function xh(n){var s=dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Tn(m,s.memoizedState)||(Ht=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Tm(){}function Im(n,s){var a=nt,c=dn(),d=s(),m=!Tn(c.memoizedState,d);if(m&&(c.memoizedState=d,Ht=!0),c=c.queue,Nh(Cm.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Pa(9,Am.bind(null,a,c,d,s),void 0,null),Et===null)throw Error(t(349));(ts&30)!==0||Sm(a,s,d)}return d}function Sm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Am(n,s,a,c){s.value=a,s.getSnapshot=c,Rm(s)&&Pm(n)}function Cm(n,s,a){return a(function(){Rm(s)&&Pm(n)})}function Rm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Tn(n,a)}catch{return!0}}function Pm(n){var s=Ir(n,1);s!==null&&Rn(s,n,1,-1)}function km(n){var s=Yn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:n},s.queue=n,n=n.dispatch=dE.bind(null,nt,n),[s.memoizedState,n]}function Pa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function xm(){return dn().memoizedState}function lu(n,s,a,c){var d=Yn();nt.flags|=n,d.memoizedState=Pa(1|s,a,void 0,c===void 0?null:c)}function uu(n,s,a,c){var d=dn();c=c===void 0?null:c;var m=void 0;if(yt!==null){var v=yt.memoizedState;if(m=v.destroy,c!==null&&Ch(c,v.deps)){d.memoizedState=Pa(s,a,m,c);return}}nt.flags|=n,d.memoizedState=Pa(1|s,a,m,c)}function Nm(n,s){return lu(8390656,8,n,s)}function Nh(n,s){return uu(2048,8,n,s)}function Dm(n,s){return uu(4,2,n,s)}function Vm(n,s){return uu(4,4,n,s)}function bm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Lm(n,s,a){return a=a!=null?a.concat([n]):null,uu(4,4,bm.bind(null,s,n),a)}function Dh(){}function Mm(n,s){var a=dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ch(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Om(n,s){var a=dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ch(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Fm(n,s,a){return(ts&21)===0?(n.baseState&&(n.baseState=!1,Ht=!0),n.memoizedState=a):(Tn(a,s)||(a=ea(),nt.lanes|=a,ns|=a,n.baseState=!0),s)}function cE(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=Ah.transition;Ah.transition={};try{n(!1),s()}finally{Me=a,Ah.transition=c}}function jm(){return dn().memoizedState}function hE(n,s,a){var c=ci(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Um(n))Bm(s,a);else if(a=cm(n,s,a,c),a!==null){var d=zt();Rn(a,n,c,d),zm(a,s,c)}}function dE(n,s,a){var c=ci(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Um(n))Bm(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,k=m(v,a);if(d.hasEagerState=!0,d.eagerState=k,Tn(k,v)){var b=s.interleaved;b===null?(d.next=d,yh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=cm(n,s,d,c),a!==null&&(d=zt(),Rn(a,n,c,d),zm(a,s,c))}}function Um(n){var s=n.alternate;return n===nt||s!==null&&s===nt}function Bm(n,s){Aa=au=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function zm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,na(n,a)}}var cu={readContext:hn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},fE={readContext:hn,useCallback:function(n,s){return Yn().memoizedState=[n,s===void 0?null:s],n},useContext:hn,useEffect:Nm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,lu(4194308,4,bm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return lu(4194308,4,n,s)},useInsertionEffect:function(n,s){return lu(4,2,n,s)},useMemo:function(n,s){var a=Yn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Yn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=hE.bind(null,nt,n),[c.memoizedState,n]},useRef:function(n){var s=Yn();return n={current:n},s.memoizedState=n},useState:km,useDebugValue:Dh,useDeferredValue:function(n){return Yn().memoizedState=n},useTransition:function(){var n=km(!1),s=n[0];return n=cE.bind(null,n[1]),Yn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=nt,d=Yn();if(et){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Et===null)throw Error(t(349));(ts&30)!==0||Sm(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Nm(Cm.bind(null,c,m,n),[n]),c.flags|=2048,Pa(9,Am.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=Yn(),s=Et.identifierPrefix;if(et){var a=Tr,c=Er;a=(c&~(1<<32-Xt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ca++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=uE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},pE={readContext:hn,useCallback:Mm,useContext:hn,useEffect:Nh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:Om,useReducer:kh,useRef:xm,useState:function(){return kh(Ra)},useDebugValue:Dh,useDeferredValue:function(n){var s=dn();return Fm(s,yt.memoizedState,n)},useTransition:function(){var n=kh(Ra)[0],s=dn().memoizedState;return[n,s]},useMutableSource:Tm,useSyncExternalStore:Im,useId:jm,unstable_isNewReconciler:!1},mE={readContext:hn,useCallback:Mm,useContext:hn,useEffect:Nh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:Om,useReducer:xh,useRef:xm,useState:function(){return xh(Ra)},useDebugValue:Dh,useDeferredValue:function(n){var s=dn();return yt===null?s.memoizedState=n:Fm(s,yt.memoizedState,n)},useTransition:function(){var n=xh(Ra)[0],s=dn().memoizedState;return[n,s]},useMutableSource:Tm,useSyncExternalStore:Im,useId:jm,unstable_isNewReconciler:!1};function lo(n,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function Vh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function bh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var gE=typeof WeakMap=="function"?WeakMap:Map;function qm(n,s,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){yu||(yu=!0,Qh=c),bh(n,s)},a}function $m(n,s,a){a=Sr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){bh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){bh(n,s),typeof c!="function"&&(li===null?li=new Set([this]):li.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Hm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new gE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=xE.bind(null,n,s,a),s.then(n,n))}function Wm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Km(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Sr(-1,1),s.tag=2,oi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var yE=te.ReactCurrentOwner,Ht=!1;function Bt(n,s,a,c){s.child=n===null?wm(s,null,a,c):oo(s,n.child,a,c)}function Gm(n,s,a,c,d){a=a.render;var m=s.ref;return so(s,d),c=Rh(n,s,a,c,m,d),a=Ph(),n!==null&&!Ht?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ar(n,s,d)):(et&&a&&lh(s),s.flags|=1,Bt(n,s,c,d),s.child)}function Qm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!nd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Ym(n,s,m,c,d)):(n=Iu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:pa,a(v,c)&&n.ref===s.ref)return Ar(n,s,d)}return s.flags|=1,n=di(m,c),n.ref=s.ref,n.return=s,s.child=n}function Ym(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(pa(m,c)&&n.ref===s.ref)if(Ht=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Ht=!0);else return s.lanes=n.lanes,Ar(n,s,d)}return Lh(n,s,a,c,d)}function Jm(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(co,on),on|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ke(co,on),on|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ke(co,on),on|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,Ke(co,on),on|=c;return Bt(n,s,d,a),s.child}function Xm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Lh(n,s,a,c,d){var m=$t(a)?Yi:Dt.current;return m=eo(s,m),so(s,d),a=Rh(n,s,a,c,m,d),c=Ph(),n!==null&&!Ht?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ar(n,s,d)):(et&&c&&lh(s),s.flags|=1,Bt(n,s,a,d),s.child)}function Zm(n,s,a,c,d){if($t(a)){var m=!0;Gl(s)}else m=!1;if(so(s,d),s.stateNode===null)du(n,s),gm(s,a,c),wh(s,a,c,d),c=!0;else if(n===null){var v=s.stateNode,k=s.memoizedProps;v.props=k;var b=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=hn(B):(B=$t(a)?Yi:Dt.current,B=eo(s,B));var Y=a.getDerivedStateFromProps,ee=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k!==c||b!==B)&&ym(s,v,c,B),si=!1;var G=s.memoizedState;v.state=G,nu(s,c,v,d),b=s.memoizedState,k!==c||G!==b||qt.current||si?(typeof Y=="function"&&(vh(s,a,Y,c),b=s.memoizedState),(k=si||mm(s,a,k,c,G,b,B))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),v.props=c,v.state=b,v.context=B,c=k):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,hm(n,s),k=s.memoizedProps,B=s.type===s.elementType?k:Sn(s.type,k),v.props=B,ee=s.pendingProps,G=v.context,b=a.contextType,typeof b=="object"&&b!==null?b=hn(b):(b=$t(a)?Yi:Dt.current,b=eo(s,b));var oe=a.getDerivedStateFromProps;(Y=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k!==ee||G!==b)&&ym(s,v,c,b),si=!1,G=s.memoizedState,v.state=G,nu(s,c,v,d);var he=s.memoizedState;k!==ee||G!==he||qt.current||si?(typeof oe=="function"&&(vh(s,a,oe,c),he=s.memoizedState),(B=si||mm(s,a,B,c,G,he,b)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,he,b),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,he,b)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=he),v.props=c,v.state=he,v.context=b,c=B):(typeof v.componentDidUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return Mh(n,s,a,c,m,d)}function Mh(n,s,a,c,d,m){Xm(n,s);var v=(s.flags&128)!==0;if(!c&&!v)return d&&rm(s,a,!1),Ar(n,s,m);c=s.stateNode,yE.current=s;var k=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&v?(s.child=oo(s,n.child,null,m),s.child=oo(s,null,k,m)):Bt(n,s,k,m),s.memoizedState=c.state,d&&rm(s,a,!0),s.child}function eg(n){var s=n.stateNode;s.pendingContext?tm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&tm(n,s.context,!1),Eh(n,s.containerInfo)}function tg(n,s,a,c,d){return ro(),dh(d),s.flags|=256,Bt(n,s,a,c),s.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Fh(n){return{baseLanes:n,cachePool:null,transitions:null}}function ng(n,s,a){var c=s.pendingProps,d=tt.current,m=!1,v=(s.flags&128)!==0,k;if((k=v)||(k=n!==null&&n.memoizedState===null?!1:(d&2)!==0),k?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ke(tt,d&1),n===null)return hh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,n=c.fallback,m?(c=s.mode,m=s.child,v={mode:"hidden",children:v},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Su(v,c,0,null),n=os(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Fh(a),s.memoizedState=Oh,n):jh(s,v));if(d=n.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return _E(n,s,v,c,k,d,a);if(m){m=c.fallback,v=s.mode,d=n.child,k=d.sibling;var b={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=di(d,b),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?m=di(k,m):(m=os(m,v,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,v=n.child.memoizedState,v=v===null?Fh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,s.memoizedState=Oh,c}return m=n.child,n=m.sibling,c=di(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function jh(n,s){return s=Su({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function hu(n,s,a,c){return c!==null&&dh(c),oo(s,n.child,null,a),n=jh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _E(n,s,a,c,d,m,v){if(a)return s.flags&256?(s.flags&=-257,c=Vh(Error(t(422))),hu(n,s,v,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=Su({mode:"visible",children:c.children},d,0,null),m=os(m,d,v,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&oo(s,n.child,null,v),s.child.memoizedState=Fh(v),s.memoizedState=Oh,m);if((s.mode&1)===0)return hu(n,s,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,m=Error(t(419)),c=Vh(m,c,void 0),hu(n,s,v,c)}if(k=(v&n.childLanes)!==0,Ht||k){if(c=Et,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Ir(n,d),Rn(c,n,d,-1))}return td(),c=Vh(Error(t(421))),hu(n,s,v,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=NE.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,sn=ti(d.nextSibling),rn=s,et=!0,In=null,n!==null&&(un[cn++]=Er,un[cn++]=Tr,un[cn++]=Ji,Er=n.id,Tr=n.overflow,Ji=s),s=jh(s,c.children),s.flags|=4096,s)}function rg(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),gh(n.return,s,a)}function Uh(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function ig(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(Bt(n,s,c.children,a),c=tt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rg(n,a,s);else if(n.tag===19)rg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ke(tt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&su(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Uh(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&su(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Uh(s,!0,a,null,m);break;case"together":Uh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function du(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ar(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ns|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=di(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=di(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function vE(n,s,a){switch(s.tag){case 3:eg(s),ro();break;case 5:Em(s);break;case 1:$t(s.type)&&Gl(s);break;case 4:Eh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ke(Zl,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ke(tt,tt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?ng(n,s,a):(Ke(tt,tt.current&1),n=Ar(n,s,a),n!==null?n.sibling:null);Ke(tt,tt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return ig(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ke(tt,tt.current),c)break;return null;case 22:case 23:return s.lanes=0,Jm(n,s,a)}return Ar(n,s,a)}var sg,Bh,og,ag;sg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bh=function(){},og=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,es(Qn.current);var m=null;switch(a){case"input":d=Cs(n,d),c=Cs(n,c),m=[];break;case"select":d=D({},d,{value:void 0}),c=D({},c,{value:void 0}),m=[];break;case"textarea":d=qo(n,d),c=qo(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Hl)}vn(a,c);var v;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var k=d[B];for(v in k)k.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var b=c[B];if(k=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&b!==k&&(b!=null||k!=null))if(B==="style")if(k){for(v in k)!k.hasOwnProperty(v)||b&&b.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in b)b.hasOwnProperty(v)&&k[v]!==b[v]&&(a||(a={}),a[v]=b[v])}else a||(m||(m=[]),m.push(B,a)),a=b;else B==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,k=k?k.__html:void 0,b!=null&&k!==b&&(m=m||[]).push(B,b)):B==="children"?typeof b!="string"&&typeof b!="number"||(m=m||[]).push(B,""+b):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(b!=null&&B==="onScroll"&&Ye("scroll",n),m||k===b||(m=[])):(m=m||[]).push(B,b))}a&&(m=m||[]).push("style",a);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},ag=function(n,s,a,c){a!==c&&(s.flags|=4)};function ka(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function wE(n,s,a){var c=s.pendingProps;switch(uh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return $t(s.type)&&Kl(),bt(s),null;case 3:return c=s.stateNode,ao(),Je(qt),Je(Dt),Sh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Xl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,In!==null&&(Xh(In),In=null))),Bh(n,s),bt(s),null;case 5:Th(s);var d=es(Sa.current);if(a=s.type,n!==null&&s.stateNode!=null)og(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return bt(s),null}if(n=es(Qn.current),Xl(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[Gn]=s,c[va]=m,n=(s.mode&1)!==0,a){case"dialog":Ye("cancel",c),Ye("close",c);break;case"iframe":case"object":case"embed":Ye("load",c);break;case"video":case"audio":for(d=0;d<ga.length;d++)Ye(ga[d],c);break;case"source":Ye("error",c);break;case"img":case"image":case"link":Ye("error",c),Ye("load",c);break;case"details":Ye("toggle",c);break;case"input":gl(c,m),Ye("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ye("invalid",c);break;case"textarea":$o(c,m),Ye("invalid",c)}vn(a,m),d=null;for(var v in m)if(m.hasOwnProperty(v)){var k=m[v];v==="children"?typeof k=="string"?c.textContent!==k&&(m.suppressHydrationWarning!==!0&&$l(c.textContent,k,n),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&$l(c.textContent,k,n),d=["children",""+k]):o.hasOwnProperty(v)&&k!=null&&v==="onScroll"&&Ye("scroll",c)}switch(a){case"input":Vn(c),zo(c,m,!0);break;case"textarea":Vn(c),jr(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Hl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ho(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Gn]=s,n[va]=c,sg(n,s,!1,!1),s.stateNode=n;e:{switch(v=xs(a,c),a){case"dialog":Ye("cancel",n),Ye("close",n),d=c;break;case"iframe":case"object":case"embed":Ye("load",n),d=c;break;case"video":case"audio":for(d=0;d<ga.length;d++)Ye(ga[d],n);d=c;break;case"source":Ye("error",n),d=c;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),d=c;break;case"details":Ye("toggle",n),d=c;break;case"input":gl(n,c),d=Cs(n,c),Ye("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=D({},c,{value:void 0}),Ye("invalid",n);break;case"textarea":$o(n,c),d=qo(n,c),Ye("invalid",n);break;default:d=c}vn(a,d),k=d;for(m in k)if(k.hasOwnProperty(m)){var b=k[m];m==="style"?ks(n,b):m==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&_l(n,b)):m==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&Li(n,b):typeof b=="number"&&Li(n,""+b):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?b!=null&&m==="onScroll"&&Ye("scroll",n):b!=null&&Z(n,m,b,v))}switch(a){case"input":Vn(n),zo(n,c,!1);break;case"textarea":Vn(n),jr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Se(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?_n(n,!!c.multiple,m,!1):c.defaultValue!=null&&_n(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Hl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(n&&s.stateNode!=null)ag(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=es(Sa.current),es(Qn.current),Xl(s)){if(c=s.stateNode,a=s.memoizedProps,c[Gn]=s,(m=c.nodeValue!==a)&&(n=rn,n!==null))switch(n.tag){case 3:$l(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$l(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Gn]=s,s.stateNode=c}return bt(s),null;case 13:if(Je(tt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&sn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)um(),ro(),s.flags|=98560,m=!1;else if(m=Xl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Gn]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),m=!1}else In!==null&&(Xh(In),In=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(tt.current&1)!==0?_t===0&&(_t=3):td())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return ao(),Bh(n,s),n===null&&ya(s.stateNode.containerInfo),bt(s),null;case 10:return mh(s.type._context),bt(s),null;case 17:return $t(s.type)&&Kl(),bt(s),null;case 19:if(Je(tt),m=s.memoizedState,m===null)return bt(s),null;if(c=(s.flags&128)!==0,v=m.rendering,v===null)if(c)ka(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=su(n),v!==null){for(s.flags|=128,ka(m,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(tt,tt.current&1|2),s.child}n=n.sibling}m.tail!==null&&Qe()>ho&&(s.flags|=128,c=!0,ka(m,!1),s.lanes=4194304)}else{if(!c)if(n=su(v),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ka(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!et)return bt(s),null}else 2*Qe()-m.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,c=!0,ka(m,!1),s.lanes=4194304);m.isBackwards?(v.sibling=s.child,s.child=v):(a=m.last,a!==null?a.sibling=v:s.child=v,m.last=v)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Qe(),s.sibling=null,a=tt.current,Ke(tt,c?a&1|2:a&1),s):(bt(s),null);case 22:case 23:return ed(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(on&1073741824)!==0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function EE(n,s){switch(uh(s),s.tag){case 1:return $t(s.type)&&Kl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ao(),Je(qt),Je(Dt),Sh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Th(s),null;case 13:if(Je(tt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Je(tt),null;case 4:return ao(),null;case 10:return mh(s.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var fu=!1,Lt=!1,TE=typeof WeakSet=="function"?WeakSet:Set,ce=null;function uo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){st(n,s,c)}else a.current=null}function zh(n,s,a){try{a()}catch(c){st(n,s,c)}}var lg=!1;function IE(n,s){if(eh=gr,n=jp(),Wc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,k=-1,b=-1,B=0,Y=0,ee=n,G=null;t:for(;;){for(var oe;ee!==a||d!==0&&ee.nodeType!==3||(k=v+d),ee!==m||c!==0&&ee.nodeType!==3||(b=v+c),ee.nodeType===3&&(v+=ee.nodeValue.length),(oe=ee.firstChild)!==null;)G=ee,ee=oe;for(;;){if(ee===n)break t;if(G===a&&++B===d&&(k=v),G===m&&++Y===c&&(b=v),(oe=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=oe}a=k===-1||b===-1?null:{start:k,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(th={focusedElem:n,selectionRange:a},gr=!1,ce=s;ce!==null;)if(s=ce,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ce=n;else for(;ce!==null;){s=ce;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var pe=he.memoizedProps,lt=he.memoizedState,O=s.stateNode,L=O.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Sn(s.type,pe),lt);O.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){st(s,s.return,ne)}if(n=s.sibling,n!==null){n.return=s.return,ce=n;break}ce=s.return}return he=lg,lg=!1,he}function xa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&zh(s,a,m)}d=d.next}while(d!==c)}}function pu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function qh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ug(n){var s=n.alternate;s!==null&&(n.alternate=null,ug(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Gn],delete s[va],delete s[sh],delete s[sE],delete s[oE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cg(n){return n.tag===5||n.tag===3||n.tag===4}function hg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $h(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Hl));else if(c!==4&&(n=n.child,n!==null))for($h(n,s,a),n=n.sibling;n!==null;)$h(n,s,a),n=n.sibling}function Hh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Hh(n,s,a),n=n.sibling;n!==null;)Hh(n,s,a),n=n.sibling}var Ct=null,An=!1;function ai(n,s,a){for(a=a.child;a!==null;)dg(n,s,a),a=a.sibling}function dg(n,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ui,a)}catch{}switch(a.tag){case 5:Lt||uo(a,s);case 6:var c=Ct,d=An;Ct=null,ai(n,s,a),Ct=c,An=d,Ct!==null&&(An?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(An?(n=Ct,a=a.stateNode,n.nodeType===8?ih(n.parentNode,a):n.nodeType===1&&ih(n,a),Jr(n)):ih(Ct,a.stateNode));break;case 4:c=Ct,d=An,Ct=a.stateNode.containerInfo,An=!0,ai(n,s,a),Ct=c,An=d;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&zh(a,s,v),d=d.next}while(d!==c)}ai(n,s,a);break;case 1:if(!Lt&&(uo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){st(a,s,k)}ai(n,s,a);break;case 21:ai(n,s,a);break;case 22:a.mode&1?(Lt=(c=Lt)||a.memoizedState!==null,ai(n,s,a),Lt=c):ai(n,s,a);break;default:ai(n,s,a)}}function fg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new TE),s.forEach(function(c){var d=DE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Cn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,v=s,k=v;e:for(;k!==null;){switch(k.tag){case 5:Ct=k.stateNode,An=!1;break e;case 3:Ct=k.stateNode.containerInfo,An=!0;break e;case 4:Ct=k.stateNode.containerInfo,An=!0;break e}k=k.return}if(Ct===null)throw Error(t(160));dg(m,v,d),Ct=null,An=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(B){st(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)pg(s,n),s=s.sibling}function pg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(s,n),Jn(n),c&4){try{xa(3,n,n.return),pu(3,n)}catch(pe){st(n,n.return,pe)}try{xa(5,n,n.return)}catch(pe){st(n,n.return,pe)}}break;case 1:Cn(s,n),Jn(n),c&512&&a!==null&&uo(a,a.return);break;case 5:if(Cn(s,n),Jn(n),c&512&&a!==null&&uo(a,a.return),n.flags&32){var d=n.stateNode;try{Li(d,"")}catch(pe){st(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,k=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&Rs(d,m),xs(k,v);var B=xs(k,m);for(v=0;v<b.length;v+=2){var Y=b[v],ee=b[v+1];Y==="style"?ks(d,ee):Y==="dangerouslySetInnerHTML"?_l(d,ee):Y==="children"?Li(d,ee):Z(d,Y,ee,B)}switch(k){case"input":bi(d,m);break;case"textarea":yl(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var oe=m.value;oe!=null?_n(d,!!m.multiple,oe,!1):G!==!!m.multiple&&(m.defaultValue!=null?_n(d,!!m.multiple,m.defaultValue,!0):_n(d,!!m.multiple,m.multiple?[]:"",!1))}d[va]=m}catch(pe){st(n,n.return,pe)}}break;case 6:if(Cn(s,n),Jn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(pe){st(n,n.return,pe)}}break;case 3:if(Cn(s,n),Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Jr(s.containerInfo)}catch(pe){st(n,n.return,pe)}break;case 4:Cn(s,n),Jn(n);break;case 13:Cn(s,n),Jn(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Gh=Qe())),c&4&&fg(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=(B=Lt)||Y,Cn(s,n),Lt=B):Cn(s,n),Jn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Y&&(n.mode&1)!==0)for(ce=n,Y=n.child;Y!==null;){for(ee=ce=Y;ce!==null;){switch(G=ce,oe=G.child,G.tag){case 0:case 11:case 14:case 15:xa(4,G,G.return);break;case 1:uo(G,G.return);var he=G.stateNode;if(typeof he.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(pe){st(c,a,pe)}}break;case 5:uo(G,G.return);break;case 22:if(G.memoizedState!==null){yg(ee);continue}}oe!==null?(oe.return=G,ce=oe):yg(ee)}Y=Y.sibling}e:for(Y=null,ee=n;;){if(ee.tag===5){if(Y===null){Y=ee;try{d=ee.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=ee.stateNode,b=ee.memoizedProps.style,v=b!=null&&b.hasOwnProperty("display")?b.display:null,k.style.display=zr("display",v))}catch(pe){st(n,n.return,pe)}}}else if(ee.tag===6){if(Y===null)try{ee.stateNode.nodeValue=B?"":ee.memoizedProps}catch(pe){st(n,n.return,pe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;Y===ee&&(Y=null),ee=ee.return}Y===ee&&(Y=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Cn(s,n),Jn(n),c&4&&fg(n);break;case 21:break;default:Cn(s,n),Jn(n)}}function Jn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(cg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Li(d,""),c.flags&=-33);var m=hg(n);Hh(n,m,d);break;case 3:case 4:var v=c.stateNode.containerInfo,k=hg(n);$h(n,k,v);break;default:throw Error(t(161))}}catch(b){st(n,n.return,b)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function SE(n,s,a){ce=n,mg(n)}function mg(n,s,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,m=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||fu;if(!v){var k=d.alternate,b=k!==null&&k.memoizedState!==null||Lt;k=fu;var B=Lt;if(fu=v,(Lt=b)&&!B)for(ce=d;ce!==null;)v=ce,b=v.child,v.tag===22&&v.memoizedState!==null?_g(d):b!==null?(b.return=v,ce=b):_g(d);for(;m!==null;)ce=m,mg(m),m=m.sibling;ce=d,fu=k,Lt=B}gg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ce=m):gg(n)}}function gg(n){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Lt||pu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Lt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Sn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&fm(s,m,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}fm(s,v,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var Y=B.memoizedState;if(Y!==null){var ee=Y.dehydrated;ee!==null&&Jr(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||s.flags&512&&qh(s)}catch(G){st(s,s.return,G)}}if(s===n){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function yg(n){for(;ce!==null;){var s=ce;if(s===n){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function _g(n){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{pu(4,s)}catch(b){st(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){st(s,d,b)}}var m=s.return;try{qh(s)}catch(b){st(s,m,b)}break;case 5:var v=s.return;try{qh(s)}catch(b){st(s,v,b)}}}catch(b){st(s,s.return,b)}if(s===n){ce=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ce=k;break}ce=s.return}}var AE=Math.ceil,mu=te.ReactCurrentDispatcher,Wh=te.ReactCurrentOwner,fn=te.ReactCurrentBatchConfig,Fe=0,Et=null,ft=null,Rt=0,on=0,co=ni(0),_t=0,Na=null,ns=0,gu=0,Kh=0,Da=null,Wt=null,Gh=0,ho=1/0,Cr=null,yu=!1,Qh=null,li=null,_u=!1,ui=null,vu=0,Va=0,Yh=null,wu=-1,Eu=0;function zt(){return(Fe&6)!==0?Qe():wu!==-1?wu:wu=Qe()}function ci(n){return(n.mode&1)===0?1:(Fe&2)!==0&&Rt!==0?Rt&-Rt:lE.transition!==null?(Eu===0&&(Eu=ea()),Eu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Us(n.type)),n)}function Rn(n,s,a,c){if(50<Va)throw Va=0,Yh=null,Error(t(185));$i(n,a,c),((Fe&2)===0||n!==Et)&&(n===Et&&((Fe&2)===0&&(gu|=a),_t===4&&hi(n,Rt)),Kt(n,c),a===1&&Fe===0&&(s.mode&1)===0&&(ho=Qe()+500,Ql&&ii()))}function Kt(n,s){var a=n.callbackNode;qi(n,s);var c=fr(n,n===Et?Rt:0);if(c===0)a!==null&&Vs(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Vs(a),s===1)n.tag===0?aE(wg.bind(null,n)):im(wg.bind(null,n)),rE(function(){(Fe&6)===0&&ii()}),a=null;else{switch(Fn(c)){case 1:a=bs;break;case 4:a=Jo;break;case 16:a=ji;break;case 536870912:a=Ls;break;default:a=ji}a=Pg(a,vg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function vg(n,s){if(wu=-1,Eu=0,(Fe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var c=fr(n,n===Et?Rt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Tu(n,c);else{s=c;var d=Fe;Fe|=2;var m=Tg();(Et!==n||Rt!==s)&&(Cr=null,ho=Qe()+500,is(n,s));do try{PE();break}catch(k){Eg(n,k)}while(!0);ph(),mu.current=m,Fe=d,ft!==null?s=0:(Et=null,Rt=0,s=_t)}if(s!==0){if(s===2&&(d=Zo(n),d!==0&&(c=d,s=Jh(n,d))),s===1)throw a=Na,is(n,0),hi(n,c),Kt(n,Qe()),a;if(s===6)hi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!CE(d)&&(s=Tu(n,c),s===2&&(m=Zo(n),m!==0&&(c=m,s=Jh(n,m))),s===1))throw a=Na,is(n,0),hi(n,c),Kt(n,Qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ss(n,Wt,Cr);break;case 3:if(hi(n,c),(c&130023424)===c&&(s=Gh+500-Qe(),10<s)){if(fr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){zt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=rh(ss.bind(null,n,Wt,Cr),s);break}ss(n,Wt,Cr);break;case 4:if(hi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var v=31-Xt(c);m=1<<v,v=s[v],v>d&&(d=v),c&=~m}if(c=d,c=Qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*AE(c/1960))-c,10<c){n.timeoutHandle=rh(ss.bind(null,n,Wt,Cr),c);break}ss(n,Wt,Cr);break;case 5:ss(n,Wt,Cr);break;default:throw Error(t(329))}}}return Kt(n,Qe()),n.callbackNode===a?vg.bind(null,n):null}function Jh(n,s){var a=Da;return n.current.memoizedState.isDehydrated&&(is(n,s).flags|=256),n=Tu(n,s),n!==2&&(s=Wt,Wt=a,s!==null&&Xh(s)),n}function Xh(n){Wt===null?Wt=n:Wt.push.apply(Wt,n)}function CE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Tn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hi(n,s){for(s&=~Kh,s&=~gu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Xt(s),c=1<<a;n[a]=-1,s&=~c}}function wg(n){if((Fe&6)!==0)throw Error(t(327));fo();var s=fr(n,0);if((s&1)===0)return Kt(n,Qe()),null;var a=Tu(n,s);if(n.tag!==0&&a===2){var c=Zo(n);c!==0&&(s=c,a=Jh(n,c))}if(a===1)throw a=Na,is(n,0),hi(n,s),Kt(n,Qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ss(n,Wt,Cr),Kt(n,Qe()),null}function Zh(n,s){var a=Fe;Fe|=1;try{return n(s)}finally{Fe=a,Fe===0&&(ho=Qe()+500,Ql&&ii())}}function rs(n){ui!==null&&ui.tag===0&&(Fe&6)===0&&fo();var s=Fe;Fe|=1;var a=fn.transition,c=Me;try{if(fn.transition=null,Me=1,n)return n()}finally{Me=c,fn.transition=a,Fe=s,(Fe&6)===0&&ii()}}function ed(){on=co.current,Je(co)}function is(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,nE(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch(uh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Kl();break;case 3:ao(),Je(qt),Je(Dt),Sh();break;case 5:Th(c);break;case 4:ao();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:mh(c.type._context);break;case 22:case 23:ed()}a=a.return}if(Et=n,ft=n=di(n.current,null),Rt=on=s,_t=0,Na=null,Kh=gu=ns=0,Wt=Da=null,Zi!==null){for(s=0;s<Zi.length;s++)if(a=Zi[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=d,c.next=v}a.pending=c}Zi=null}return n}function Eg(n,s){do{var a=ft;try{if(ph(),ou.current=cu,au){for(var c=nt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}au=!1}if(ts=0,wt=yt=nt=null,Aa=!1,Ca=0,Wh.current=null,a===null||a.return===null){_t=1,Na=s,ft=null;break}e:{var m=n,v=a.return,k=a,b=s;if(s=Rt,k.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var B=b,Y=k,ee=Y.tag;if((Y.mode&1)===0&&(ee===0||ee===11||ee===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var oe=Wm(v);if(oe!==null){oe.flags&=-257,Km(oe,v,k,m,s),oe.mode&1&&Hm(m,B,s),s=oe,b=B;var he=s.updateQueue;if(he===null){var pe=new Set;pe.add(b),s.updateQueue=pe}else he.add(b);break e}else{if((s&1)===0){Hm(m,B,s),td();break e}b=Error(t(426))}}else if(et&&k.mode&1){var lt=Wm(v);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Km(lt,v,k,m,s),dh(lo(b,k));break e}}m=b=lo(b,k),_t!==4&&(_t=2),Da===null?Da=[m]:Da.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var O=qm(m,b,s);dm(m,O);break e;case 1:k=b;var L=m.type,j=m.stateNode;if((m.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(li===null||!li.has(j)))){m.flags|=65536,s&=-s,m.lanes|=s;var ne=$m(m,k,s);dm(m,ne);break e}}m=m.return}while(m!==null)}Sg(a)}catch(me){s=me,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Tg(){var n=mu.current;return mu.current=cu,n===null?cu:n}function td(){(_t===0||_t===3||_t===2)&&(_t=4),Et===null||(ns&268435455)===0&&(gu&268435455)===0||hi(Et,Rt)}function Tu(n,s){var a=Fe;Fe|=2;var c=Tg();(Et!==n||Rt!==s)&&(Cr=null,is(n,s));do try{RE();break}catch(d){Eg(n,d)}while(!0);if(ph(),Fe=a,mu.current=c,ft!==null)throw Error(t(261));return Et=null,Rt=0,_t}function RE(){for(;ft!==null;)Ig(ft)}function PE(){for(;ft!==null&&!Fi();)Ig(ft)}function Ig(n){var s=Rg(n.alternate,n,on);n.memoizedProps=n.pendingProps,s===null?Sg(n):ft=s,Wh.current=null}function Sg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=wE(a,s,on),a!==null){ft=a;return}}else{if(a=EE(a,s),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=n}while(s!==null);_t===0&&(_t=5)}function ss(n,s,a){var c=Me,d=fn.transition;try{fn.transition=null,Me=1,kE(n,s,a,c)}finally{fn.transition=d,Me=c}return null}function kE(n,s,a,c){do fo();while(ui!==null);if((Fe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Bc(n,m),n===Et&&(ft=Et=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||_u||(_u=!0,Pg(ji,function(){return fo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=fn.transition,fn.transition=null;var v=Me;Me=1;var k=Fe;Fe|=4,Wh.current=null,IE(n,a),pg(a,n),Qw(th),gr=!!eh,th=eh=null,n.current=a,SE(a),dr(),Fe=k,Me=v,fn.transition=m}else n.current=a;if(_u&&(_u=!1,ui=n,vu=d),m=n.pendingLanes,m===0&&(li=null),kl(a.stateNode),Kt(n,Qe()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(yu)throw yu=!1,n=Qh,Qh=null,n;return(vu&1)!==0&&n.tag!==0&&fo(),m=n.pendingLanes,(m&1)!==0?n===Yh?Va++:(Va=0,Yh=n):Va=0,ii(),null}function fo(){if(ui!==null){var n=Fn(vu),s=fn.transition,a=Me;try{if(fn.transition=null,Me=16>n?16:n,ui===null)var c=!1;else{if(n=ui,ui=null,vu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,ce=n.current;ce!==null;){var m=ce,v=m.child;if((ce.flags&16)!==0){var k=m.deletions;if(k!==null){for(var b=0;b<k.length;b++){var B=k[b];for(ce=B;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:xa(8,Y,m)}var ee=Y.child;if(ee!==null)ee.return=Y,ce=ee;else for(;ce!==null;){Y=ce;var G=Y.sibling,oe=Y.return;if(ug(Y),Y===B){ce=null;break}if(G!==null){G.return=oe,ce=G;break}ce=oe}}}var he=m.alternate;if(he!==null){var pe=he.child;if(pe!==null){he.child=null;do{var lt=pe.sibling;pe.sibling=null,pe=lt}while(pe!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,ce=v;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:xa(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,ce=O;break e}ce=m.return}}var L=n.current;for(ce=L;ce!==null;){v=ce;var j=v.child;if((v.subtreeFlags&2064)!==0&&j!==null)j.return=v,ce=j;else e:for(v=L;ce!==null;){if(k=ce,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:pu(9,k)}}catch(me){st(k,k.return,me)}if(k===v){ce=null;break e}var ne=k.sibling;if(ne!==null){ne.return=k.return,ce=ne;break e}ce=k.return}}if(Fe=d,ii(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ui,n)}catch{}c=!0}return c}finally{Me=a,fn.transition=s}}return!1}function Ag(n,s,a){s=lo(a,s),s=qm(n,s,1),n=oi(n,s,1),s=zt(),n!==null&&($i(n,1,s),Kt(n,s))}function st(n,s,a){if(n.tag===3)Ag(n,n,a);else for(;s!==null;){if(s.tag===3){Ag(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){n=lo(a,n),n=$m(s,n,1),s=oi(s,n,1),n=zt(),s!==null&&($i(s,1,n),Kt(s,n));break}}s=s.return}}function xE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=zt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Rt&a)===a&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>Qe()-Gh?is(n,0):Kh|=a),Kt(n,s)}function Cg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Gr,Gr<<=1,(Gr&130023424)===0&&(Gr=4194304)));var a=zt();n=Ir(n,s),n!==null&&($i(n,s,a),Kt(n,a))}function NE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Cg(n,a)}function DE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Cg(n,a)}var Rg;Rg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||qt.current)Ht=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Ht=!1,vE(n,s,a);Ht=(n.flags&131072)!==0}else Ht=!1,et&&(s.flags&1048576)!==0&&sm(s,Jl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;du(n,s),n=s.pendingProps;var d=eo(s,Dt.current);so(s,a),d=Rh(null,s,c,n,d,a);var m=Ph();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,$t(c)?(m=!0,Gl(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,_h(s),d.updater=ru,s.stateNode=d,d._reactInternals=s,wh(s,c,n,a),s=Mh(null,s,c,!0,m,a)):(s.tag=0,et&&m&&lh(s),Bt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(du(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=bE(c),n=Sn(c,n),d){case 0:s=Lh(null,s,c,n,a);break e;case 1:s=Zm(null,s,c,n,a);break e;case 11:s=Gm(null,s,c,n,a);break e;case 14:s=Qm(null,s,c,Sn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Sn(c,d),Lh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Sn(c,d),Zm(n,s,c,d,a);case 3:e:{if(eg(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,hm(n,s),nu(s,c,null,a);var v=s.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=lo(Error(t(423)),s),s=tg(n,s,c,a,d);break e}else if(c!==d){d=lo(Error(t(424)),s),s=tg(n,s,c,a,d);break e}else for(sn=ti(s.stateNode.containerInfo.firstChild),rn=s,et=!0,In=null,a=wm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),c===d){s=Ar(n,s,a);break e}Bt(n,s,c,a)}s=s.child}return s;case 5:return Em(s),n===null&&hh(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,v=d.children,nh(c,d)?v=null:m!==null&&nh(c,m)&&(s.flags|=32),Xm(n,s),Bt(n,s,v,a),s.child;case 6:return n===null&&hh(s),null;case 13:return ng(n,s,a);case 4:return Eh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=oo(s,null,c,a):Bt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Sn(c,d),Gm(n,s,c,d,a);case 7:return Bt(n,s,s.pendingProps,a),s.child;case 8:return Bt(n,s,s.pendingProps.children,a),s.child;case 12:return Bt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,v=d.value,Ke(Zl,c._currentValue),c._currentValue=v,m!==null)if(Tn(m.value,v)){if(m.children===d.children&&!qt.current){s=Ar(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var k=m.dependencies;if(k!==null){v=m.child;for(var b=k.firstContext;b!==null;){if(b.context===c){if(m.tag===1){b=Sr(-1,a&-a),b.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var Y=B.pending;Y===null?b.next=b:(b.next=Y.next,Y.next=b),B.pending=b}}m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),gh(m.return,a,s),k.lanes|=a;break}b=b.next}}else if(m.tag===10)v=m.type===s.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,k=v.alternate,k!==null&&(k.lanes|=a),gh(v,a,s),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Bt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,so(s,a),d=hn(d),c=c(d),s.flags|=1,Bt(n,s,c,a),s.child;case 14:return c=s.type,d=Sn(c,s.pendingProps),d=Sn(c.type,d),Qm(n,s,c,d,a);case 15:return Ym(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Sn(c,d),du(n,s),s.tag=1,$t(c)?(n=!0,Gl(s)):n=!1,so(s,a),gm(s,c,d),wh(s,c,d,a),Mh(null,s,c,!0,n,a);case 19:return ig(n,s,a);case 22:return Jm(n,s,a)}throw Error(t(156,s.tag))};function Pg(n,s){return Yo(n,s)}function VE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,s,a,c){return new VE(n,s,a,c)}function nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bE(n){if(typeof n=="function")return nd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===ze)return 14}return 2}function di(n,s){var a=n.alternate;return a===null?(a=pn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Iu(n,s,a,c,d,m){var v=2;if(c=n,typeof n=="function")nd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case R:return os(a.children,d,m,s);case E:v=8,d|=8;break;case A:return n=pn(12,a,s,d|2),n.elementType=A,n.lanes=m,n;case C:return n=pn(13,a,s,d),n.elementType=C,n.lanes=m,n;case ae:return n=pn(19,a,s,d),n.elementType=ae,n.lanes=m,n;case $e:return Su(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:v=10;break e;case x:v=9;break e;case V:v=11;break e;case ze:v=14;break e;case Ze:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=pn(v,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function os(n,s,a,c){return n=pn(7,n,c,s),n.lanes=a,n}function Su(n,s,a,c){return n=pn(22,n,c,s),n.elementType=$e,n.lanes=a,n.stateNode={isHidden:!1},n}function rd(n,s,a){return n=pn(6,n,null,s),n.lanes=a,n}function id(n,s,a){return s=pn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function LE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ta(0),this.expirationTimes=ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function sd(n,s,a,c,d,m,v,k,b){return n=new LE(n,s,a,k,b),s===1?(s=1,m===!0&&(s|=8)):s=0,m=pn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(m),n}function ME(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function kg(n){if(!n)return ri;n=n._reactInternals;e:{if(wn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if($t(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if($t(a))return nm(n,a,s)}return s}function xg(n,s,a,c,d,m,v,k,b){return n=sd(a,c,!0,n,d,m,v,k,b),n.context=kg(null),a=n.current,c=zt(),d=ci(a),m=Sr(c,d),m.callback=s??null,oi(a,m,d),n.current.lanes=d,$i(n,d,c),Kt(n,c),n}function Au(n,s,a,c){var d=s.current,m=zt(),v=ci(d);return a=kg(a),s.context===null?s.context=a:s.pendingContext=a,s=Sr(m,v),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=oi(d,s,v),n!==null&&(Rn(n,d,v,m),tu(n,d,v)),v}function Cu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ng(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function od(n,s){Ng(n,s),(n=n.alternate)&&Ng(n,s)}function OE(){return null}var Dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ad(n){this._internalRoot=n}Ru.prototype.render=ad.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Au(n,s,null,null)},Ru.prototype.unmount=ad.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rs(function(){Au(null,n,null,null)}),s[vr]=null}};function Ru(n){this._internalRoot=n}Ru.prototype.unstable_scheduleHydration=function(n){if(n){var s=sa();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Zt.length&&s!==0&&s<Zt[a].priority;a++);Zt.splice(a,0,n),a===0&&Fs(n)}};function ld(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function FE(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=Cu(v);m.call(B)}}var v=xg(s,c,n,0,null,!1,!1,"",Vg);return n._reactRootContainer=v,n[vr]=v.current,ya(n.nodeType===8?n.parentNode:n),rs(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var B=Cu(b);k.call(B)}}var b=sd(n,0,!1,null,null,!1,!1,"",Vg);return n._reactRootContainer=b,n[vr]=b.current,ya(n.nodeType===8?n.parentNode:n),rs(function(){Au(s,b,a,c)}),b}function ku(n,s,a,c,d){var m=a._reactRootContainer;if(m){var v=m;if(typeof d=="function"){var k=d;d=function(){var b=Cu(v);k.call(b)}}Au(s,v,n,d)}else v=FE(a,s,n,d,c);return Cu(v)}ra=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ue(s.pendingLanes);a!==0&&(na(s,a|1),Kt(s,Qe()),(Fe&6)===0&&(ho=Qe()+500,ii()))}break;case 13:rs(function(){var c=Ir(n,1);if(c!==null){var d=zt();Rn(c,n,1,d)}}),od(n,1)}},Ms=function(n){if(n.tag===13){var s=Ir(n,134217728);if(s!==null){var a=zt();Rn(s,n,134217728,a)}od(n,134217728)}},ia=function(n){if(n.tag===13){var s=ci(n),a=Ir(n,s);if(a!==null){var c=zt();Rn(a,n,s,c)}od(n,s)}},sa=function(){return Me},oa=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},ur=function(n,s,a){switch(s){case"input":if(bi(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Wl(c);if(!d)throw Error(t(90));Bo(c),bi(c,d)}}}break;case"textarea":yl(n,a);break;case"select":s=a.value,s!=null&&_n(n,!!a.multiple,s,!1)}},wl=Zh,El=rs;var jE={usingClientEntryPoint:!1,Events:[wa,Xs,Wl,$r,Hr,Zh]},ba={findFiberByHostInstance:Qi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},UE={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Pl(n),n===null?null:n.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||OE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Ui=xu.inject(UE),Jt=xu}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE,Gt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(s))throw Error(t(200));return ME(n,s,null,a)},Gt.createRoot=function(n,s){if(!ld(n))throw Error(t(299));var a=!1,c="",d=Dg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=sd(n,1,!1,null,null,a,!1,c,d),n[vr]=s.current,ya(n.nodeType===8?n.parentNode:n),new ad(s)},Gt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Pl(s),n=n===null?null:n.stateNode,n},Gt.flushSync=function(n){return rs(n)},Gt.hydrate=function(n,s,a){if(!Pu(s))throw Error(t(200));return ku(null,n,s,!0,a)},Gt.hydrateRoot=function(n,s,a){if(!ld(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",v=Dg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=xg(s,null,n,1,a??null,d,!1,m,v),n[vr]=s.current,ya(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Ru(s)},Gt.render=function(n,s,a){if(!Pu(s))throw Error(t(200));return ku(null,n,s,!1,a)},Gt.unmountComponentAtNode=function(n){if(!Pu(n))throw Error(t(40));return n._reactRootContainer?(rs(function(){ku(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},Gt.unstable_batchedUpdates=Zh,Gt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Pu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ku(n,s,a,!1,c)},Gt.version="18.2.0-next-9e3b772b8-20220608",Gt}var Bg;function QE(){if(Bg)return hd.exports;Bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hd.exports=GE(),hd.exports}var zg;function YE(){if(zg)return Nu;zg=1;var r=QE();return Nu.createRoot=r.createRoot,Nu.hydrateRoot=r.hydrateRoot,Nu}var JE=YE();const XE=Sf(JE),ZE=()=>{};var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},e1=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,w=l>>2,S=(l&3)<<4|f>>4;let P=(f&15)<<2|y>>6,M=y&63;p||(M=64,h||(P=64)),i.push(t[w],t[S],t[P],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):e1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||S==null)throw new t1;const P=l<<2|f>>4;if(i.push(P),y!==64){const M=f<<4&240|y>>2;if(i.push(M),S!==64){const U=y<<6&192|S;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class t1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n1=function(r){const e=Q_(r);return Y_.encodeByteArray(e,!0)},Qu=function(r){return n1(r).replace(/\./g,"")},J_=function(r){try{return Y_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=()=>r1().__FIREBASE_DEFAULTS__,s1=()=>{if(typeof process>"u"||typeof qg>"u")return;const r=qg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},o1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&J_(r[1]);return e&&JSON.parse(e)},yc=()=>{try{return ZE()||i1()||s1()||o1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},X_=r=>{var e,t;return(t=(e=yc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},a1=r=>{const e=X_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Z_=()=>{var r;return(r=yc())==null?void 0:r.config},ev=r=>{var e;return(e=yc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Qu(JSON.stringify(t)),Qu(JSON.stringify(h)),""].join(".")}const qa={};function c1(){const r={prod:[],emulator:[]};for(const e of Object.keys(qa))qa[e]?r.emulator.push(e):r.prod.push(e);return r}function h1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let $g=!1;function nv(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||qa[r]===e||qa[r]||$g)return;qa[r]=e;function t(P){return`__firebase__banner__${P}`}const i="__firebase__banner",l=c1().prod.length>0;function h(){const P=document.getElementById(i);P&&P.remove()}function f(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function p(P,M){P.setAttribute("width","24"),P.setAttribute("id",M),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function y(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{$g=!0,h()},P}function w(P,M){P.setAttribute("id",M),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function S(){const P=h1(i),M=t("text"),U=document.getElementById(M)||document.createElement("span"),q=t("learnmore"),$=document.getElementById(q)||document.createElement("a"),Q=t("preprendIcon"),X=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const Z=P.element;f(Z),w($,q);const te=y();p(X,Q),Z.append(X,U,$,te),document.body.appendChild(Z)}l?(U.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function f1(){var e;const r=(e=yc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function g1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y1(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _1(){return!f1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v1(){try{return typeof indexedDB=="object"}catch{return!1}}function w1(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="FirebaseError";class Mr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=E1,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?T1(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Mr(o,f,i)}}function T1(r,e){return r.replace(I1,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const I1=/\{\$([^}]+)}/g;function S1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function hs(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Hg(l)&&Hg(h)){if(!hs(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Hg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Oa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Fa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function A1(r,e){const t=new C1(r,e);return t.subscribe.bind(t)}class C1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");R1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pd),o.error===void 0&&(o.error=pd),o.complete===void 0&&(o.complete=pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r){return r&&r._delegate?r._delegate:r}class ds{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new l1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x1(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k1(r){return r===as?void 0:r}function x1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const D1={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},V1=Ve.INFO,b1={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},L1=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=b1[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cf{constructor(e){this.name=e,this._logLevel=V1,this._logHandler=L1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const M1=(r,e)=>e.some(t=>r instanceof t);let Wg,Kg;function O1(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F1(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rv=new WeakMap,Qd=new WeakMap,iv=new WeakMap,md=new WeakMap,Rf=new WeakMap;function j1(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ei(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&rv.set(t,r)}).catch(()=>{}),Rf.set(e,r),e}function U1(r){if(Qd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Qd.set(r,e)}let Yd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||iv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function B1(r){Yd=r(Yd)}function z1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(gd(this),e,...t);return iv.set(i,e.sort?e.sort():[e]),Ei(i)}:F1().includes(r)?function(...e){return r.apply(gd(this),e),Ei(rv.get(this))}:function(...e){return Ei(r.apply(gd(this),e))}}function q1(r){return typeof r=="function"?z1(r):(r instanceof IDBTransaction&&U1(r),M1(r,O1())?new Proxy(r,Yd):r)}function Ei(r){if(r instanceof IDBRequest)return j1(r);if(md.has(r))return md.get(r);const e=q1(r);return e!==r&&(md.set(r,e),Rf.set(e,r)),e}const gd=r=>Rf.get(r);function $1(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ei(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Ei(h.result),p.oldVersion,p.newVersion,Ei(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const H1=["get","getKey","getAll","getAllKeys","count"],W1=["put","add","delete","clear"],yd=new Map;function Gg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=W1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||H1.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return yd.set(e,l),l}B1(r=>({...r,get:(e,t,i)=>Gg(e,t)||r.get(e,t,i),has:(e,t)=>!!Gg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function G1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",Qg="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Cf("@firebase/app"),Q1="@firebase/app-compat",Y1="@firebase/analytics-compat",J1="@firebase/analytics",X1="@firebase/app-check-compat",Z1="@firebase/app-check",eT="@firebase/auth",tT="@firebase/auth-compat",nT="@firebase/database",rT="@firebase/data-connect",iT="@firebase/database-compat",sT="@firebase/functions",oT="@firebase/functions-compat",aT="@firebase/installations",lT="@firebase/installations-compat",uT="@firebase/messaging",cT="@firebase/messaging-compat",hT="@firebase/performance",dT="@firebase/performance-compat",fT="@firebase/remote-config",pT="@firebase/remote-config-compat",mT="@firebase/storage",gT="@firebase/storage-compat",yT="@firebase/firestore",_T="@firebase/ai",vT="@firebase/firestore-compat",wT="firebase",ET="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",TT={[Jd]:"fire-core",[Q1]:"fire-core-compat",[J1]:"fire-analytics",[Y1]:"fire-analytics-compat",[Z1]:"fire-app-check",[X1]:"fire-app-check-compat",[eT]:"fire-auth",[tT]:"fire-auth-compat",[nT]:"fire-rtdb",[rT]:"fire-data-connect",[iT]:"fire-rtdb-compat",[sT]:"fire-fn",[oT]:"fire-fn-compat",[aT]:"fire-iid",[lT]:"fire-iid-compat",[uT]:"fire-fcm",[cT]:"fire-fcm-compat",[hT]:"fire-perf",[dT]:"fire-perf-compat",[fT]:"fire-rc",[pT]:"fire-rc-compat",[mT]:"fire-gcs",[gT]:"fire-gcs-compat",[yT]:"fire-fst",[vT]:"fire-fst-compat",[_T]:"fire-vertex","fire-js":"fire-js",[wT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,IT=new Map,Zd=new Map;function Yg(r,e){try{r.container.addComponent(e)}catch(t){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function So(r){const e=r.name;if(Zd.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,r);for(const t of Yu.values())Yg(t,r);for(const t of IT.values())Yg(t,r);return!0}function Pf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new sl("app","Firebase",ST);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=ET;function sv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Xd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ti.create("bad-app-name",{appName:String(o)});if(t||(t=Z_()),!t)throw Ti.create("no-options");const l=Yu.get(o);if(l){if(hs(t,l.options)&&hs(i,l.config))return l;throw Ti.create("duplicate-app",{appName:o})}const h=new N1(o);for(const p of Zd.values())h.addComponent(p);const f=new AT(t,i,h);return Yu.set(o,f),f}function ov(r=Xd){const e=Yu.get(r);if(!e&&r===Xd&&Z_())return sv();if(!e)throw Ti.create("no-app",{appName:r});return e}function Ii(r,e,t){let i=TT[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(h.join(" "));return}So(new ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firebase-heartbeat-database",RT=1,Qa="firebase-heartbeat-store";let _d=null;function av(){return _d||(_d=$1(CT,RT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Qa)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ti.create("idb-open",{originalErrorMessage:r.message})})),_d}async function PT(r){try{const t=(await av()).transaction(Qa),i=await t.objectStore(Qa).get(lv(r));return await t.done,i}catch(e){if(e instanceof Mr)Nr.warn(e.message);else{const t=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nr.warn(t.message)}}}async function Jg(r,e){try{const i=(await av()).transaction(Qa,"readwrite");await i.objectStore(Qa).put(e,lv(r)),await i.done}catch(t){if(t instanceof Mr)Nr.warn(t.message);else{const i=Ti.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Nr.warn(i.message)}}}function lv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=1024,xT=30;class NT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VT(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Xg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>xT){const h=bT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Nr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xg(),{heartbeatsToSend:i,unsentEntries:o}=DT(this._heartbeatsCache.heartbeats),l=Qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Nr.warn(t),""}}}function Xg(){return new Date().toISOString().substring(0,10)}function DT(r,e=kT){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class VT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v1()?w1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zg(r){return Qu(JSON.stringify({version:2,heartbeats:r})).length}function bT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r){So(new ds("platform-logger",e=>new K1(e),"PRIVATE")),So(new ds("heartbeat",e=>new NT(e),"PRIVATE")),Ii(Jd,Qg,r),Ii(Jd,Qg,"esm2020"),Ii("fire-js","")}LT("");var ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,uv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,E){function A(){}A.prototype=E.prototype,R.F=E.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(N,x,V){for(var C=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)C[ae-2]=arguments[ae];return E.prototype[x].apply(N,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,E,A){A||(A=0);const N=Array(16);if(typeof E=="string")for(var x=0;x<16;++x)N[x]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(x=0;x<16;++x)N[x]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=R.g[0],A=R.g[1],x=R.g[2];let V=R.g[3],C;C=E+(V^A&(x^V))+N[0]+3614090360&4294967295,E=A+(C<<7&4294967295|C>>>25),C=V+(x^E&(A^x))+N[1]+3905402710&4294967295,V=E+(C<<12&4294967295|C>>>20),C=x+(A^V&(E^A))+N[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=A+(E^x&(V^E))+N[3]+3250441966&4294967295,A=x+(C<<22&4294967295|C>>>10),C=E+(V^A&(x^V))+N[4]+4118548399&4294967295,E=A+(C<<7&4294967295|C>>>25),C=V+(x^E&(A^x))+N[5]+1200080426&4294967295,V=E+(C<<12&4294967295|C>>>20),C=x+(A^V&(E^A))+N[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=A+(E^x&(V^E))+N[7]+4249261313&4294967295,A=x+(C<<22&4294967295|C>>>10),C=E+(V^A&(x^V))+N[8]+1770035416&4294967295,E=A+(C<<7&4294967295|C>>>25),C=V+(x^E&(A^x))+N[9]+2336552879&4294967295,V=E+(C<<12&4294967295|C>>>20),C=x+(A^V&(E^A))+N[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=A+(E^x&(V^E))+N[11]+2304563134&4294967295,A=x+(C<<22&4294967295|C>>>10),C=E+(V^A&(x^V))+N[12]+1804603682&4294967295,E=A+(C<<7&4294967295|C>>>25),C=V+(x^E&(A^x))+N[13]+4254626195&4294967295,V=E+(C<<12&4294967295|C>>>20),C=x+(A^V&(E^A))+N[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=A+(E^x&(V^E))+N[15]+1236535329&4294967295,A=x+(C<<22&4294967295|C>>>10),C=E+(x^V&(A^x))+N[1]+4129170786&4294967295,E=A+(C<<5&4294967295|C>>>27),C=V+(A^x&(E^A))+N[6]+3225465664&4294967295,V=E+(C<<9&4294967295|C>>>23),C=x+(E^A&(V^E))+N[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=A+(V^E&(x^V))+N[0]+3921069994&4294967295,A=x+(C<<20&4294967295|C>>>12),C=E+(x^V&(A^x))+N[5]+3593408605&4294967295,E=A+(C<<5&4294967295|C>>>27),C=V+(A^x&(E^A))+N[10]+38016083&4294967295,V=E+(C<<9&4294967295|C>>>23),C=x+(E^A&(V^E))+N[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=A+(V^E&(x^V))+N[4]+3889429448&4294967295,A=x+(C<<20&4294967295|C>>>12),C=E+(x^V&(A^x))+N[9]+568446438&4294967295,E=A+(C<<5&4294967295|C>>>27),C=V+(A^x&(E^A))+N[14]+3275163606&4294967295,V=E+(C<<9&4294967295|C>>>23),C=x+(E^A&(V^E))+N[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=A+(V^E&(x^V))+N[8]+1163531501&4294967295,A=x+(C<<20&4294967295|C>>>12),C=E+(x^V&(A^x))+N[13]+2850285829&4294967295,E=A+(C<<5&4294967295|C>>>27),C=V+(A^x&(E^A))+N[2]+4243563512&4294967295,V=E+(C<<9&4294967295|C>>>23),C=x+(E^A&(V^E))+N[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=A+(V^E&(x^V))+N[12]+2368359562&4294967295,A=x+(C<<20&4294967295|C>>>12),C=E+(A^x^V)+N[5]+4294588738&4294967295,E=A+(C<<4&4294967295|C>>>28),C=V+(E^A^x)+N[8]+2272392833&4294967295,V=E+(C<<11&4294967295|C>>>21),C=x+(V^E^A)+N[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=A+(x^V^E)+N[14]+4259657740&4294967295,A=x+(C<<23&4294967295|C>>>9),C=E+(A^x^V)+N[1]+2763975236&4294967295,E=A+(C<<4&4294967295|C>>>28),C=V+(E^A^x)+N[4]+1272893353&4294967295,V=E+(C<<11&4294967295|C>>>21),C=x+(V^E^A)+N[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=A+(x^V^E)+N[10]+3200236656&4294967295,A=x+(C<<23&4294967295|C>>>9),C=E+(A^x^V)+N[13]+681279174&4294967295,E=A+(C<<4&4294967295|C>>>28),C=V+(E^A^x)+N[0]+3936430074&4294967295,V=E+(C<<11&4294967295|C>>>21),C=x+(V^E^A)+N[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=A+(x^V^E)+N[6]+76029189&4294967295,A=x+(C<<23&4294967295|C>>>9),C=E+(A^x^V)+N[9]+3654602809&4294967295,E=A+(C<<4&4294967295|C>>>28),C=V+(E^A^x)+N[12]+3873151461&4294967295,V=E+(C<<11&4294967295|C>>>21),C=x+(V^E^A)+N[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=A+(x^V^E)+N[2]+3299628645&4294967295,A=x+(C<<23&4294967295|C>>>9),C=E+(x^(A|~V))+N[0]+4096336452&4294967295,E=A+(C<<6&4294967295|C>>>26),C=V+(A^(E|~x))+N[7]+1126891415&4294967295,V=E+(C<<10&4294967295|C>>>22),C=x+(E^(V|~A))+N[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=A+(V^(x|~E))+N[5]+4237533241&4294967295,A=x+(C<<21&4294967295|C>>>11),C=E+(x^(A|~V))+N[12]+1700485571&4294967295,E=A+(C<<6&4294967295|C>>>26),C=V+(A^(E|~x))+N[3]+2399980690&4294967295,V=E+(C<<10&4294967295|C>>>22),C=x+(E^(V|~A))+N[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=A+(V^(x|~E))+N[1]+2240044497&4294967295,A=x+(C<<21&4294967295|C>>>11),C=E+(x^(A|~V))+N[8]+1873313359&4294967295,E=A+(C<<6&4294967295|C>>>26),C=V+(A^(E|~x))+N[15]+4264355552&4294967295,V=E+(C<<10&4294967295|C>>>22),C=x+(E^(V|~A))+N[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=A+(V^(x|~E))+N[13]+1309151649&4294967295,A=x+(C<<21&4294967295|C>>>11),C=E+(x^(A|~V))+N[4]+4149444226&4294967295,E=A+(C<<6&4294967295|C>>>26),C=V+(A^(E|~x))+N[11]+3174756917&4294967295,V=E+(C<<10&4294967295|C>>>22),C=x+(E^(V|~A))+N[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=A+(V^(x|~E))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.v=function(R,E){E===void 0&&(E=R.length);const A=E-this.blockSize,N=this.C;let x=this.h,V=0;for(;V<E;){if(x==0)for(;V<=A;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<E;)if(N[x++]=R.charCodeAt(V++),x==this.blockSize){o(this,N),x=0;break}}else for(;V<E;)if(N[x++]=R[V++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=E},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;E=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=E&255,E/=256;for(this.v(R),R=Array(16),E=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)R[E++]=this.g[A]>>>N&255;return R};function l(R,E){var A=f;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=E(R)}function h(R,E){this.h=E;const A=[];let N=!0;for(let x=R.length-1;x>=0;x--){const V=R[x]|0;N&&V==E||(A[x]=V,N=!1)}this.g=A}var f={};function p(R){return-128<=R&&R<128?l(R,function(E){return new h([E|0],E<0?-1:0)}):new h([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return $(y(-R));const E=[];let A=1;for(let N=0;R>=A;N++)E[N]=R/A|0,A*=4294967296;return new h(E,0)}function w(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return $(w(R.substring(1),E));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(E,8));let N=S;for(let V=0;V<R.length;V+=8){var x=Math.min(8,R.length-V);const C=parseInt(R.substring(V,V+x),E);x<8?(x=y(Math.pow(E,x)),N=N.j(x).add(y(C))):(N=N.j(A),N=N.add(y(C)))}return N}var S=p(0),P=p(1),M=p(16777216);r=h.prototype,r.m=function(){if(q(this))return-$(this).m();let R=0,E=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);R+=(N>=0?N:4294967296+N)*E,E*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U(this))return"0";if(q(this))return"-"+$(this).toString(R);const E=y(Math.pow(R,6));var A=this;let N="";for(;;){const x=te(A,E).g;A=Q(A,x.j(E));let V=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=x,U(A))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function U(R){if(R.h!=0)return!1;for(let E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function q(R){return R.h==-1}r.l=function(R){return R=Q(this,R),q(R)?-1:U(R)?0:1};function $(R){const E=R.g.length,A=[];for(let N=0;N<E;N++)A[N]=~R.g[N];return new h(A,~R.h).add(P)}r.abs=function(){return q(this)?$(this):this},r.add=function(R){const E=Math.max(this.g.length,R.g.length),A=[];let N=0;for(let x=0;x<=E;x++){let V=N+(this.i(x)&65535)+(R.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);N=C>>>16,V&=65535,C&=65535,A[x]=C<<16|V}return new h(A,A[A.length-1]&-2147483648?-1:0)};function Q(R,E){return R.add($(E))}r.j=function(R){if(U(this)||U(R))return S;if(q(this))return q(R)?$(this).j($(R)):$($(this).j(R));if(q(R))return $(this.j($(R)));if(this.l(M)<0&&R.l(M)<0)return y(this.m()*R.m());const E=this.g.length+R.g.length,A=[];for(var N=0;N<2*E;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<R.g.length;x++){const V=this.i(N)>>>16,C=this.i(N)&65535,ae=R.i(x)>>>16,ze=R.i(x)&65535;A[2*N+2*x]+=C*ze,X(A,2*N+2*x),A[2*N+2*x+1]+=V*ze,X(A,2*N+2*x+1),A[2*N+2*x+1]+=C*ae,X(A,2*N+2*x+1),A[2*N+2*x+2]+=V*ae,X(A,2*N+2*x+2)}for(R=0;R<E;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=E;R<2*E;R++)A[R]=0;return new h(A,0)};function X(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function Z(R,E){this.g=R,this.h=E}function te(R,E){if(U(E))throw Error("division by zero");if(U(R))return new Z(S,S);if(q(R))return E=te($(R),E),new Z($(E.g),$(E.h));if(q(E))return E=te(R,$(E)),new Z($(E.g),E.h);if(R.g.length>30){if(q(R)||q(E))throw Error("slowDivide_ only works with positive integers.");for(var A=P,N=E;N.l(R)<=0;)A=fe(A),N=fe(N);var x=J(A,1),V=J(N,1);for(N=J(N,2),A=J(A,2);!U(N);){var C=V.add(N);C.l(R)<=0&&(x=x.add(A),V=C),N=J(N,1),A=J(A,1)}return E=Q(R,x.j(E)),new Z(x,E)}for(x=S;R.l(E)>=0;){for(A=Math.max(1,Math.floor(R.m()/E.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=y(A),C=V.j(E);q(C)||C.l(R)>0;)A-=N,V=y(A),C=V.j(E);U(V)&&(V=P),x=x.add(V),R=Q(R,C)}return new Z(x,R)}r.B=function(R){return te(this,R).h},r.and=function(R){const E=Math.max(this.g.length,R.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)&R.i(N);return new h(A,this.h&R.h)},r.or=function(R){const E=Math.max(this.g.length,R.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)|R.i(N);return new h(A,this.h|R.h)},r.xor=function(R){const E=Math.max(this.g.length,R.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)^R.i(N);return new h(A,this.h^R.h)};function fe(R){const E=R.g.length+1,A=[];for(let N=0;N<E;N++)A[N]=R.i(N)<<1|R.i(N-1)>>>31;return new h(A,R.h)}function J(R,E){const A=E>>5;E%=32;const N=R.g.length-A,x=[];for(let V=0;V<N;V++)x[V]=E>0?R.i(V+A)>>>E|R.i(V+A+1)<<32-E:R.i(V+A);return new h(x,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,uv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Si=h}).apply(typeof ey<"u"?ey:typeof self<"u"?self:typeof window<"u"?window:{});var Du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cv,ja,hv,ju,ef,dv,fv,pv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Du=="object"&&Du];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],g=g(T),g!=T&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&_.push([T,g[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,_){return u.call.apply(u.bind,arguments)}function y(u,g,_){return y=p,y.apply(null,arguments)}function w(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,z){for(var re=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)re[ke-2]=arguments[ke];return g.prototype[F].apply(T,re)}}var P=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const g=u.length;if(g>0){const _=Array(g);for(let T=0;T<g;T++)_[T]=u[T];return _}return[]}function U(u,g){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const z=F.length||0;u.length=_+z;for(let re=0;re<z;re++)u[_+re]=F[re]}else u.push(F)}}class q{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function $(u){h.setTimeout(()=>{throw u},0)}function Q(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class X{constructor(){this.h=this.g=null}add(g,_){const T=Z.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Z=new q(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,J=!1,R=new X,E=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(A)}};function A(){for(var u;u=Q();){try{u.h.call(u.g)}catch(_){$(_)}var g=Z;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}J=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function ae(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}S(ae,x),ae.prototype.init=function(u,g){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function $e(u,g,_,T,F){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ze,this.da=this.fa=!1}function ie(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,g,_){for(const T in u)g.call(_,u[T],T,u)}function D(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function H(u){const g={};for(const _ in u)g[_]=u[_];return g}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(u,g){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let z=0;z<le.length;z++)_=le[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function we(u){this.src=u,this.g={},this.h=0}we.prototype.add=function(u,g,_,T,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const re=Ae(u,g,T,F);return re>-1?(g=u[re],_||(g.fa=!1)):(g=new $e(g,this.src,z,!!T,F),g.fa=_,u.push(g)),g};function Ne(u,g){const _=g.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,g,void 0),z;(z=F>=0)&&Array.prototype.splice.call(T,F,1),z&&(ie(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ae(u,g,_,T){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==g&&z.capture==!!_&&z.ha==T)return F}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),Se={};function He(u,g,_,T,F){if(Array.isArray(g)){for(let z=0;z<g.length;z++)He(u,g[z],_,T,F);return null}return _=zo(_),u&&u[ze]?u.J(g,_,f(T)?!!T.capture:!1,F):lr(u,g,_,!1,T,F)}function lr(u,g,_,T,F,z){if(!g)throw Error("Invalid event type");const re=f(F)?!!F.capture:!!F;let ke=Rs(u);if(ke||(u[Ce]=ke=new we(u)),_=ke.add(g,_,T,re,z),_.proxy)return _;if(T=Vn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)V||(F=re),F===void 0&&(F=!1),u.addEventListener(g.toString(),T,F);else if(u.attachEvent)u.attachEvent(Cs(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Vn(){function u(_){return g.call(u.src,u.listener,_)}const g=gl;return u}function Bo(u,g,_,T,F){if(Array.isArray(g))for(var z=0;z<g.length;z++)Bo(u,g[z],_,T,F);else T=f(T)?!!T.capture:!!T,_=zo(_),u&&u[ze]?(u=u.i,z=String(g).toString(),z in u.g&&(g=u.g[z],_=Ae(g,_,T,F),_>-1&&(ie(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[z],u.h--)))):u&&(u=Rs(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ae(g,_,T,F)),(_=u>-1?g[u]:null)&&Fr(_))}function Fr(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ze])Ne(g.i,u);else{var _=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(_,T,u.capture):g.detachEvent?g.detachEvent(Cs(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=Rs(g))?(Ne(_,u),_.h==0&&(_.src=null,g[Ce]=null)):ie(u)}}}function Cs(u){return u in Se?Se[u]:Se[u]="on"+u}function gl(u,g){if(u.da)u=!0;else{g=new ae(g,this);const _=u.listener,T=u.ha||u.src;u.fa&&Fr(u),u=_.call(T,g)}return u}function Rs(u){return u=u[Ce],u instanceof we?u:null}var bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function zo(u){return typeof u=="function"?u:(u[bi]||(u[bi]=function(g){return u.handleEvent(g)}),u[bi])}function ht(){N.call(this),this.i=new we(this),this.M=this,this.G=null}S(ht,N),ht.prototype[ze]=!0,ht.prototype.removeEventListener=function(u,g,_,T){Bo(this,u,g,_,T)};function ot(u,g){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var F=g;g=new x(T,u),Pe(g,F)}F=!0;let z,re;if(_)for(re=_.length-1;re>=0;re--)z=g.g=_[re],F=_n(z,T,!0,g)&&F;if(z=g.g=u,F=_n(z,T,!0,g)&&F,F=_n(z,T,!1,g)&&F,_)for(re=0;re<_.length;re++)z=g.g=_[re],F=_n(z,T,!1,g)&&F}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let T=0;T<_.length;T++)ie(_[T]);delete u.g[g],u.h--}}this.G=null},ht.prototype.J=function(u,g,_,T){return this.i.add(String(u),g,!1,_,T)},ht.prototype.K=function(u,g,_,T){return this.i.add(String(u),g,!0,_,T)};function _n(u,g,_,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let z=0;z<g.length;++z){const re=g[z];if(re&&!re.da&&re.capture==_){const ke=re.listener,at=re.ha||re.src;re.fa&&Ne(u.i,re),F=ke.call(at,T)!==!1&&F}}return F&&!T.defaultPrevented}function qo(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function $o(u){u.g=qo(()=>{u.g=null,u.i&&(u.i=!1,$o(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class yl extends N{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(u){N.call(this),this.h=u,this.g={}}S(jr,N);var Ho=[];function Ps(u){ge(u.g,function(g,_){this.g.hasOwnProperty(_)&&Fr(g)},u),u.g={}}jr.prototype.N=function(){jr.Z.N.call(this),Ps(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ur=h.JSON.stringify,_l=h.JSON.parse,Li=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Br(){}function vl(){}var zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ks(){x.call(this,"d")}S(ks,x);function Wo(){x.call(this,"c")}S(Wo,x);var vn={},xs=null;function qr(){return xs=xs||new ht}vn.Ia="serverreachability";function Ns(u){x.call(this,vn.Ia,u)}S(Ns,x);function ur(u){const g=qr();ot(g,new Ns(g))}vn.STAT_EVENT="statevent";function cr(u,g){x.call(this,vn.STAT_EVENT,u),this.stat=g}S(cr,x);function it(u){const g=qr();ot(g,new cr(g,u))}vn.Ja="timingevent";function Ko(u,g){x.call(this,vn.Ja,u),this.size=g}S(Ko,x);function $r(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function Hr(){this.g=!0}Hr.prototype.ua=function(){this.g=!1};function wl(u,g,_,T,F,z){u.info(function(){if(u.g)if(z){var re="",ke=z.split("&");for(let qe=0;qe<ke.length;qe++){var at=ke[qe].split("=");if(at.length>1){const dt=at[0];at=at[1];const nn=dt.split("_");re=nn.length>=2&&nn[1]=="type"?re+(dt+"="+at+"&"):re+(dt+"=redacted&")}}}else re=null;else re=z;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+g+`
`+_+`
`+re})}function El(u,g,_,T,F,z,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+g+`
`+_+`
`+z+" "+re})}function bn(u,g,_,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Mi(u,_)+(T?" "+T:"")})}function Tl(u,g){u.info(function(){return"TIMEOUT: "+g})}Hr.prototype.info=function(){};function Mi(u,g){if(!u.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let re=1;re<T.length;re++)T[re]=""}}}}return Ur(z)}catch{return g}}var Wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Il;function hr(){}S(hr,Br),hr.prototype.g=function(){return new XMLHttpRequest},Il=new hr;function Ln(u){return encodeURIComponent(String(u))}function Ds(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function an(u,g,_,T){this.j=u,this.i=g,this.l=_,this.S=T||1,this.V=new jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var Al={},Go={};function wn(u,g,_){u.M=1,u.A=fr(ln(g)),u.u=_,u.R=!0,Qo(u,null)}function Qo(u,g){u.F=Date.now(),Oi(u),u.B=ln(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),sa(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Sl,u.g=Ll(u.j,_?g:null,!u.u),u.P>0&&(u.O=new yl(y(u.Y,u,u.g),u.P)),g=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ho[0]=F.toString()),F=Ho);for(let z=0;z<F.length;z++){const re=He(_,F[z],T||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=u.J?H(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ur(),wl(u.i,u.v,u.B,u.l,u.S,u.u)}an.prototype.ba=function(u){u=u.target;const g=this.O;g&&zn(u)==3?g.j():this.Y(u)},an.prototype.Y=function(u){try{if(u==this.g)e:{const ke=zn(this.g),at=this.g.ya(),qe=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Vl(this.g)))){this.K||ke!=4||at==7||(at==8||qe<=0?ur(3):ur(2)),Vs(this);var g=this.g.ca();this.X=g;var _=Cl(this);if(this.o=g==200,El(this.i,this.v,this.B,this.l,this.S,ke,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var z=T;break t}}z=null}if(u=z)bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qe(this,u);else{this.o=!1,this.m=3,it(12),dr(this),Fi(this);break e}}if(this.R){u=!0;let dt;for(;!this.K&&this.C<_.length;)if(dt=Pl(this,_),dt==Go){ke==4&&(this.m=4,it(14),u=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Al){this.m=4,it(15),bn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else bn(this.i,this.l,dt,null),Qe(this,dt);if(Rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)bn(this.i,this.l,_,"[Invalid Chunked Response]"),dr(this),Fi(this);else if(_.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ki(re),re.P=!0,it(11))}}else bn(this.i,this.l,_,null),Qe(this,_);ke==4&&dr(this),this.o&&!this.K&&(ke==4?qs(this.j,this):(this.o=!1,Oi(this)))}else aa(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),dr(this),Fi(this)}}}catch{}finally{}};function Cl(u){if(!Rl(u))return u.g.la();const g=Vl(u.g);if(g==="")return"";let _="";const T=g.length,F=zn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return dr(u),Fi(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(g[z],{stream:!(F&&z==T-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Rl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Pl(u,g){var _=u.C,T=g.indexOf(`
`,_);return T==-1?Go:(_=Number(g.substring(_,T)),isNaN(_)?Al:(T+=1,T+_>g.length?Go:(g=g.slice(T,T+_),u.C=T+_,g)))}an.prototype.cancel=function(){this.K=!0,dr(this)};function Oi(u){u.T=Date.now()+u.H,Yo(u,u.H)}function Yo(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=$r(y(u.aa,u),g)}function Vs(u){u.D&&(h.clearTimeout(u.D),u.D=null)}an.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Tl(this.i,this.B),this.M!=2&&(ur(),it(17)),dr(this),this.m=2,Fi(this)):Yo(this,this.T-u)};function Fi(u){u.j.I==0||u.K||qs(u.j,u)}function dr(u){Vs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ps(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Qe(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||Xo(_.h,u))){if(!u.L&&Xo(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)zs(_),en(_);else break e;Hn(_),it(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=$r(y(_.Va,_),6e3));ji(_.h)<=1&&_.ta&&(_.ta=void 0)}else tn(_,11)}else if((u.L||_.g==u)&&zs(_),!C(g))for(F=_.Ba.g.parse(g),g=0;g<F.length;g++){let qe=F[g];const dt=qe[0];if(!(dt<=_.K))if(_.K=dt,qe=qe[1],_.I==2)if(qe[0]=="c"){_.M=qe[1],_.ba=qe[2];const nn=qe[3];nn!=null&&(_.ka=nn,_.j.info("VER="+_.ka));const _r=qe[4];_r!=null&&(_.za=_r,_.j.info("SVER="+_.za));const Wn=qe[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(T=1.5*Wn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Kn=u.g;if(Kn){const Ws=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var z=T.h;z.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ls(z,z.h),z.h=null))}if(T.G){const ca=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(T.wa=ca,Ue(T.J,T.G,ca))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var re=u;if(T.na=ua(T,T.L?T.ba:null,T.W),re.L){Ui(T.h,re);var ke=re,at=T.O;at&&(ke.H=at),ke.D&&(Vs(ke),Oi(ke)),T.g=re}else Nt(T);_.i.length>0&&yr(_)}else qe[0]!="stop"&&qe[0]!="close"||tn(_,7);else _.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?tn(_,7):Us(_):qe[0]!="noop"&&_.l&&_.l.qa(qe),_.A=0)}}ur(4)}catch{}}var Uc=class{constructor(u,g){this.g=u,this.map=g}};function bs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ji(u){return u.h?1:u.g?u.g.size:0}function Xo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ls(u,g){u.g?u.g.add(g):u.h=g}function Ui(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}bs.prototype.cancel=function(){if(this.i=Jt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return M(u.i)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,z=null;T>=0?(F=u[_].substring(0,T),z=u[_].substring(T+1)):F=u[_],g(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Mn?(this.l=u.l,Bi(this,u.j),this.o=u.o,this.g=u.g,On(this,u.u),this.h=u.h,Gr(this,oa(u.i)),this.m=u.m):u&&(g=String(u).match(kl))?(this.l=!1,Bi(this,g[1]||"",!0),this.o=zi(g[2]||""),this.g=zi(g[3]||"",!0),On(this,g[4]),this.h=zi(g[5]||"",!0),Gr(this,g[6]||"",!0),this.m=zi(g[7]||"")):(this.l=!1,this.i=new Me(null,this.l))}Mn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(qi(g,ea,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(qi(g,ea,!0),"@"),u.push(Ln(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(qi(_,_.charAt(0)=="/"?$i:ta,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",qi(_,na)),u.join("")},Mn.prototype.resolve=function(u){const g=ln(this);let _=!!u.j;_?Bi(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var T=u.h;if(_)On(g,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=g.h.lastIndexOf("/");F!=-1&&(T=g.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let re=0;re<F.length;){const ke=F[re++];ke=="."?T&&re==F.length&&z.push(""):ke==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&re==F.length&&z.push("")):(z.push(ke),T=!0)}T=z.join("/")}else T=F}return _?g.h=T:_=u.i.toString()!=="",_?Gr(g,oa(u.i)):_=!!u.m,_&&(g.m=u.m),g};function ln(u){return new Mn(u)}function Bi(u,g,_){u.j=_?zi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function On(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Gr(u,g,_){g instanceof Me?(u.i=g,Os(u.i,u.l)):(_||(g=qi(g,Bc)),u.i=new Me(g,u.l))}function Ue(u,g,_){u.i.set(g,_)}function fr(u){return Ue(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Zo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ea=/[#\/\?@]/g,ta=/[#\?:]/g,$i=/[#\?]/g,Bc=/[#\?@]/g,na=/#/g;function Me(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Fn(u){u.g||(u.g=new Map,u.h=0,u.i&&Xt(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Me.prototype,r.add=function(u,g){Fn(this),this.i=null,u=jn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ra(u,g){Fn(u),g=jn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ms(u,g){return Fn(u),g=jn(u,g),u.g.has(g)}r.forEach=function(u,g){Fn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(g,F,T,this)},this)},this)};function ia(u,g){Fn(u);let _=[];if(typeof g=="string")Ms(u,g)&&(_=_.concat(u.g.get(jn(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}r.set=function(u,g){return Fn(this),this.i=null,u=jn(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=ia(this,u),u.length>0?String(u[0]):g):g};function sa(u,g,_){ra(u,g),_.length>0&&(u.i=null,u.g.set(jn(u,g),M(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var _=g[T];const F=Ln(_);_=ia(this,_);for(let z=0;z<_.length;z++){let re=F;_[z]!==""&&(re+="="+Ln(_[z])),u.push(re)}}return this.i=u.join("&")};function oa(u){const g=new Me;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function jn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Os(u,g){g&&!u.j&&(Fn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(ra(this,T),sa(this,F,_))},u)),u.j=g}function Un(u,g){const _=new Hr;if(h.Image){const T=new Image;T.onload=w(St,_,"TestLoadImage: loaded",!0,g,T),T.onerror=w(St,_,"TestLoadImage: error",!1,g,T),T.onabort=w(St,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=w(St,_,"TestLoadImage: timeout",!1,g,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function Bn(u,g){const _=new Hr,T=new AbortController,F=setTimeout(()=>{T.abort(),St(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(F),z.ok?St(_,"TestPingServer: ok",!0,g):St(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),St(_,"TestPingServer: error",!1,g)})}function St(u,g,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function Hi(){this.g=new Li}function pr(u){this.i=u.Sb||null,this.h=u.ab||!1}S(pr,Br),pr.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(u,g){ht.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Zt,ht),r=Zt.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,En(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,En(this)),this.g&&(this.readyState=3,En(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function xl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Qr(this):En(this),this.readyState==3&&xl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Qr(this))},r.Na=function(u){this.g&&(this.response=u,Qr(this))},r.ga=function(){this.g&&Qr(this)};function Qr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,En(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function En(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nl(u){let g="";return ge(u,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function Fs(u,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Nl(_),typeof u=="string"?_!=null&&Ln(_):Ue(u,g,_))}function We(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(We,ht);var Dl=/^https?$/i,zc=["POST","PUT"];r=We.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=P(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){Yr(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(zc,g,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of _)this.g.setRequestHeader(z,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){Yr(this,z)}};function Yr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Jr(u),gr(u)}function Jr(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ot(this,"complete"),ot(this,"abort"),gr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?mr(this):this.Xa())},r.Xa=function(){mr(this)};function mr(u){if(u.h&&typeof l<"u"){if(u.v&&zn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ot(u,"readystatechange"),zn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=z===0){let re=String(u.D).match(kl)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),T=!Dl.test(re?re.toLowerCase():"")}_=T}if(_)ot(u,"complete"),ot(u,"success");else{u.o=6;try{var F=zn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Jr(u)}}finally{gr(u)}}}}function gr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||ot(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function zn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return zn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),_l(g)}};function Vl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(u){const g={};u=(u.g&&zn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var _=Ds(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=g[F]||[];g[F]=z,z.push(_)}D(g,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function js(u){this.za=0,this.i=[],this.j=new Hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qn("baseRetryDelayMs",5e3,u),this.Za=qn("retryDelaySeedMs",1e4,u),this.Ta=qn("forwardChannelMaxRetries",2,u),this.va=qn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bs(u&&u.concurrentRequestLimit),this.Ba=new Hi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=js.prototype,r.ka=8,r.I=1,r.connect=function(u,g,_,T){it(0),this.W=u,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ua(this,null,this.W),yr(this)};function Us(u){if(Bs(u),u.I==3){var g=u.V++,_=ln(u.J);if(Ue(_,"SID",u.M),Ue(_,"RID",g),Ue(_,"TYPE","terminate"),$n(u,_),g=new an(u,u.j,g),g.M=2,g.A=fr(ln(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.A,_=!0),_||(g.g=Ll(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Oi(g)}Gi(u)}function en(u){u.g&&(Ki(u),u.g.cancel(),u.g=null)}function Bs(u){en(u),u.v&&(h.clearTimeout(u.v),u.v=null),zs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function yr(u){if(!Jo(u.h)&&!u.m){u.m=!0;var g=u.Ea;fe||E(),J||(fe(),J=!0),R.add(g,u),u.D=0}}function bl(u,g){return ji(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=$r(y(u.Ea,u,g),$s(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new an(this,this.j,u);let z=this.o;if(this.U&&(z?(z=H(z),Pe(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=la(this,F,g),_=ln(this.J),Ue(_,"RID",u),Ue(_,"CVER",22),this.G&&Ue(_,"X-HTTP-Session-Id",this.G),$n(this,_),z&&(this.R?g="headers="+Ln(Nl(z))+"&"+g:this.u&&Fs(_,this.u,z)),Ls(this.h,F),this.Ra&&Ue(_,"TYPE","init"),this.S?(Ue(_,"$req",g),Ue(_,"SID","null"),F.U=!0,wn(F,_,null)):wn(F,_,g),this.I=2}}else this.I==3&&(u?Wi(this,u):this.i.length==0||Jo(this.h)||Wi(this))};function Wi(u,g){var _;g?_=g.l:_=u.V++;const T=ln(u.J);Ue(T,"SID",u.M),Ue(T,"RID",_),Ue(T,"AID",u.K),$n(u,T),u.u&&u.o&&Fs(T,u.u,u.o),_=new an(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=la(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ls(u.h,_),wn(_,T,g)}function $n(u,g){u.H&&ge(u.H,function(_,T){Ue(g,T,_)}),u.l&&ge({},function(_,T){Ue(g,T,_)})}function la(u,g,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let ke=-1;for(;;){const at=["count="+_];ke==-1?_>0?(ke=F[0].g,at.push("ofs="+ke)):ke=0:at.push("ofs="+ke);let qe=!0;for(let dt=0;dt<_;dt++){var z=F[dt].g;const nn=F[dt].map;if(z-=ke,z<0)ke=Math.max(0,F[dt].g-100),qe=!1;else try{z="req"+z+"_"||"";try{var re=nn instanceof Map?nn:Object.entries(nn);for(const[_r,Wn]of re){let Kn=Wn;f(Wn)&&(Kn=Ur(Wn)),at.push(z+_r+"="+encodeURIComponent(Kn))}}catch(_r){throw at.push(z+"type="+encodeURIComponent("_badmap")),_r}}catch{T&&T(nn)}}if(qe){re=at.join("&");break e}}re=void 0}return u=u.i.splice(0,_),g.G=u,re}function Nt(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;fe||E(),J||(fe(),J=!0),R.add(g,u),u.A=0}}function Hn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=$r(y(u.Da,u),$s(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Xr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=$r(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),en(this),Xr(this))};function Ki(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Xr(u){u.g=new an(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ln(u.na);Ue(g,"RID","rpc"),Ue(g,"SID",u.M),Ue(g,"AID",u.K),Ue(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ue(g,"TO",u.ia),Ue(g,"TYPE","xmlhttp"),$n(u,g),u.u&&u.o&&Fs(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=fr(ln(g)),_.u=null,_.R=!0,Qo(_,u)}r.Va=function(){this.C!=null&&(this.C=null,en(this),Hn(this),it(19))};function zs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function qs(u,g){var _=null;if(u.g==g){zs(u),Ki(u),u.g=null;var T=2}else if(Xo(u.h,g))_=g.G,Ui(u.h,g),T=1;else return;if(u.I!=0){if(g.o)if(T==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;T=qr(),ot(T,new Ko(T,_)),yr(u)}else Nt(u);else if(F=g.m,F==3||F==0&&g.X>0||!(T==1&&bl(u,g)||T==2&&Hn(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),F){case 1:tn(u,5);break;case 4:tn(u,10);break;case 3:tn(u,6);break;default:tn(u,2)}}}function $s(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function tn(u,g){if(u.j.info("Error code "+g),g==2){var _=y(u.bb,u),T=u.Ua;const F=!T;T=new Mn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Bi(T,"https"),fr(T),F?Un(T.toString(),_):Bn(T.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(g),Gi(u),Bs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Gi(u){if(u.I=0,u.ja=[],u.l){const g=Jt(u.h);(g.length!=0||u.i.length!=0)&&(U(u.ja,g),U(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function ua(u,g,_){var T=_ instanceof Mn?ln(_):new Mn(_);if(T.g!="")g&&(T.g=g+"."+T.g),On(T,T.u);else{var F=h.location;T=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const z=new Mn(null);T&&Bi(z,T),g&&(z.g=g),F&&On(z,F),_&&(z.h=_),T=z}return _=u.G,g=u.wa,_&&g&&Ue(T,_,g),Ue(T,"VER",u.ka),$n(u,T),T}function Ll(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new We(new pr({ab:_})):new We(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ml(){}r=Ml.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hs(){}Hs.prototype.g=function(u,g){return new At(u,g)};function At(u,g){ht.call(this),this.g=new js(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Zr(this)}S(At,ht),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Us(this.g)},At.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ur(u),u=_);g.i.push(new Uc(g.Ya++,u)),g.I==3&&yr(g)},At.prototype.N=function(){this.g.l=null,delete this.j,Us(this.g),delete this.g,At.Z.N.call(this)};function Ol(u){ks.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}S(Ol,ks);function Fl(){Wo.call(this),this.status=1}S(Fl,Wo);function Zr(u){this.g=u}S(Zr,Ml),Zr.prototype.ra=function(){ot(this.g,"a")},Zr.prototype.qa=function(u){ot(this.g,new Ol(u))},Zr.prototype.pa=function(u){ot(this.g,new Fl)},Zr.prototype.oa=function(){ot(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,pv=function(){return new Hs},fv=function(){return qr()},dv=vn,ef={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,ju=Wr,Kr.COMPLETE="complete",hv=Kr,vl.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",ht.prototype.listen=ht.prototype.J,ja=vl,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,cv=We}).apply(typeof Du<"u"?Du:typeof self<"u"?self:typeof window<"u"?window:{});const ty="@firebase/firestore",ny="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Cf("@firebase/firestore");function mo(){return fs.logLevel}function ue(r,...e){if(fs.logLevel<=Ve.DEBUG){const t=e.map(kf);fs.debug(`Firestore (${bo}): ${r}`,...t)}}function Dr(r,...e){if(fs.logLevel<=Ve.ERROR){const t=e.map(kf);fs.error(`Firestore (${bo}): ${r}`,...t)}}function Ao(r,...e){if(fs.logLevel<=Ve.WARN){const t=e.map(kf);fs.warn(`Firestore (${bo}): ${r}`,...t)}}function kf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,mv(r,i,t)}function mv(r,e,t){let i=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Dr(i),new Error(i)}function Be(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||mv(e,o,i)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ot.UNAUTHENTICATED)))}shutdown(){}}class OT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class FT{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new kr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new kr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new gv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class jT{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UT{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ot.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ry{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ry(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ry(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=zT(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function be(r,e){return r<e?-1:r>e?1:0}function tf(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return vd(o)===vd(l)?be(o,l):vd(o)?1:-1}return be(r.length,e.length)}const qT=55296,$T=57343;function vd(r){const e=r.charCodeAt(0);return e>=qT&&e<=$T}function Co(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="__name__";class Zn{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Zn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zn?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Zn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return be(e.length,t.length)}static compareSegments(e,t){const i=Zn.isNumericId(e),o=Zn.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Zn.extractNumericId(e).compare(Zn.extractNumericId(t)):tf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class Ge extends Zn{construct(e,t,i){return new Ge(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const HT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Zn{construct(e,t,i){return new kt(e,t,i)}static isValidIdentifier(e){return HT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iy}static keyField(){return new kt([iy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ge.fromString(e))}static fromName(e){return new ye(Ge.fromString(e).popFirst(5))}static empty(){return new ye(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(r,e,t){if(!t)throw new se(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function WT(r,e,t,i){if(e===!0&&i===!0)throw new se(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function sy(r){if(!ye.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function oy(r){if(ye.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _v(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function _c(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function xn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_c(r);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function KT(r,e){if(e<=0)throw new se(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function al(r,e){if(!_v(r))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=-62135596800,ly=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ly);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ay)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ly}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(al(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ay;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:gt("string",Xe._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Xe(0,0))}static max(){return new Re(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=-1;function GT(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Ci(o,ye.empty(),e)}function QT(r){return new Ci(r.readTime,r.key,Ya)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(Re.min(),ye.empty(),Ya)}static max(){return new Ci(Re.max(),ye.empty(),Ya)}}function YT(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:be(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==JT)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((w=>{h[y]=w,++f,f===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new K(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function ZT(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=-1;function wc(r){return r==null}function Ju(r){return r===0&&1/r==-1/0}function eI(r){return typeof r=="number"&&Number.isInteger(r)&&!Ju(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="";function tI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=uy(e)),e=nI(r.get(t),e);return uy(e)}function nI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case vv:t+="";break;default:t+=l}}return t}function uy(r){return r+vv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function vs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function wv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Pt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new vt(kt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ev("Invalid base64 string: "+l):l}})(e);return new xt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(r){if(Be(!!r,39018),typeof r=="string"){let e=0;const t=rI.exec(r);if(Be(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Pi(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="server_timestamp",Iv="__type__",Sv="__previous_value__",Av="__local_write_time__";function Df(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Iv])==null?void 0:i.stringValue)===Tv}function Ec(r){const e=r.mapValue.fields[Sv];return Df(e)?Ec(e):e}function Ja(r){const e=Ri(r.mapValue.fields[Av].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,i,o,l,h,f,p,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=w}}const Xu="(default)";class Xa{constructor(e,t){this.projectId=e,this.database=t||Xu}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===Xu}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="__type__",sI="__max__",bu={mapValue:{}},Rv="__vector__",Zu="value";function ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Df(r)?4:aI(r)?9007199254740991:oI(r)?10:11:Te(28295,{value:r})}function ar(r,e){if(r===e)return!0;const t=ki(r);if(t!==ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ja(r).isEqual(Ja(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ri(o.timestampValue),f=Ri(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Pi(o.bytesValue).isEqual(Pi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),f=ut(l.doubleValue);return h===f?Ju(h)===Ju(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Co(r.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(cy(h)!==cy(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!ar(h[p],f[p])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function Za(r,e){return(r.values||[]).find((t=>ar(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=ki(r),i=ki(e);if(t!==i)return be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ut(l.integerValue||l.doubleValue),p=ut(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return dy(r.timestampValue,e.timestampValue);case 4:return dy(Ja(r),Ja(e));case 5:return tf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Pi(l),p=Pi(h);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const w=be(f[y],p[y]);if(w!==0)return w}return be(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=be(ut(l.latitude),ut(h.latitude));return f!==0?f:be(ut(l.longitude),ut(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return fy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var P,M,U,q;const f=l.fields||{},p=h.fields||{},y=(P=f[Zu])==null?void 0:P.arrayValue,w=(M=p[Zu])==null?void 0:M.arrayValue,S=be(((U=y==null?void 0:y.values)==null?void 0:U.length)||0,((q=w==null?void 0:w.values)==null?void 0:q.length)||0);return S!==0?S:fy(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===bu.mapValue&&h===bu.mapValue)return 0;if(l===bu.mapValue)return 1;if(h===bu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let S=0;S<p.length&&S<w.length;++S){const P=tf(p[S],w[S]);if(P!==0)return P;const M=Ro(f[p[S]],y[w[S]]);if(M!==0)return M}return be(p.length,w.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function dy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return be(r,e);const t=Ri(r),i=Ri(e),o=be(t.seconds,i.seconds);return o!==0?o:be(t.nanos,i.nanos)}function fy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ro(t[o],i[o]);if(l)return l}return be(t.length,i.length)}function Po(r){return nf(r)}function nf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ri(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Pi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=nf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${nf(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function Uu(r){switch(ki(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ec(r);return e?16+Uu(e):16;case 5:return 2*r.stringValue.length;case 6:return Pi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Uu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return vs(i.fields,((l,h)=>{o+=l.length+Uu(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function py(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function rf(r){return!!r&&"integerValue"in r}function Vf(r){return!!r&&"arrayValue"in r}function my(r){return!!r&&"nullValue"in r}function gy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bu(r){return!!r&&"mapValue"in r}function oI(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Cv])==null?void 0:i.stringValue)===Rv}function $a(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return vs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=$a(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$a(r.arrayValue.values[t]);return e}return{...r}}function aI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(t)}setAll(e){let t=kt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=$a(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){vs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new gn($a(this.value))}}function Pv(r){const e=[];return vs(r.fields,((t,i)=>{const o=new kt([t]);if(Bu(i)){const l=Pv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ft(e,0,Re.min(),Re.min(),Re.min(),gn.empty(),0)}static newFoundDocument(e,t,i,o){return new Ft(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Re.min(),Re.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Re.min(),Re.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.position=e,this.inclusive=t}}function yy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function _y(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ar(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,t="asc"){this.field=e,this.dir=t}}function lI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{}class mt extends kv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new cI(e,t,i):t==="array-contains"?new fI(e,i):t==="in"?new pI(e,i):t==="not-in"?new mI(e,i):t==="array-contains-any"?new gI(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new hI(e,i):new dI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&ki(this.value)===ki(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends kv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nn(e,t)}matches(e){return xv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xv(r){return r.op==="and"}function Nv(r){return uI(r)&&xv(r)}function uI(r){for(const e of r.filters)if(e instanceof Nn)return!1;return!0}function sf(r){if(r instanceof mt)return r.field.canonicalString()+r.op.toString()+Po(r.value);if(Nv(r))return r.filters.map((e=>sf(e))).join(",");{const e=r.filters.map((t=>sf(t))).join(",");return`${r.op}(${e})`}}function Dv(r,e){return r instanceof mt?(function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&ar(i.value,o.value)})(r,e):r instanceof Nn?(function(i,o){return o instanceof Nn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&Dv(h,o.filters[f])),!0):!1})(r,e):void Te(19439)}function Vv(r){return r instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`})(r):r instanceof Nn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Vv).join(" ,")+"}"})(r):"Filter"}class cI extends mt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class hI extends mt{constructor(e,t){super(e,"in",t),this.keys=bv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dI extends mt{constructor(e,t){super(e,"not-in",t),this.keys=bv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class fI extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&Za(t.arrayValue,this.value)}}class pI extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Za(this.value.arrayValue,t)}}class mI extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Za(this.value.arrayValue,t)}}class gI extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Za(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function vy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new yI(r,e,t,i,o,l,h)}function bf(r){const e=xe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>sf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Po(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Po(i))).join(",")),e.Te=t}return e.Te}function Lf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!lI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Dv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_y(r.startAt,e.startAt)&&_y(r.endAt,e.endAt)}function of(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _I(r,e,t,i,o,l,h,f){return new Oo(r,e,t,i,o,l,h,f)}function Tc(r){return new Oo(r)}function wy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Lv(r){return r.collectionGroup!==null}function Ha(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new vt(kt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new el(l,i))})),t.has(kt.keyField().canonicalString())||e.Ie.push(new el(kt.keyField(),i))}return e.Ie}function er(r){const e=xe(r);return e.Ee||(e.Ee=vI(e,Ha(r))),e.Ee}function vI(r,e){if(r.limitType==="F")return vy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new el(o.field,l)}));const t=r.endAt?new ec(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ec(r.startAt.position,r.startAt.inclusive):null;return vy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function af(r,e){const t=r.filters.concat([e]);return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function tc(r,e,t){return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ic(r,e){return Lf(er(r),er(e))&&r.limitType===e.limitType}function Mv(r){return`${bf(er(r))}|lt:${r.limitType}`}function go(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Vv(o))).join(", ")}]`),wc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Po(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Po(o))).join(",")),`Target(${i})`})(er(r))}; limitType=${r.limitType})`}function Sc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ha(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,p){const y=yy(h,f,p);return h.inclusive?y<=0:y<0})(i.startAt,Ha(i),o)||i.endAt&&!(function(h,f,p){const y=yy(h,f,p);return h.inclusive?y>=0:y>0})(i.endAt,Ha(i),o))})(r,e)}function wI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Ov(r){return(e,t)=>{let i=!1;for(const o of Ha(r)){const l=EI(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function EI(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Ro(p,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new rt(ye.comparator);function Vr(){return TI}const Fv=new rt(ye.comparator);function Ua(...r){let e=Fv;for(const t of r)e=e.insert(t.key,t);return e}function jv(r){let e=Fv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ls(){return Wa()}function Uv(){return Wa()}function Wa(){return new ws((r=>r.toString()),((r,e)=>r.isEqual(e)))}const II=new rt(ye.comparator),SI=new vt(ye.comparator);function Le(...r){let e=SI;for(const t of r)e=e.add(t);return e}const AI=new vt(be);function CI(){return AI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function Bv(r){return{integerValue:""+r}}function RI(r,e){return eI(e)?Bv(e):Mf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this._=void 0}}function PI(r,e,t){return r instanceof nc?(function(o,l){const h={fields:{[Iv]:{stringValue:Tv},[Av]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Df(l)&&(l=Ec(l)),l&&(h.fields[Sv]=l),{mapValue:h}})(t,e):r instanceof tl?qv(r,e):r instanceof nl?$v(r,e):(function(o,l){const h=zv(o,l),f=Ey(h)+Ey(o.Ae);return rf(h)&&rf(o.Ae)?Bv(f):Mf(o.serializer,f)})(r,e)}function kI(r,e,t){return r instanceof tl?qv(r,e):r instanceof nl?$v(r,e):t}function zv(r,e){return r instanceof rc?(function(i){return rf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class nc extends Ac{}class tl extends Ac{constructor(e){super(),this.elements=e}}function qv(r,e){const t=Hv(e);for(const i of r.elements)t.some((o=>ar(o,i)))||t.push(i);return{arrayValue:{values:t}}}class nl extends Ac{constructor(e){super(),this.elements=e}}function $v(r,e){let t=Hv(e);for(const i of r.elements)t=t.filter((o=>!ar(o,i)));return{arrayValue:{values:t}}}class rc extends Ac{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ey(r){return ut(r.integerValue||r.doubleValue)}function Hv(r){return Vf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function xI(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof tl&&o instanceof tl||i instanceof nl&&o instanceof nl?Co(i.elements,o.elements,ar):i instanceof rc&&o instanceof rc?ar(i.Ae,o.Ae):i instanceof nc&&o instanceof nc})(r.transform,e.transform)}class NI{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Cc{}function Wv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Gv(r.key,tr.none()):new ll(r.key,r.data,tr.none());{const t=r.data,i=gn.empty();let o=new vt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Es(r.key,i,new Pn(o.toArray()),tr.none())}}function DI(r,e,t){r instanceof ll?(function(o,l,h){const f=o.value.clone(),p=Iy(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Es?(function(o,l,h){if(!zu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Iy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Kv(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ka(r,e,t,i){return r instanceof ll?(function(l,h,f,p){if(!zu(l.precondition,h))return f;const y=l.value.clone(),w=Sy(l.fieldTransforms,p,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof Es?(function(l,h,f,p){if(!zu(l.precondition,h))return f;const y=Sy(l.fieldTransforms,p,h),w=h.data;return w.setAll(Kv(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(r,e,t,i):(function(l,h,f){return zu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function VI(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=zv(i.transform,o||null);l!=null&&(t===null&&(t=gn.empty()),t.set(i.field,l))}return t||null}function Ty(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Co(i,o,((l,h)=>xI(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ll extends Cc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Es extends Cc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Iy(r,e,t){const i=new Map;Be(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,kI(h,f,t[o]))}return i}function Sy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,PI(l,h,e))}return i}class Gv extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bI extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&DI(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ka(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ka(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Uv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=Wv(h,f);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,((t,i)=>Ty(t,i)))&&Co(this.baseMutations,e.baseMutations,((t,i)=>Ty(t,i)))}}class Of{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return II})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Of(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Oe;function FI(r){switch(r){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function Qv(r){if(r===void 0)return Dr("GRPC error has no .code"),W.UNKNOWN;switch(r){case pt.OK:return W.OK;case pt.CANCELLED:return W.CANCELLED;case pt.UNKNOWN:return W.UNKNOWN;case pt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case pt.INTERNAL:return W.INTERNAL;case pt.UNAVAILABLE:return W.UNAVAILABLE;case pt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case pt.NOT_FOUND:return W.NOT_FOUND;case pt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case pt.ABORTED:return W.ABORTED;case pt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case pt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:r})}}(Oe=pt||(pt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Si([4294967295,4294967295],0);function Ay(r){const e=jI().encode(r),t=new uv;return t.update(e),new Uint8Array(t.digest())}function Cy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Si([t,i],0),new Si([o,l],0)]}class Ff{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ba(`Invalid padding: ${t}`);if(i<0)throw new Ba(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Si.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Si.fromNumber(i)));return o.compare(UI)===1&&(o=new Si([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ay(e),[i,o]=Cy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Ff(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Ay(e),[i,o]=Cy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Rc(Re.min(),o,new rt(be),Vr(),Le())}}class ul{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ul(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Yv{constructor(e,t){this.targetId=e,this.Ce=t}}class Jv{constructor(e,t,i=xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ry{constructor(){this.ve=0,this.Fe=Py(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),i=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:l})}})),new ul(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Py()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.Je=Lu(),this.He=Lu(),this.Ye=new rt(be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(of(l))if(i===0){const h=new ye(l.path);this.et(t,h,Ft.newNoDocument(h,Re.min()))}else Be(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),p=f?this.ct(f,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Pi(i).toUint8Array()}catch(p){if(p instanceof Ev)return Ao("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Ff(h,o,l)}catch(p){return Ao(p instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&of(f.target)){const p=new ye(f.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Ft.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Le();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Rc(e,t,this.Ye,this.je,i);return this.je=Vr(),this.Je=Lu(),this.He=Lu(),this.Ye=new rt(be),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ry,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vt(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vt(be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ry),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new rt(ye.comparator)}function Py(){return new rt(ye.comparator)}const zI={asc:"ASCENDING",desc:"DESCENDING"},qI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$I={and:"AND",or:"OR"};class HI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lf(r,e){return r.useProto3Json||wc(e)?e:{value:e}}function ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WI(r,e){return ic(r,e.toTimestamp())}function nr(r){return Be(!!r,49232),Re.fromTimestamp((function(t){const i=Ri(t);return new Xe(i.seconds,i.nanos)})(r))}function jf(r,e){return uf(r,e).canonicalString()}function uf(r,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Zv(r){const e=Ge.fromString(r);return Be(i0(e),10190,{key:e.toString()}),e}function cf(r,e){return jf(r.databaseId,e.path)}function wd(r,e){const t=Zv(e);if(t.get(1)!==r.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(t0(t))}function e0(r,e){return jf(r.databaseId,e)}function KI(r){const e=Zv(r);return e.length===4?Ge.emptyPath():t0(e)}function hf(r){return new Ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t0(r){return Be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ky(r,e,t){return{name:cf(r,e),fields:t.value.mapValue.fields}}function GI(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Be(w===void 0||typeof w=="string",58123),xt.fromBase64String(w||"")):(Be(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),xt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?W.UNKNOWN:Qv(y.code);return new se(w,y.message||"")})(h);t=new Jv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=wd(r,i.document.name),l=nr(i.document.updateTime),h=i.document.createTime?nr(i.document.createTime):Re.min(),f=new gn({mapValue:{fields:i.document.fields}}),p=Ft.newFoundDocument(o,l,h,f),y=i.targetIds||[],w=i.removedTargetIds||[];t=new qu(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=wd(r,i.document),l=i.readTime?nr(i.readTime):Re.min(),h=Ft.newNoDocument(o,l),f=i.removedTargetIds||[];t=new qu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=wd(r,i.document),l=i.removedTargetIds||[];t=new qu([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new OI(o,l),f=i.targetId;t=new Yv(f,h)}}return t}function QI(r,e){let t;if(e instanceof ll)t={update:ky(r,e.key,e.value)};else if(e instanceof Gv)t={delete:cf(r,e.key)};else if(e instanceof Es)t={update:ky(r,e.key,e.data),updateMask:iS(e.fieldMask)};else{if(!(e instanceof bI))return Te(16599,{Vt:e.type});t={verify:cf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof nc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof tl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof rc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:WI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function YI(r,e){return r&&r.length>0?(Be(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?nr(o.updateTime):nr(l);return h.isEqual(Re.min())&&(h=nr(l)),new NI(h,o.transformResults||[])})(t,e)))):[]}function JI(r,e){return{documents:[e0(r,e.path)]}}function XI(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=e0(r,o);const l=(function(y){if(y.length!==0)return r0(Nn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(P){return{field:yo(P.field),direction:tS(P.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=lf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function ZI(r){let e=KI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(S){const P=n0(S);return P instanceof Nn&&Nv(P)?P.getFilters():[P]})(t.where));let h=[];t.orderBy&&(h=(function(S){return S.map((P=>(function(U){return new el(_o(U.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(P)))})(t.orderBy));let f=null;t.limit&&(f=(function(S){let P;return P=typeof S=="object"?S.value:S,wc(P)?null:P})(t.limit));let p=null;t.startAt&&(p=(function(S){const P=!!S.before,M=S.values||[];return new ec(M,P)})(t.startAt));let y=null;return t.endAt&&(y=(function(S){const P=!S.before,M=S.values||[];return new ec(M,P)})(t.endAt)),_I(e,o,h,l,f,"F",p,y)}function eS(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_o(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=_o(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_o(t.unaryFilter.field);return mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=_o(t.unaryFilter.field);return mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return mt.create(_o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Nn.create(t.compositeFilter.filters.map((i=>n0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function tS(r){return zI[r]}function nS(r){return qI[r]}function rS(r){return $I[r]}function yo(r){return{fieldPath:r.canonicalString()}}function _o(r){return kt.fromServerFormat(r.fieldPath)}function r0(r){return r instanceof mt?(function(t){if(t.op==="=="){if(gy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(my(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(my(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:nS(t.op),value:t.value}}})(r):r instanceof Nn?(function(t){const i=t.getFilters().map((o=>r0(o)));return i.length===1?i[0]:{compositeFilter:{op:rS(t.op),filters:i}}})(r):Te(54877,{filter:r})}function iS(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t,i,o,l=Re.min(),h=Re.min(),f=xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.yt=e}}function oS(r){const e=ZI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.Cn=new lS}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Ci.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class lS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new vt(Ge.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new vt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s0=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(s0,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ko(0)}static cr(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LruGarbageCollector",uS=1048576;function Dy([r,e],[t,i]){const o=be(r,t);return o===0?be(e,i):o}class cS{constructor(e){this.Ir=e,this.buffer=new vt(Dy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Dy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Ny,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mo(t)?ue(Ny,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.Vr(3e5)}))}}class dS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(vc.ce);const i=new cS(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(xy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(i=S,f=Date.now(),this.removeTargets(e,i,t)))).next((S=>(l=S,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(y=Date.now(),mo()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S}))))}}function fS(r,e){return new dS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.changes=new ws((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ka(i.mutation,o,Pn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=ls();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ua();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ls();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Vr();const h=Wa(),f=(function(){return Wa()})();return t.forEach(((p,y)=>{const w=i.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Es)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Ka(w.mutation,y,w.mutation.getFieldMask(),Xe.now())):h.set(y.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new mS(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Wa();let o=new rt(((h,f)=>h-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let w=i.get(p)||Pn.empty();w=f.applyToLocalView(y,w),i.set(p,w);const S=(o.get(f.batchId)||Le()).add(p);o=o.insert(f.batchId,S)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,w=p.value,S=Uv();w.forEach((P=>{if(!l.has(P)){const M=Wv(t.get(P),i.get(P));M!==null&&S.set(P,M),l=l.add(P)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,S))}return K.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(ls());let f=Ya,p=l;return h.next((y=>K.forEach(y,((w,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(w)?K.resolve():this.remoteDocumentCache.getEntry(e,w).next((P=>{p=p.insert(w,P)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Le()))).next((w=>({batchId:f,changes:jv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=Ua();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ua();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(p=>{const y=(function(S,P){return new Oo(P,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((w=>{w.forEach(((S,P)=>{h=h.insert(S,P)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Ft.newInvalidDocument(w)))}));let f=Ua();return h.forEach(((p,y)=>{const w=l.get(p);w!==void 0&&Ka(w.mutation,y,Pn.empty(),Xe.now()),Sc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:oS(o.bundledQuery),readTime:nr(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.overlays=new rt(ye.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ls();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=ls(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new rt(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=l.get(y.largestBatchId);w===null&&(w=ls(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=ls(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return K.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new MI(t,i));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.Qr=new vt(It.$r),this.Ur=new vt(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new It(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new It(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new Ge([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Ge([])),i=new It(t,e),o=new It(t,e+1);let l=Le();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vt(It.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new LI(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new It(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Nf:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vt(be);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new It(new ye(l),0);let f=new vt(be);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Yr)),!0)}),h),K.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new It(t,0),o=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.ri=e,this.docs=(function(){return new rt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let i=Vr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Vr();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||YT(QT(w),i)<=0||(o.has(w.key)||Sc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new TS(this)}getSize(e){return K.resolve(this.size)}}class TS extends pS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.persistence=e,this.si=new ws((t=>bf(t)),Lf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Uf,this.targetCount=0,this.ai=ko.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.ui={},this.overlays={},this.ci=new vc(0),this.li=!1,this.li=!0,this.hi=new vS,this.referenceDelegate=e(this),this.Pi=new IS(this),this.indexManager=new aS,this.remoteDocumentCache=(function(o){return new ES(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new sS(t),this.Ii=new yS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _S,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new wS(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new SS(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class SS extends XT{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Ri=new Uf,this.Vi=null}static mi(e){return new Bf(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const o=ye.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sc{constructor(e,t){this.persistence=e,this.pi=new ws((i=>tI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=fS(this,t)}static mi(e,t){return new sc(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uu(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new zf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _1()?8:ZT(jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new AS;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(mo()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(mo()<=Ve.DEBUG&&ue("QueryEngine","Query:",go(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(mo()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):K.resolve())}ys(e,t){if(wy(t))return K.resolve(null);let i=er(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=tc(t,null,"F"),i=er(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(t,f);return this.Cs(t,y,h,p.readTime)?this.ys(e,tc(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,i,o){return wy(t)||o.isEqual(Re.min())?K.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?K.resolve(null):(mo()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(t)),this.vs(e,h,t,GT(o,Ya)).next((f=>f)))}))}Ds(e,t){let i=new vt(Ov(e));return t.forEach(((o,l)=>{Sc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return mo()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",go(t)),this.ps.getDocumentsMatchingQuery(e,t,Ci.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="LocalStore",RS=3e8;class PS{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new rt(be),this.xs=new ws((l=>bf(l)),Lf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kS(r,e,t,i){return new PS(r,e,t,i)}async function a0(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let p=Le();for(const y of o){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function xS(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,w){const S=y.batch,P=S.keys();let M=K.resolve();return P.forEach((U=>{M=M.next((()=>w.getEntry(p,U))).next((q=>{const $=y.docVersions.get(U);Be($!==null,48541),q.version.compareTo($)<0&&(S.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(p,S)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Le();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function l0(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function NS(r,e){const t=xe(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,S)=>{const P=o.get(S);if(!P)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,S))));let M=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?M=M.withResumeToken(xt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,i)),o=o.insert(S,M),(function(q,$,Q){return q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=RS?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(P,M,w)&&f.push(t.Pi.updateTargetData(l,M))}));let p=Vr(),y=Le();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(DS(l,h,e.documentUpdates).next((w=>{p=w.ks,y=w.qs}))),!i.isEqual(Re.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(w)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function DS(r,e,t){let i=Le(),o=Le();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Vr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):ue(qf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function VS(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Nf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function bS(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new wi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function df(r,e,t){const i=xe(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Mo(h))throw h;ue(qf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Vy(r,e,t){const i=xe(r);let o=Re.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,w){const S=xe(p),P=S.xs.get(w);return P!==void 0?K.resolve(S.Ms.get(P)):S.Pi.getTargetData(y,w)})(i,h,er(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?l:Le()))).next((f=>(LS(i,wI(e),f),{documents:f,Qs:l})))))}function LS(r,e,t){let i=r.Os.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class by{constructor(){this.activeTargetIds=CI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MS{constructor(){this.Mo=new by,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new by,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="ConnectivityMonitor";class My{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Ly,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Ly,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu=null;function ff(){return Mu===null?Mu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mu++,"0x"+Mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="RestConnection",FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Xu?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=ff(),f=this.zo(e,t.toUriEncodedString());ue(Ed,`Sending RPC '${e}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(f),w=Do(y);return this.Jo(e,f,p,i,w).then((S=>(ue(Ed,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw Ao(Ed,`RPC '${e}' ${h} failed with error: `,S,"url: ",f,"request:",i),S}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=FS[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class BS extends jS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=ff();return new Promise(((f,p)=>{const y=new cv;y.setWithCredentials(!0),y.listenOnce(hv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ju.NO_ERROR:const S=y.getResponseJson();ue(Mt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),f(S);break;case ju.TIMEOUT:ue(Mt,`RPC '${e}' ${h} timed out`),p(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const P=y.getStatus();if(ue(Mt,`RPC '${e}' ${h} failed with status:`,P,"response text:",y.getResponseText()),P>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const U=M==null?void 0:M.error;if(U&&U.status&&U.message){const q=(function(Q){const X=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(X)>=0?X:W.UNKNOWN})(U.status);p(new se(q,U.message))}else p(new se(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new se(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(Mt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ue(Mt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=ff(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=pv(),f=fv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const w=l.join("");ue(Mt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const S=h.createWebChannel(w,p);this.I_(S);let P=!1,M=!1;const U=new US({Yo:$=>{M?ue(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(P||(ue(Mt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),P=!0),ue(Mt,`RPC '${e}' stream ${o} sending:`,$),S.send($))},Zo:()=>S.close()}),q=($,Q,X)=>{$.listen(Q,(Z=>{try{X(Z)}catch(te){setTimeout((()=>{throw te}),0)}}))};return q(S,ja.EventType.OPEN,(()=>{M||(ue(Mt,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),q(S,ja.EventType.CLOSE,(()=>{M||(M=!0,ue(Mt,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(S))})),q(S,ja.EventType.ERROR,($=>{M||(M=!0,Ao(Mt,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),U.a_(new se(W.UNAVAILABLE,"The operation could not be completed")))})),q(S,ja.EventType.MESSAGE,($=>{var Q;if(!M){const X=$.data[0];Be(!!X,16349);const Z=X,te=(Z==null?void 0:Z.error)||((Q=Z[0])==null?void 0:Q.error);if(te){ue(Mt,`RPC '${e}' stream ${o} received error:`,te);const fe=te.status;let J=(function(A){const N=pt[A];if(N!==void 0)return Qv(N)})(fe),R=te.message;J===void 0&&(J=W.INTERNAL,R="Unknown error status: "+fe+" with message "+te.message),M=!0,U.a_(new se(J,R)),S.close()}else ue(Mt,`RPC '${e}' stream ${o} received:`,X),U.u_(X)}})),q(f,dv.STAT_EVENT,($=>{$.stat===ef.PROXY?ue(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===ef.NOPROXY&&ue(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r){return new HI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="PersistentStream";class c0{constructor(e,t,i,o,l,h,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new u0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new se(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Oy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(Oy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zS extends c0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GI(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?nr(h.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=hf(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=of(p)?{documents:JI(l,p)}:{query:XI(l,p).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Xv(l,h.resumeToken);const y=lf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Re.min())>0){f.readTime=ic(l,h.snapshotVersion.toTimestamp());const y=lf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=eS(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=hf(this.serializer),t.removeTarget=e,this.q_(t)}}class qS extends c0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YI(e.writeResults,e.commitTime),i=nr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>QI(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{}class HS extends $S{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,uf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(W.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,uf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new se(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class KS{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Ts(this)&&(ue(ps,"Restarting streams for network reachability change."),await(async function(p){const y=xe(p);y.Ea.add(4),await cl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await kc(y)})(this))}))})),this.Ra=new WS(i,o)}}async function kc(r){if(Ts(r))for(const e of r.da)await e(!0)}async function cl(r){for(const e of r.da)await e(!1)}function h0(r,e){const t=xe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kf(t)?Wf(t):Fo(t).O_()&&Hf(t,e))}function $f(r,e){const t=xe(r),i=Fo(t);t.Ia.delete(e),i.O_()&&d0(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ts(t)&&t.Ra.set("Unknown"))}function Hf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(r).Y_(e)}function d0(r,e){r.Va.Ue(e),Fo(r).Z_(e)}function Wf(r){r.Va=new BI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fo(r).start(),r.Ra.ua()}function Kf(r){return Ts(r)&&!Fo(r).x_()&&r.Ia.size>0}function Ts(r){return xe(r).Ea.size===0}function f0(r){r.Va=void 0}async function GS(r){r.Ra.set("Online")}async function QS(r){r.Ia.forEach(((e,t)=>{Hf(r,e)}))}async function YS(r,e){f0(r),Kf(r)?(r.Ra.ha(e),Wf(r)):r.Ra.set("Unknown")}async function JS(r,e,t){if(r.Ra.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(i){ue(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await oc(r,i)}else if(e instanceof qu?r.Va.Ze(e):e instanceof Yv?r.Va.st(e):r.Va.tt(e),!t.isEqual(Re.min()))try{const i=await l0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const w=l.Ia.get(p);if(!w)return;l.Ia.set(p,w.withResumeToken(xt.EMPTY_BYTE_STRING,w.snapshotVersion)),d0(l,p);const S=new wi(w.target,p,y,w.sequenceNumber);Hf(l,S)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ue(ps,"Failed to raise snapshot:",i),await oc(r,i)}}async function oc(r,e,t){if(!Mo(e))throw e;r.Ea.add(1),await cl(r),r.Ra.set("Offline"),t||(t=()=>l0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(ps,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await kc(r)}))}function p0(r,e){return e().catch((t=>oc(r,t,e)))}async function xc(r){const e=xe(r),t=xi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nf;for(;XS(e);)try{const o=await VS(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,ZS(e,o)}catch(o){await oc(e,o)}m0(e)&&g0(e)}function XS(r){return Ts(r)&&r.Ta.length<10}function ZS(r,e){r.Ta.push(e);const t=xi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function m0(r){return Ts(r)&&!xi(r).x_()&&r.Ta.length>0}function g0(r){xi(r).start()}async function eA(r){xi(r).ra()}async function tA(r){const e=xi(r);for(const t of r.Ta)e.ea(t.mutations)}async function nA(r,e,t){const i=r.Ta.shift(),o=Of.from(i,e,t);await p0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await xc(r)}async function rA(r,e){e&&xi(r).X_&&await(async function(i,o){if((function(h){return FI(h)&&h!==W.ABORTED})(o.code)){const l=i.Ta.shift();xi(i).B_(),await p0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await xc(i)}})(r,e),m0(r)&&g0(r)}async function Fy(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),ue(ps,"RemoteStore received new credentials");const i=Ts(t);t.Ea.add(3),await cl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kc(t)}async function iA(r,e){const t=xe(r);e?(t.Ea.delete(2),await kc(t)):e||(t.Ea.add(2),await cl(t),t.Ra.set("Unknown"))}function Fo(r){return r.ma||(r.ma=(function(t,i,o){const l=xe(t);return l.sa(),new zS(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:GS.bind(null,r),t_:QS.bind(null,r),r_:YS.bind(null,r),H_:JS.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Kf(r)?Wf(r):r.Ra.set("Unknown")):(await r.ma.stop(),f0(r))}))),r.ma}function xi(r){return r.fa||(r.fa=(function(t,i,o){const l=xe(t);return l.sa(),new qS(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eA.bind(null,r),r_:rA.bind(null,r),ta:tA.bind(null,r),na:nA.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await xc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(ps,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Gf(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),Mo(r))return new se(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ua(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.ga=new rt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class xo{constructor(e,t,i,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new xo(e,t,wo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oA{constructor(){this.queries=Uy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=xe(t),l=o.queries;o.queries=Uy(),l.forEach(((h,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new se(W.ABORTED,"Firestore shutting down"))}}function Uy(){return new ws((r=>Mv(r)),Ic)}async function Yf(r,e){const t=xe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new sA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Qf(h,`Initialization of query '${go(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xf(t)}async function Jf(r,e){const t=xe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function aA(r,e){const t=xe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&Xf(t)}function lA(r,e,t){const i=xe(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Xf(r){r.Ca.forEach((e=>{e.next()}))}var pf,By;(By=pf||(pf={})).Ma="default",By.Cache="cache";class Zf{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.key=e}}class _0{constructor(e){this.key=e}}class uA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=Ov(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new jy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,S)=>{const P=o.get(w),M=Sc(this.query,S)?S:null,U=!!P&&this.mutatedKeys.has(P.key),q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let $=!1;P&&M?P.data.isEqual(M.data)?U!==q&&(i.track({type:3,doc:M}),$=!0):this.su(P,M)||(i.track({type:2,doc:M}),$=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(f=!0)):!P&&M?(i.track({type:0,doc:M}),$=!0):P&&!M&&(i.track({type:1,doc:P}),$=!0,(p||y)&&(f=!0)),$&&(M?(h=h.add(M),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,S)=>(function(M,U){const q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:$})}};return q(M)-q(U)})(w.type,S.type)||this.eu(w.doc,S.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new xo(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new _0(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new y0(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ep="SyncEngine";class cA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class hA{constructor(e){this.key=e,this.hu=!1}}class dA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ws((f=>Mv(f)),Ic),this.Iu=new Map,this.Eu=new Set,this.du=new rt(ye.comparator),this.Au=new Map,this.Ru=new Uf,this.Vu={},this.mu=new Map,this.fu=ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fA(r,e,t=!0){const i=S0(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await v0(i,e,t,!0),o}async function pA(r,e){const t=S0(r);await v0(t,e,!0,!1)}async function v0(r,e,t,i){const o=await bS(r.localStore,er(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await mA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&h0(r.remoteStore,o),f}async function mA(r,e,t,i,o){r.pu=(S,P,M)=>(async function(q,$,Q,X){let Z=$.view.ru(Q);Z.Cs&&(Z=await Vy(q.localStore,$.query,!1).then((({documents:R})=>$.view.ru(R,Z))));const te=X&&X.targetChanges.get($.targetId),fe=X&&X.targetMismatches.get($.targetId)!=null,J=$.view.applyChanges(Z,q.isPrimaryClient,te,fe);return qy(q,$.targetId,J.au),J.snapshot})(r,S,P,M);const l=await Vy(r.localStore,e,!0),h=new uA(e,l.Qs),f=h.ru(l.documents),p=ul.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);qy(r,t,y.au);const w=new cA(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function gA(r,e,t){const i=xe(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Ic(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await df(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&$f(i.remoteStore,o.targetId),mf(i,o.targetId)})).catch(Lo)):(mf(i,o.targetId),await df(i.localStore,o.targetId,!0))}async function yA(r,e){const t=xe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$f(t.remoteStore,i.targetId))}async function _A(r,e,t){const i=AA(r);try{const o=await(function(h,f){const p=xe(h),y=Xe.now(),w=f.reduce(((M,U)=>M.add(U.key)),Le());let S,P;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let U=Vr(),q=Le();return p.Ns.getEntries(M,w).next(($=>{U=$,U.forEach(((Q,X)=>{X.isValidDocument()||(q=q.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,U))).next(($=>{S=$;const Q=[];for(const X of f){const Z=VI(X,S.get(X.key).overlayedDocument);Z!=null&&Q.push(new Es(X.key,Z,Pv(Z.value.mapValue),tr.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,Q,f)})).next(($=>{P=$;const Q=$.applyToLocalDocumentSet(S,q);return p.documentOverlayCache.saveOverlays(M,$.batchId,Q)}))})).then((()=>({batchId:P.batchId,changes:jv(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new rt(be)),y=y.insert(f,p),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await hl(i,o.changes),await xc(i.remoteStore)}catch(o){const l=Qf(o,"Failed to persist write");t.reject(l)}}async function w0(r,e){const t=xe(r);try{const i=await NS(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Be(h.hu,14607):o.removedDocuments.size>0&&(Be(h.hu,42227),h.hu=!1))})),await hl(t,i,e)}catch(i){await Lo(i)}}function zy(r,e,t){const i=xe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=xe(h);p.onlineState=f;let y=!1;p.queries.forEach(((w,S)=>{for(const P of S.Sa)P.va(f)&&(y=!0)})),y&&Xf(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vA(r,e,t){const i=xe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new rt(ye.comparator);h=h.insert(l,Ft.newNoDocument(l,Re.min()));const f=Le().add(l),p=new Rc(Re.min(),new Map,new rt(be),h,f);await w0(i,p),i.du=i.du.remove(l),i.Au.delete(e),tp(i)}else await df(i.localStore,e,!1).then((()=>mf(i,e,t))).catch(Lo)}async function wA(r,e){const t=xe(r),i=e.batch.batchId;try{const o=await xS(t.localStore,e);T0(t,i,null),E0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await hl(t,o)}catch(o){await Lo(o)}}async function EA(r,e,t){const i=xe(r);try{const o=await(function(h,f){const p=xe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return p.mutationQueue.lookupMutationBatch(y,f).next((S=>(Be(S!==null,37113),w=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>p.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);T0(i,e,t),E0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await hl(i,o)}catch(o){await Lo(o)}}function E0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function T0(r,e,t){const i=xe(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function mf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||I0(r,i)}))}function I0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&($f(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),tp(r))}function qy(r,e,t){for(const i of t)i instanceof y0?(r.Ru.addReference(i.key,e),TA(r,i)):i instanceof _0?(ue(ep,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||I0(r,i.key)):Te(19791,{wu:i})}function TA(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ue(ep,"New document in limbo: "+t),r.Eu.add(i),tp(r))}function tp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Ge.fromString(e)),i=r.fu.next();r.Au.set(i,new hA(t)),r.du=r.du.insert(t,i),h0(r.remoteStore,new wi(er(Tc(t.path)),i,"TargetPurposeLimboResolution",vc.ce))}}async function hl(r,e,t){const i=xe(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{h.push(i.pu(p,e,t).then((y=>{var w;if((y||t)&&i.isPrimaryClient){const S=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(y){o.push(y);const S=zf.As(p.targetId,y);l.push(S)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(p,y){const w=xe(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>K.forEach(y,(P=>K.forEach(P.Es,(M=>w.persistence.referenceDelegate.addReference(S,P.targetId,M))).next((()=>K.forEach(P.ds,(M=>w.persistence.referenceDelegate.removeReference(S,P.targetId,M)))))))))}catch(S){if(!Mo(S))throw S;ue(qf,"Failed to update sequence numbers: "+S)}for(const S of y){const P=S.targetId;if(!S.fromCache){const M=w.Ms.get(P),U=M.snapshotVersion,q=M.withLastLimboFreeSnapshotVersion(U);w.Ms=w.Ms.insert(P,q)}}})(i.localStore,l))}async function IA(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){ue(ep,"User change. New user:",e.toKey());const i=await a0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new se(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hl(t,i.Ls)}}function SA(r,e){const t=xe(r),i=t.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function S0(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=w0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vA.bind(null,e),e.Pu.H_=aA.bind(null,e.eventManager),e.Pu.yu=lA.bind(null,e.eventManager),e}function AA(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EA.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kS(this.persistence,new CS,e.initialUser,this.serializer)}Cu(e){return new o0(Bf.mi,this.serializer)}Du(e){return new MS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class CA extends ac{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Be(this.persistence.referenceDelegate instanceof sc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new o0((i=>sc.mi(i,t)),this.serializer)}}class gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IA.bind(null,this.syncEngine),await iA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oA})()}createDatastore(e){const t=Pc(e.databaseInfo.databaseId),i=(function(l){return new BS(l)})(e.databaseInfo);return(function(l,h,f,p){return new HS(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new KS(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>zy(this.syncEngine,t,0)),(function(){return My.v()?new My:new OS})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,w){const S=new dA(o,l,h,f,p,y);return w&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=xe(o);ue(ps,"RemoteStore shutting down."),l.Ea.add(5),await cl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}gf.provider={build:()=>new gf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class RA{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ot.UNAUTHENTICATED,this.clientId=xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ue(Ni,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ue(Ni,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Qf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Id(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await a0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function $y(r,e){r.asyncQueue.verifyOperationInProgress();const t=await PA(r);ue(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Fy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Fy(e.remoteStore,o))),r._onlineComponents=e}async function PA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Ni,"Using user provided OfflineComponentProvider");try{await Id(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ao("Error using user provided cache. Falling back to memory cache: "+t),await Id(r,new ac)}}else ue(Ni,"Using default OfflineComponentProvider"),await Id(r,new CA(void 0));return r._offlineComponents}async function A0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Ni,"Using user provided OnlineComponentProvider"),await $y(r,r._uninitializedComponentsProvider._online)):(ue(Ni,"Using default OnlineComponentProvider"),await $y(r,new gf))),r._onlineComponents}function kA(r){return A0(r).then((e=>e.syncEngine))}async function lc(r){const e=await A0(r),t=e.eventManager;return t.onListen=fA.bind(null,e.syncEngine),t.onUnlisten=gA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yA.bind(null,e.syncEngine),t}function xA(r,e,t={}){const i=new kr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const w=new np({next:P=>{w.Nu(),h.enqueueAndForget((()=>Jf(l,S)));const M=P.docs.has(f);!M&&P.fromCache?y.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&P.fromCache&&p&&p.source==="server"?y.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(P)},error:P=>y.reject(P)}),S=new Zf(Tc(f.path),w,{includeMetadataChanges:!0,qa:!0});return Yf(l,S)})(await lc(r),r.asyncQueue,e,t,i))),i.promise}function NA(r,e,t={}){const i=new kr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const w=new np({next:P=>{w.Nu(),h.enqueueAndForget((()=>Jf(l,S))),P.fromCache&&p.source==="server"?y.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(P)},error:P=>y.reject(P)}),S=new Zf(f,w,{includeMetadataChanges:!0,qa:!0});return Yf(l,S)})(await lc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firestore.googleapis.com",Wy=!0;class Ky{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R0,this.ssl=Wy}else this.host=e.host,this.ssl=e.ssl??Wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uS)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C0(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new MT;switch(i.type){case"firstParty":return new UT(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Hy.get(t);i&&(ue("ComponentProvider","Removing Datastore"),Hy.delete(t),i.terminate())})(this),Promise.resolve()}}function DA(r,e,t,i={}){var y;r=xn(r,Nc);const o=Do(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(tv(`https://${f}`),nv("Firestore",!0)),l.host!==R0&&l.host!==f&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:i};if(!hs(p,h)&&(r._setSettings(p),i.mockUserToken)){let w,S;if(typeof i.mockUserToken=="string")w=i.mockUserToken,S=Ot.MOCK_USER;else{w=u1(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const P=i.mockUserToken.sub||i.mockUserToken.user_id;if(!P)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ot(P)}r._authCredentials=new OT(new gv(w,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class ct{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(al(t,ct._jsonSchema))return new ct(e,i||null,new ye(Ge.fromString(t.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:gt("string",ct._jsonSchemaVersion),referencePath:gt("string")};class Ai extends Or{constructor(e,t,i){super(e,t,Tc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new ye(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function br(r,e,...t){if(r=Ut(r),yv("collection","path",e),r instanceof Nc){const i=Ge.fromString(e,...t);return oy(i),new Ai(r,null,i)}{if(!(r instanceof ct||r instanceof Ai))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return oy(i),new Ai(r.firestore,null,i)}}function jo(r,e,...t){if(r=Ut(r),arguments.length===1&&(e=xf.newId()),yv("doc","path",e),r instanceof Nc){const i=Ge.fromString(e,...t);return sy(i),new ct(r,null,new ye(i))}{if(!(r instanceof ct||r instanceof Ai))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return sy(i),new ct(r.firestore,r instanceof Ai?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="AsyncQueue";class Qy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new u0(this,"async_queue_retry"),this._c=()=>{const i=Td();i&&ue(Gy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Td();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mo(e))throw e;ue(Gy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Dr("INTERNAL UNHANDLED ERROR: ",Yy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Gf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:Yy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Yy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class ms extends Nc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Qy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qy(e),this._firestoreClient=void 0,await e}}}function VA(r,e){const t=typeof r=="object"?r:ov(),i=typeof r=="string"?r:Xu,o=Pf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=a1("firestore");l&&DA(o,...l)}return o}function Dc(r){if(r._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||bA(r),r._firestoreClient}function bA(r){var i,o,l;const e=r._freezeSettings(),t=(function(f,p,y,w){return new iI(f,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,C0(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new RA(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(xt.fromBase64String(e))}catch(t){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(al(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:gt("string",yn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(al(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:gt("string",rr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(al(e,ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ir(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ir._jsonSchemaVersion="firestore/vectorValue/1.0",ir._jsonSchema={type:gt("string",ir._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=/^__.*__$/;class MA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}function k0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class ip{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(k0(this.Ac)&&LA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Pc(e)}Cc(e,t,i,o=!1){return new ip({Ac:e,methodName:t,Dc:i,path:kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sp(r){const e=r._freezeSettings(),t=Pc(r._databaseId);return new OA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function x0(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);V0("Data must be an object, but it was:",h,i);const f=N0(i,h);let p,y;if(l.merge)p=new Pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const S of l.mergeFields){const P=jA(e,S,t);if(!h.contains(P))throw new se(W.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);BA(w,P)||w.push(P)}p=new Pn(w),y=h.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=h.fieldTransforms;return new MA(new gn(f),p,y)}function FA(r,e,t,i=!1){return op(t,r.Cc(i?4:3,e))}function op(r,e){if(D0(r=Ut(r)))return V0("Unsupported field value:",e,r),N0(r,e);if(r instanceof P0)return(function(i,o){if(!k0(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let p=op(f,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Xe.fromDate(i);return{timestampValue:ic(o.serializer,l)}}if(i instanceof Xe){const l=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(o.serializer,l)}}if(i instanceof rr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yn)return{bytesValue:Xv(o.serializer,i._byteString)};if(i instanceof ct){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ir)return(function(h,f){return{mapValue:{fields:{[Cv]:{stringValue:Rv},[Zu]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Mf(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${_c(i)}`)})(r,e)}function N0(r,e){const t={};return wv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(r,((i,o)=>{const l=op(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function D0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Xe||r instanceof rr||r instanceof yn||r instanceof ct||r instanceof P0||r instanceof ir)}function V0(r,e,t){if(!D0(t)||!_v(t)){const i=_c(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function jA(r,e,t){if((e=Ut(e))instanceof rp)return e._internalPath;if(typeof e=="string")return b0(r,e);throw uc("Field path arguments must be of type string or ",r,!1,void 0,t)}const UA=new RegExp("[~\\*/\\[\\]]");function b0(r,e,t){if(e.search(UA)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new rp(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function uc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new se(W.INVALID_ARGUMENT,f+r+p)}function BA(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zA extends L0{data(){return super.data()}}function Vc(r,e){return typeof e=="string"?b0(r,e):e instanceof rp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}class lp extends ap{}function No(r,e,...t){let i=[];e instanceof ap&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof up)).length,f=l.filter((p=>p instanceof bc)).length;if(h>1||h>0&&f>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class bc extends lp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bc(e,t,i)}_apply(e){const t=this._parse(e);return O0(e._query,t),new Or(e.firestore,e.converter,af(e._query,t))}_parse(e){const t=sp(e.firestore);return(function(l,h,f,p,y,w,S){let P;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Zy(S,w);const U=[];for(const q of S)U.push(Xy(p,l,q));P={arrayValue:{values:U}}}else P=Xy(p,l,S)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Zy(S,w),P=FA(f,h,S,w==="in"||w==="not-in");return mt.create(y,w,P)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yf(r,e,t){const i=e,o=Vc("where",r);return bc._create(o,i,t)}class up extends ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)O0(h,p),h=af(h,p)})(e._query,t),new Or(e.firestore,e.converter,af(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends lp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new el(l,h)})(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new Oo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function hp(r,e="asc"){const t=e,i=Vc("orderBy",r);return cp._create(i,t)}class dp extends lp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new dp(e,t,i)}_apply(e){return new Or(e.firestore,e.converter,tc(e._query,this._limit,this._limitType))}}function Lc(r){return KT("limit",r),dp._create("limit",r,"F")}function Xy(r,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lv(e)&&t.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ge.fromString(t));if(!ye.isDocumentKey(i))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return py(r,new ye(i))}if(t instanceof ct)return py(r,t._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_c(t)}.`)}function Zy(r,e){if(!Array.isArray(r)||r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O0(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qA{convertValue(e,t="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return vs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[Zu].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ut(h.doubleValue)));return new ir(t)}convertGeoPoint(e){return new rr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ec(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const t=Ri(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ge.fromString(e);Be(i0(i),9688,{name:e});const o=new Xa(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Dr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class us extends L0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Vc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=us._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}us._jsonSchemaVersion="firestore/documentSnapshot/1.0",us._jsonSchema={type:gt("string",us._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class $u extends us{data(e={}){return super.data(e)}}class cs{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new $u(this._firestore,this._userDataWriter,i.key,i,new za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new $u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new $u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:$A(f.type),doc:p,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $A(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(r){r=xn(r,ct);const e=xn(r.firestore,ms);return xA(Dc(e),r._key).then((t=>z0(e,r,t)))}cs._jsonSchemaVersion="firestore/querySnapshot/1.0",cs._jsonSchema={type:gt("string",cs._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class fp extends qA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function cc(r){r=xn(r,Or);const e=xn(r.firestore,ms),t=Dc(e),i=new fp(e);return M0(r._query),NA(t,r._query).then((o=>new cs(e,i,r,o)))}function pp(r,e,t){r=xn(r,ct);const i=xn(r.firestore,ms),o=F0(r.converter,e,t);return B0(i,[x0(sp(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,tr.none())])}function _f(r,e){const t=xn(r.firestore,ms),i=jo(r),o=F0(r.converter,e);return B0(t,[x0(sp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,tr.exists(!1))]).then((()=>i))}function U0(r,...e){var p,y,w;r=Ut(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Jy(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Jy(e[i])){const S=e[i];e[i]=(p=S.next)==null?void 0:p.bind(S),e[i+1]=(y=S.error)==null?void 0:y.bind(S),e[i+2]=(w=S.complete)==null?void 0:w.bind(S)}let l,h,f;if(r instanceof ct)h=xn(r.firestore,ms),f=Tc(r._key.path),l={next:S=>{e[i]&&e[i](z0(h,r,S))},error:e[i+1],complete:e[i+2]};else{const S=xn(r,Or);h=xn(S.firestore,ms),f=S._query;const P=new fp(h);l={next:M=>{e[i]&&e[i](new cs(h,P,S,M))},error:e[i+1],complete:e[i+2]},M0(r._query)}return(function(P,M,U,q){const $=new np(q),Q=new Zf(M,$,U);return P.asyncQueue.enqueueAndForget((async()=>Yf(await lc(P),Q))),()=>{$.Nu(),P.asyncQueue.enqueueAndForget((async()=>Jf(await lc(P),Q)))}})(Dc(h),f,o,l)}function B0(r,e){return(function(i,o){const l=new kr;return i.asyncQueue.enqueueAndForget((async()=>_A(await kA(i),o,l))),l.promise})(Dc(r),e)}function z0(r,e,t){const i=t.docs.get(e._key),o=new fp(r);return new us(r,o,e._key,i,new za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){bo=o})(Vo),So(new ds("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new ms(new FT(i.getProvider("auth-internal")),new BT(h,i.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ii(ty,ny,e),Ii(ty,ny,"esm2020")})();var HA="firebase",WA="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(HA,WA,"app");function q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KA=q0,$0=new sl("auth","Firebase",q0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Cf("@firebase/auth");function GA(r,...e){hc.logLevel<=Ve.WARN&&hc.warn(`Auth (${Vo}): ${r}`,...e)}function Hu(r,...e){hc.logLevel<=Ve.ERROR&&hc.error(`Auth (${Vo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(r,...e){throw mp(r,...e)}function sr(r,...e){return mp(r,...e)}function H0(r,e,t){const i={...KA(),[e]:t};return new sl("auth","Firebase",i).create(e,{appName:r.name})}function xr(r){return H0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return $0.create(r,...e)}function Ee(r,e,...t){if(!r)throw mp(e,...t)}function Rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Hu(e),new Error(e)}function Lr(r,e){r||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function QA(){return e_()==="http:"||e_()==="https:"}function e_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QA()||m1()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=d1()||g1()}get(){return YA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,e){Lr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eC=new dl(3e4,6e4);function Di(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vi(r,e,t,i,o={}){return K0(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=ol({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...l};return p1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(y.credentials="include"),W0.fetch()(await G0(r,r.config.apiHost,t,f),y)})}async function K0(r,e,t){r._canInitEmulator=!1;const i={...XA,...e};try{const o=new nC(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Ou(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Ou(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Ou(r,"user-disabled",h);const w=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw H0(r,w,y);Dn(r,w)}}catch(o){if(o instanceof Mr)throw o;Dn(r,"network-request-failed",{message:String(o)})}}async function fl(r,e,t,i,o={}){const l=await Vi(r,e,t,i,o);return"mfaPendingCredential"in l&&Dn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function G0(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?gp(r.config,o):`${r.config.apiScheme}://${o}`;return ZA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function tC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(sr(this.auth,"network-request-failed")),eC.get())})}}function Ou(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=sr(r,e,i);return o.customData._tokenResponse=t,o}function t_(r){return r!==void 0&&r.enterprise!==void 0}class rC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iC(r,e){return Vi(r,"GET","/v2/recaptchaConfig",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(r,e){return Vi(r,"POST","/v1/accounts:delete",e)}async function dc(r,e){return Vi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oC(r,e=!1){const t=Ut(r),i=await t.getIdToken(e),o=yp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ga(Sd(o.auth_time)),issuedAtTime:Ga(Sd(o.iat)),expirationTime:Ga(Sd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sd(r){return Number(r)*1e3}function yp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const o=J_(t);return o?JSON.parse(o):(Hu("Failed to decode base64 JWT payload"),null)}catch(o){return Hu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function n_(r){const e=yp(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Mr&&aC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function aC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(r){var S;const e=r.auth,t=await r.getIdToken(),i=await rl(r,dc(e,{idToken:t}));Ee(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(S=o.providerUserInfo)!=null&&S.length?Q0(o.providerUserInfo):[],h=cC(r.providerData,l),f=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new wf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function uC(r){const e=Ut(r);await fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cC(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Q0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(r,e){const t=await K0(r,{},async()=>{const i=ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await G0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(p.credentials="include"),W0.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dC(r,e){return Vi(r,"POST","/v2/accounts:revokeToken",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=n_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await hC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Eo;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class kn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new lC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await rl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oC(this,e)}reload(){return uC(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await rl(this,sC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:S,emailVerified:P,isAnonymous:M,providerData:U,stsTokenManager:q}=t;Ee(S&&q,e,"internal-error");const $=Eo.fromJSON(this.name,q);Ee(typeof S=="string",e,"internal-error"),pi(i,e.name),pi(o,e.name),Ee(typeof P=="boolean",e,"internal-error"),Ee(typeof M=="boolean",e,"internal-error"),pi(l,e.name),pi(h,e.name),pi(f,e.name),pi(p,e.name),pi(y,e.name),pi(w,e.name);const Q=new kn({uid:S,auth:e,email:o,emailVerified:P,displayName:i,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:$,createdAt:y,lastLoginAt:w});return U&&Array.isArray(U)&&(Q.providerData=U.map(X=>({...X}))),p&&(Q._redirectEventId=p),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new Eo;o.updateFromServerResponse(t);const l=new kn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await fc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Q0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Eo;f.updateFromIdToken(i);const p=new kn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new wf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function Pr(r){Lr(r instanceof Function,"Expected a class definition");let e=r_.get(r);return e?(Lr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,r_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y0.type="NONE";const i_=Y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(r,e,t){return`firebase:${r}:${e}:${t}`}class To{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dc(this.auth,{idToken:e}).catch(()=>{});return t?kn._fromGetAccountInfoResponse(this.auth,t,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new To(Pr(i_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Pr(i_);const h=Wu(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let S;if(typeof w=="string"){const P=await dc(e,{idToken:w}).catch(()=>{});if(!P)break;S=await kn._fromGetAccountInfoResponse(e,P,w)}else S=kn._fromJSON(e,w);y!==l&&(f=S),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new To(l,e,i):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new To(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nw(e))return"Blackberry";if(rw(e))return"Webos";if(X0(e))return"Safari";if((e.includes("chrome/")||Z0(e))&&!e.includes("edge/"))return"Chrome";if(tw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function J0(r=jt()){return/firefox\//i.test(r)}function X0(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z0(r=jt()){return/crios\//i.test(r)}function ew(r=jt()){return/iemobile/i.test(r)}function tw(r=jt()){return/android/i.test(r)}function nw(r=jt()){return/blackberry/i.test(r)}function rw(r=jt()){return/webos/i.test(r)}function _p(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function fC(r=jt()){var e;return _p(r)&&!!((e=window.navigator)!=null&&e.standalone)}function pC(){return y1()&&document.documentMode===10}function iw(r=jt()){return _p(r)||tw(r)||rw(r)||nw(r)||/windows phone/i.test(r)||ew(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(r,e=[]){let t;switch(r){case"Browser":t=s_(jt());break;case"Worker":t=`${s_(jt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(r,e={}){return Vi(r,"GET","/v2/passwordPolicy",Di(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=6;class _C{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new mC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dc(this,{idToken:e}),i=await kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(xr(this));const t=e?Ut(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gC(this),t=new _C(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&GA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Is(r){return Ut(r)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=A1(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wC(r){Mc=r}function ow(r){return Mc.loadJS(r)}function EC(){return Mc.recaptchaEnterpriseScript}function TC(){return Mc.gapiScript}function IC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class SC{constructor(){this.enterprise=new AC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class AC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const CC="recaptcha-enterprise",aw="NO_RECAPTCHA";class RC{constructor(e){this.type=CC,this.auth=Is(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{iC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new rC(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;t_(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(aw)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SC().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&t_(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=EC();p.length!==0&&(p+=f),ow(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function a_(r,e,t,i=!1,o=!1){const l=new RC(r);let h;if(o)h=aw;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ef(r,e,t,i,o){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await a_(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await a_(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(r,e){const t=Pf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(hs(l,e??{}))return o;Dn(o,"already-initialized")}return t.initialize({options:e})}function kC(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Pr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function xC(r,e,t){const i=Is(r);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=lw(e),{host:h,port:f}=NC(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(hs(y,i.config.emulator)&&hs(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Do(h)?(tv(`${l}//${h}${p}`),nv("Auth",!0)):DC()}function lw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function NC(r){const e=lw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:l_(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:l_(h)}}}function l_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function DC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function VC(r,e){return Vi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(r,e){return fl(r,"POST","/v1/accounts:signInWithPassword",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(r,e){return fl(r,"POST","/v1/accounts:signInWithEmailLink",Di(r,e))}async function MC(r,e){return fl(r,"POST","/v1/accounts:signInWithEmailLink",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends vp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new il(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new il(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,t,"signInWithPassword",bC);case"emailLink":return LC(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,i,"signUpPassword",VC);case"emailLink":return MC(e,{idToken:t,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r,e){return fl(r,"POST","/v1/accounts:signInWithIdp",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class gs extends vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new gs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Io(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ol(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jC(r){const e=Oa(Fa(r)).link,t=e?Oa(Fa(e)).deep_link_id:null,i=Oa(Fa(r)).deep_link_id;return(i?Oa(Fa(i)).link:null)||i||t||e||r}class wp{constructor(e){const t=Oa(Fa(e)),i=t.apiKey??null,o=t.oobCode??null,l=FC(t.mode??null);Ee(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jC(e);try{return new wp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,t){return il._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=wp.parseLink(t);return Ee(i,"argument-error"),il._fromEmailAndCode(e,i.code,i.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends pl{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends pl{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends pl{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(r,e){return fl(r,"POST","/v1/accounts:signUp",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await kn._fromIdTokenResponse(e,i,o),h=u_(i);return new ys({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=u_(i);return new ys({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function u_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Mr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,pc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new pc(e,t,i,o)}}function cw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pc._fromErrorAndOperation(r,l,e,i):l})}async function BC(r,e,t=!1){const i=await rl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ys._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(r,e,t=!1){const{auth:i}=r;if(mn(i.app))return Promise.reject(xr(i));const o="reauthenticate";try{const l=await rl(r,cw(i,o,e,r),t);Ee(l.idToken,i,"internal-error");const h=yp(l.idToken);Ee(h,i,"internal-error");const{sub:f}=h;return Ee(r.uid===f,i,"user-mismatch"),ys._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Dn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(r,e,t=!1){if(mn(r.app))return Promise.reject(xr(r));const i="signIn",o=await cw(r,i,e),l=await ys._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function qC(r,e){return hw(Is(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(r){const e=Is(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $C(r,e,t){if(mn(r.app))return Promise.reject(xr(r));const i=Is(r),h=await Ef(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&dw(r),p}),f=await ys._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function HC(r,e,t){return mn(r.app)?Promise.reject(xr(r)):qC(Ut(r),Uo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dw(r),i})}function WC(r,e,t,i){return Ut(r).onIdTokenChanged(e,t,i)}function KC(r,e,t){return Ut(r).beforeAuthStateChanged(e,t)}function GC(r,e,t,i){return Ut(r).onAuthStateChanged(e,t,i)}function QC(r){return Ut(r).signOut()}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=1e3,JC=10;class pw extends fw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);pC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,JC):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},YC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pw.type="LOCAL";const XC=pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends fw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mw.type="SESSION";const gw=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await ZC(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=Ep("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){const P=S;if(P.data.eventId===y)switch(P.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(P.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function tR(r){or().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function nR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rR(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function iR(){return yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",sR=1,gc="firebaseLocalStorage",vw="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fc(r,e){return r.transaction([gc],e?"readwrite":"readonly").objectStore(gc)}function oR(){const r=indexedDB.deleteDatabase(_w);return new ml(r).toPromise()}function Tf(){const r=indexedDB.open(_w,sR);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(gc,{keyPath:vw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(gc)?e(i):(i.close(),await oR(),e(await Tf()))})})}async function c_(r,e,t){const i=Fc(r,!0).put({[vw]:e,value:t});return new ml(i).toPromise()}async function aR(r,e){const t=Fc(r,!1).get(e),i=await new ml(t).toPromise();return i===void 0?null:i.value}function h_(r,e){const t=Fc(r,!0).delete(e);return new ml(t).toPromise()}const lR=800,uR=3;class ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(iR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await nR(),!this.activeServiceWorker)return;this.sender=new eR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tf();return await c_(e,mc,"1"),await h_(e,mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>c_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>aR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>h_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Fc(o,!1).getAll();return new ml(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ww.type="LOCAL";const cR=ww;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r,e){return e?Pr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dR(r){return hw(r.auth,new Tp(r),r.bypassAuthState)}function fR(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),zC(t,new Tp(r),r.bypassAuthState)}async function pR(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),BC(t,new Tp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dR;case"linkViaPopup":case"linkViaRedirect":return pR;case"reauthViaPopup":case"reauthViaRedirect":return fR;default:Dn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new dl(2e3,1e4);class vo extends Ew{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mR.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="pendingRedirect",Ku=new Map;class yR extends Ew{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const i=await _R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _R(r,e){const t=ER(e),i=wR(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function vR(r,e){Ku.set(r._key(),e)}function wR(r){return Pr(r._redirectPersistence)}function ER(r){return Wu(gR,r.config.apiKey,r.name)}async function TR(r,e,t=!1){if(mn(r.app))return Promise.reject(xr(r));const i=Is(r),o=hR(i,e),h=await new yR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=600*1e3;class SR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Tw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IR&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Tw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(r,e={}){return Vi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function kR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await CR(r);for(const t of e)try{if(xR(t))return}catch{}Dn(r,"unauthorized-domain")}function xR(r){const e=vf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!PR.test(t))return!1;if(RR.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new dl(3e4,6e4);function f_(){const r=or().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function DR(r){return new Promise((e,t)=>{var o,l,h;function i(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),t(sr(r,"network-request-failed"))},timeout:NR.get()})}if((l=(o=or().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=or().gapi)!=null&&h.load)i();else{const f=IC("iframefcb");return or()[f]=()=>{gapi.load?i():t(sr(r,"network-request-failed"))},ow(`${TC()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Gu=null,e})}let Gu=null;function VR(r){return Gu=Gu||DR(r),Gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new dl(5e3,15e3),LR="__/auth/iframe",MR="emulator/auth/iframe",OR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jR(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gp(e,MR):`https://${r.config.authDomain}/${LR}`,i={apiKey:e.apiKey,appName:r.name,v:Vo},o=FR.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ol(i).slice(1)}`}async function UR(r){const e=await VR(r),t=or().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:jR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=sr(r,"network-request-failed"),f=or().setTimeout(()=>{l(h)},bR.get());function p(){or().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zR=500,qR=600,$R="_blank",HR="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WR(r,e,t,i=zR,o=qR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...BR,width:i.toString(),height:o.toString(),top:l,left:h},y=jt().toLowerCase();t&&(f=Z0(y)?$R:t),J0(y)&&(e=e||HR,p.scrollbars="yes");const w=Object.entries(p).reduce((P,[M,U])=>`${P}${M}=${U},`,"");if(fC(y)&&f!=="_self")return KR(e||"",f),new p_(null);const S=window.open(e||"",f,w);Ee(S,r,"popup-blocked");try{S.focus()}catch{}return new p_(S)}function KR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="__/auth/handler",QR="emulator/auth/handler",YR=encodeURIComponent("fac");async function m_(r,e,t,i,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Vo,eventId:o};if(e instanceof uw){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",S1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,S]of Object.entries({}))h[w]=S}if(e instanceof pl){const w=e.getScopes().filter(S=>S!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await r._getAppCheckToken(),y=p?`#${YR}=${encodeURIComponent(p)}`:"";return`${JR(r)}?${ol(f).slice(1)}${y}`}function JR({config:r}){return r.emulator?gp(r,QR):`https://${r.authDomain}/${GR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class XR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gw,this._completeRedirectFn=TR,this._overrideRedirectResult=vR}async _openPopup(e,t,i,o){var h;Lr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await m_(e,t,i,vf(),o);return WR(e,l,Ep())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await m_(e,t,i,vf(),o);return tR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await UR(e),i=new SR(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ad,{type:Ad},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Ad];l!==void 0&&t(!!l),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iw()||X0()||_p()}}const ZR=XR;var g_="@firebase/auth",y_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n2(r){So(new ds("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(r)},y=new vC(i,o,l,p);return kC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),So(new ds("auth-internal",e=>{const t=Is(e.getProvider("auth").getImmediate());return(i=>new e2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(g_,y_,t2(r)),Ii(g_,y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=300,i2=ev("authIdTokenMaxAge")||r2;let __=null;const s2=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>i2)return;const o=t==null?void 0:t.token;__!==o&&(__=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function o2(r=ov()){const e=Pf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=PC(r,{popupRedirectResolver:ZR,persistence:[cR,XC,gw]}),i=ev("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=s2(l.toString());KC(t,h,()=>h(t.currentUser)),WC(t,f=>h(f))}}const o=X_("auth");return o&&xC(t,`http://${o}`),t}function a2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}wC({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=sr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",a2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n2("Browser");const l2={apiKey:"AIzaSyBipNaUdqrQPLD_UF29RK8J1DOEWMFnr-I",authDomain:"smart-attendance-36076.firebaseapp.com",projectId:"smart-attendance-36076",storageBucket:"smart-attendance-36076.firebasestorage.app",messagingSenderId:"570161749271",appId:"1:570161749271:web:74221fe65ba5b94cebab52",measurementId:"G-52C5D8BRW7"},Iw=sv(l2),jc=o2(Iw),Yt=VA(Iw),u2=async(r,e)=>{const t=await HC(jc,r,e),o=(await j0(jo(Yt,"users",t.user.uid))).data();if(!o)throw new Error("No user profile found for this account.");return{uid:t.user.uid,...o}},c2=async(r,e,t,i,o,l,h)=>{const f=await $C(jc,e,t),p={email:e,name:r,role:i};i==="student"&&(p.rollNo=o||"",p.class=l||"",p.faceData=h||""),await pp(jo(Yt,"users",f.user.uid),p)},Sw=()=>QC(jc),h2=r=>GC(jc,async e=>{try{if(e){const i=(await j0(jo(Yt,"users",e.uid))).data();r(i?{uid:e.uid,...i}:null)}else r(null)}catch(t){console.error("Error fetching user data:",t),r(null)}}),d2=(r,e)=>{const t=No(br(Yt,"users",r,"attendanceHistory"),hp("timestamp","desc"),Lc(20));return U0(t,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));e(o)},i=>{console.error("Error listening to student history:",i),e([])})},f2=async()=>{const r=No(br(Yt,"activeQRs"),hp("timestamp","desc"),Lc(1)),e=await cc(r);if(e.empty)return null;const i=e.docs[0].data();return Date.now()-i.timestamp>i.duration*1e3?null:i},p2=async r=>{const e=No(br(Yt,"activeQRs"),yf("secret","==",r),Lc(1)),t=await cc(e);if(t.empty)throw new Error("Invalid or expired secret code.");const o=t.docs[0].data();if(Date.now()-o.timestamp>o.duration*1e3)throw new Error("Secret code has expired.");return o},m2=async(r,e)=>{const t=await p2(e);return g2(r,t)},g2=async(r,e)=>{const t={studentId:r.rollNo,studentName:r.name,userId:r.uid,timestamp:Date.now(),time:new Date().toLocaleString(),status:"present",distance:"N/A",subject:e.subject,class:e.class,sessionId:e.sessionId,facultyId:e.facultyId,facultyName:e.facultyName};return await _f(br(Yt,"faculty",e.facultyId,"attendanceRecords"),t),await _f(br(Yt,"users",r.uid,"attendanceHistory"),t),"Attendance marked successfully!"},y2=async(r,e,t,i,o,l,h)=>{const f=await _f(br(Yt,"sessions"),{facultyId:r,facultyName:e,subject:t,class:i,totalStudents:h||0,timestamp:Date.now()}),p="FAC_"+Math.random().toString(36).substring(2,8).toUpperCase(),y=Math.floor(1e3+Math.random()*9e3).toString(),w={secret:p,token:y,sessionId:f.id,facultyId:r,facultyName:e,subject:t,class:i,duration:o,timestamp:Date.now()};return l&&(w.location=l),await pp(jo(Yt,"activeQRs",r),w,{merge:!0}),{secret:p,token:y,sessionId:f.id}},_2=(r,e)=>pp(jo(Yt,"faculty",r),{location:e},{merge:!0}),v2=(r,e)=>{const t=No(br(Yt,"faculty",r,"attendanceRecords"),hp("timestamp","desc"),Lc(50));return U0(t,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));e(o)},i=>{console.error("Error listening to recent activity:",i),e([])})},w2=async r=>{const e=No(br(Yt,"users",r,"attendanceHistory")),i=(await cc(e)).docs.map(h=>h.data());if(i.length===0)return[];const o=i.reduce((h,f)=>{if(!f.subject||!f.class)return h;const p=`${f.subject}|${f.class}`;return h[p]||(h[p]={subject:f.subject,class:f.class,attended:0}),h[p].attended++,h},{}),l=Object.values(o).map(async h=>{const f=No(br(Yt,"sessions"),yf("subject","==",h.subject),yf("class","==",h.class)),y=(await cc(f)).size,w=y>0?Math.round(h.attended/y*100):0;return{...h,total:y,percentage:w}});return Promise.all(l)},_s=({size:r="md",className:e=""})=>{const t={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return I.jsxs("svg",{className:`animate-spin ${t[r]} text-white ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Aw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),I.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),Cw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),I.jsx("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),I.jsx("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),I.jsx("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),I.jsx("path",{d:"M21 21v.01"}),I.jsx("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),I.jsx("path",{d:"M3 12h.01"}),I.jsx("path",{d:"M12 3h.01"}),I.jsx("path",{d:"M12 16v.01"}),I.jsx("path",{d:"M16 12h.01"}),I.jsx("path",{d:"M21 12h.01"}),I.jsx("path",{d:"M12 21h.01"})]}),Ip=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),I.jsx("circle",{cx:"9",cy:"7",r:"4"}),I.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),I.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Rw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),I.jsx("polyline",{points:"16 17 21 12 16 7"}),I.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),Pw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),I.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),kw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("circle",{cx:"12",cy:"12",r:"10"}),I.jsx("polyline",{points:"12 6 12 12 16 14"})]}),E2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),xw=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),I.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),T2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),I.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),I2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),I.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),S2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),I.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),I.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),I.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),v_=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),I.jsx("circle",{cx:"12",cy:"10",r:"3"}),I.jsx("path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"})]}),A2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),I.jsx("polyline",{points:"10 17 15 12 10 7"}),I.jsx("line",{x1:"15",x2:"3",y1:"12",y2:"12"})]}),C2=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[I.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),I.jsx("circle",{cx:"9",cy:"7",r:"4"}),I.jsx("line",{x1:"19",x2:"19",y1:"8",y2:"14"}),I.jsx("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}),R2=()=>{const[r,e]=de.useState(null),[t,i]=de.useState(null),o=de.useRef(null),l=de.useCallback(async()=>{i(null);try{o.current&&o.current.getTracks().forEach(p=>p.stop());const f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});e(f),o.current=f}catch(f){console.error("Camera Error:",f),f.name==="NotAllowedError"||f.name==="PermissionDeniedError"?i("Camera access denied. Please allow camera permissions in your browser settings."):i("Could not start camera. Please ensure it is not in use by another application."),e(null),o.current=null}},[]),h=de.useCallback(()=>{o.current&&(o.current.getTracks().forEach(f=>f.stop()),e(null),o.current=null,i(null))},[]);return de.useEffect(()=>()=>{o.current&&o.current.getTracks().forEach(f=>f.stop())},[]),{stream:r,isCameraActive:!!r,error:t,startCamera:l,stopCamera:h}},w_=()=>{const[r,e]=de.useState(!1),[t,i]=de.useState(!1),[o,l]=de.useState(""),[h,f]=de.useState(""),[p,y]=de.useState(""),[w,S]=de.useState(""),[P,M]=de.useState(""),[U,q]=de.useState("student"),[$,Q]=de.useState(null),[X,Z]=de.useState(!1),[te,fe]=de.useState(""),[J,R]=de.useState("error"),[E,A]=de.useState(!1),N=de.useRef(null),x=()=>{r||e(!0)},V=D=>{N.current&&!N.current.contains(D.relatedTarget)&&e(!1)},C=()=>{r&&(i(!t),fe(""))},ae=async D=>{D.preventDefault(),fe(""),A(!0);try{if(t){if(!p||!o||!h||U==="student"&&(!w||!P))throw new Error("Please fill all required fields.");if(U==="student"&&!$)throw new Error("Face registration is required for students.");await c2(p,o,h,U,w,P,$),fe("Account created successfully! Please sign in."),R("success"),i(!1)}else await u2(o,h)}catch(H){let le=H.message||"An unexpected error occurred.";if(H.code)switch(H.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":le="Invalid email or password.";break;case"auth/email-already-in-use":le="This email is already registered. Please sign in.";break;case"auth/weak-password":le="Password must be at least 6 characters.";break}fe(le),R("error")}finally{A(!1)}};de.useEffect(()=>{l(""),f(""),y(""),S(""),M(""),Q(null),Z(!1)},[t]);const ze=()=>{const[D,H]=de.useState(!1),[le,Pe]=de.useState(!1),we=de.useRef(null),{stream:Ne,isCameraActive:Ae,error:Ce,startCamera:Se,stopCamera:He}=R2();de.useEffect(()=>{we.current&&(Ne?(we.current.srcObject=Ne,we.current.play().catch(Vn=>console.error("Video play failed:",Vn))):we.current.srcObject=null)},[Ne]),de.useEffect(()=>{Ce&&(fe(Ce),R("error"))},[Ce]);const lr=async()=>{Ae&&(H(!0),Pe(!0),setTimeout(()=>Pe(!1),300),await new Promise(Vn=>setTimeout(Vn,1500)),Q(`face_data_${Date.now()}`),fe("Face registered successfully!"),R("success"),He(),H(!1))};return I.jsxs("div",{className:"space-y-3 pt-2",children:[I.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider text-white/70",children:"Face Registration"}),$?I.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl",children:[I.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[I.jsx(Pw,{className:"w-5 h-5"}),I.jsx("span",{className:"text-sm font-medium",children:"Face Registered"})]}),I.jsx("button",{type:"button",onClick:()=>{Q(null),fe("")},className:"text-xs text-white/70 hover:underline",children:"Retake"})]}):I.jsxs("div",{className:"space-y-3",children:[I.jsxs("div",{className:"relative bg-black/20 rounded-lg aspect-video flex items-center justify-center overflow-hidden border-2 border-white/20",children:[I.jsx("video",{ref:we,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover ${!Ae&&"hidden"}`,style:{transform:"scaleX(-1)"}}),!Ae&&I.jsx(Aw,{className:"w-10 h-10 text-white/30"}),I.jsx("div",{className:`absolute inset-0 bg-white transition-opacity duration-300 ${le?"opacity-80":"opacity-0 pointer-events-none"}`})]}),I.jsxs("div",{className:"flex space-x-2",children:[I.jsxs("button",{type:"button",onClick:Ae?He:Se,disabled:E,className:"w-full text-center px-4 py-2 border-2 border-white/20 text-sm font-semibold rounded-xl text-white/80 bg-white/10 hover:bg-white/20 transition duration-150 ease-in-out",children:[Ae?"Stop":"Start"," Camera"]}),I.jsx("button",{type:"button",onClick:lr,disabled:!Ae||D||E,className:"w-full flex justify-center items-center px-4 py-2 border-2 border-transparent text-sm font-bold rounded-xl text-white bg-secondary-magenta/80 hover:bg-secondary-magenta transition duration-150 ease-in-out disabled:bg-white/10 disabled:cursor-not-allowed",children:D?I.jsx(_s,{size:"sm"}):"Capture"})]})]})]})},Ze=t?"SIGN UP":"LOGIN",$e=t?"Sign Up":"Login",ie=t?"Sign In":"Sign Up",ge=t?I.jsx(C2,{className:"w-5 h-5"}):I.jsx(A2,{className:"w-5 h-5"});return I.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:I.jsxs("div",{ref:N,id:"auth-card-wrapper",className:`relative w-full max-w-sm rounded-3xl shadow-2xl transition-all duration-500 ease-in-out overflow-hidden p-[2px] ${r?"":"cursor-pointer"}`,onMouseEnter:x,onMouseLeave:V,children:[I.jsx("div",{className:"absolute inset-[-200%] animate-spin-slow",style:{background:"conic-gradient(from 180deg at 50% 50%, #22d3ee, #d946ef, #6366f1, #22d3ee)"}}),I.jsxs("div",{id:"auth-card",className:"relative w-full h-full bg-slate-900/80 backdrop-blur-lg p-8 sm:p-10 rounded-[1.4rem] text-white flex flex-col items-center",children:[I.jsxs("div",{className:"flex flex-col items-center w-full mb-4",children:[I.jsx("div",{className:`p-3 mb-4 rounded-full bg-white/20 shadow-lg transition-transform duration-300 ${r?"animate-pulse-glow":""}`,children:I.jsx(v_,{className:"w-8 h-8 text-white"})}),I.jsx("h1",{className:`text-2xl font-extrabold tracking-tight text-center transition-opacity duration-300 ${r?"opacity-100":"opacity-0 hidden"}`,children:"Smart Attendance"}),I.jsxs("p",{className:`text-sm text-white/80 font-medium transition-opacity duration-300 ${r?"opacity-100":"opacity-0 hidden"}`,children:["Welcome ",t?"":"back"]})]}),I.jsx("h2",{className:`text-4xl font-extrabold tracking-widest uppercase transition-all duration-500 ease-in-out ${r?"opacity-0 scale-90 -mt-8":""}`,children:Ze}),I.jsx("div",{className:`w-full overflow-hidden transition-all duration-500 ease-in-out ${r?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:I.jsx("div",{className:"pt-8",children:I.jsxs("form",{id:"auth-form",className:"space-y-4",onSubmit:ae,children:[t&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{id:"role-section",children:[I.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"I am a..."}),I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsxs("button",{type:"button",onClick:()=>q("student"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200 ease-in-out space-y-2 transform hover:scale-105 ${U==="student"?"bg-secondary-magenta/30 border-secondary-magenta scale-105":"bg-white/10 border-white/20 hover:border-white/40"}`,children:[I.jsx(v_,{className:"w-8 h-8 text-white/90"}),I.jsx("span",{className:"font-semibold text-sm",children:"Student"})]}),I.jsxs("button",{type:"button",onClick:()=>q("faculty"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200 ease-in-out space-y-2 transform hover:scale-105 ${U==="faculty"?"bg-secondary-magenta/30 border-secondary-magenta scale-105":"bg-white/10 border-white/20 hover:border-white/40"}`,children:[I.jsx(Ip,{className:"w-8 h-8 text-white/90"}),I.jsx("span",{className:"font-semibold text-sm",children:"Faculty"})]})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"Full Name"}),I.jsx("input",{type:"text",id:"name",value:p,onChange:D=>y(D.target.value),placeholder:"John Doe",required:!0,className:"w-full px-4 py-3 bg-white/10 border-2 border-white/20 text-white placeholder-white/60 rounded-xl focus:ring-secondary-magenta focus:border-secondary-magenta transition duration-150 ease-in-out outline-none"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"Email"}),I.jsx("input",{type:"email",id:"email",value:o,onChange:D=>l(D.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-3 bg-white/10 border-2 border-white/20 text-white placeholder-white/60 rounded-xl focus:ring-secondary-magenta focus:border-secondary-magenta transition duration-150 ease-in-out outline-none"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"Password"}),I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:X?"text":"password",id:"password",value:h,onChange:D=>f(D.target.value),placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 bg-white/10 border-2 border-white/20 text-white placeholder-white/60 rounded-xl focus:ring-secondary-magenta focus:border-secondary-magenta transition duration-150 ease-in-out outline-none pr-12"}),I.jsx("button",{type:"button",onClick:()=>Z(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-4 text-white/70 hover:text-white","aria-label":X?"Hide password":"Show password",children:X?I.jsx(S2,{className:"w-5 h-5"}):I.jsx(I2,{className:"w-5 h-5"})})]})]}),t&&U==="student"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"roll-number",className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"Roll Number"}),I.jsx("input",{type:"text",id:"roll-number",value:w,onChange:D=>S(D.target.value),placeholder:"e.g. 1011",required:!0,className:"w-full px-4 py-3 bg-white/10 border-2 border-white/20 text-white placeholder-white/60 rounded-xl focus:ring-secondary-magenta focus:border-secondary-magenta transition duration-150 ease-in-out outline-none"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"class-name",className:"block text-xs font-semibold uppercase tracking-wider mb-2 text-white/70",children:"Class Name"}),I.jsx("input",{type:"text",id:"class-name",value:P,onChange:D=>M(D.target.value),placeholder:"e.g. BSc-III",required:!0,className:"w-full px-4 py-3 bg-white/10 border-2 border-white/20 text-white placeholder-white/60 rounded-xl focus:ring-secondary-magenta focus:border-secondary-magenta transition duration-150 ease-in-out outline-none"})]}),I.jsx(ze,{})]}),I.jsxs("div",{className:`flex items-center text-xs text-white/80 pt-2 ${t?"justify-end":"justify-between"}`,children:[!t&&I.jsx("a",{href:"#",className:"hover:text-white transition-colors duration-200",children:"Forgot Password"}),I.jsx("button",{type:"button",onClick:C,className:"font-bold text-white hover:text-white/80 transition duration-150 ease-in-out",children:ie})]}),te&&I.jsx("p",{className:`text-center text-sm font-medium pt-2 ${J==="success"?"text-green-300":"text-red-300"}`,children:te}),I.jsx("button",{id:"submit-btn",type:"submit",disabled:E,className:"w-full flex items-center justify-center space-x-2 py-3 bg-secondary-magenta hover:bg-purple-700 text-white text-lg font-bold rounded-xl shadow-lg shadow-secondary-magenta/50 transition duration-300 ease-in-out transform hover:scale-[1.01] active:scale-[0.99] mt-6 disabled:bg-opacity-50 disabled:cursor-not-allowed",children:E?I.jsx(_s,{}):I.jsxs(I.Fragment,{children:[ge,I.jsx("span",{children:$e})]})})]})})})]})]})})},If=({percentage:r=0})=>{const e=Math.max(0,Math.min(100,r));let t="bg-green-500";return e<75&&(t="bg-yellow-500"),e<50&&(t="bg-red-500"),I.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:I.jsx("div",{className:`${t} h-2.5 rounded-full transition-all duration-500 ease-out`,style:{width:`${e}%`}})})},P2=({user:r})=>I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 flex justify-between items-center mb-6",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-2xl font-bold text-white",children:"Student Dashboard"}),I.jsxs("p",{className:"text-slate-400",children:[r.name," • ",r.email]})]}),I.jsxs("button",{onClick:()=>Sw(),className:"flex items-center space-x-2 px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/40 border border-red-600/30 transition-colors",children:[I.jsx(Rw,{className:"w-5 h-5"}),I.jsx("span",{children:"Logout"})]})]}),k2=({records:r})=>I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[I.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[I.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg text-green-400",children:I.jsx(kw,{className:"w-6 h-6"})}),I.jsx("h2",{className:"text-xl font-semibold text-white",children:"Attendance History"})]}),I.jsx("div",{className:"space-y-3 max-h-[40rem] overflow-y-auto pr-2",children:r.length>0?r.map(e=>I.jsxs("div",{className:"flex justify-between items-center bg-slate-700/50 p-3 rounded-lg",children:[I.jsxs("div",{children:[I.jsx("p",{className:"font-medium text-slate-200",children:e.subject||"General"}),I.jsx("p",{className:"text-xs text-slate-400",children:e.time})]}),I.jsxs("div",{className:"flex items-center space-x-4",children:[e.distance&&e.distance!=="N/A"&&I.jsxs("span",{className:"text-xs text-slate-400 flex items-center",children:[I.jsx(xw,{className:"w-3 h-3 mr-1"}),e.distance]}),I.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${e.status==="present"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:e.status==="present"?"Present":"Failed"})]})]},e.id)):I.jsx("p",{className:"text-slate-500 text-center py-8",children:"No attendance records found."})})]}),x2=({summary:r,isLoading:e})=>{const t=r.reduce((o,l)=>(o.attended+=l.attended,o.total+=l.total,o),{attended:0,total:0}),i=t.total>0?Math.round(t.attended/t.total*100):0;return I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[I.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[I.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg text-purple-400",children:I.jsx(Ip,{className:"w-6 h-6"})}),I.jsx("h2",{className:"text-xl font-semibold text-white",children:"Attendance Summary"})]}),I.jsx("div",{className:"space-y-4",children:e?I.jsx("div",{className:"flex justify-center items-center h-24",children:I.jsx(_s,{})}):r.length>0?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[I.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[I.jsx("span",{className:"font-bold text-lg text-white",children:"Overall Attendance"}),I.jsxs("span",{className:"text-sm text-slate-400",children:[t.attended,"/",t.total," classes"]})]}),I.jsx(If,{percentage:i})]}),r.map(o=>I.jsxs("div",{className:"pt-2",children:[I.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[I.jsx("span",{className:"font-semibold text-slate-200",children:o.subject}),I.jsxs("span",{className:"text-sm text-slate-400",children:[o.attended,"/",o.total," classes"]})]}),I.jsx(If,{percentage:o.percentage})]},`${o.subject}|${o.class}`))]}):I.jsx("p",{className:"text-slate-500 text-center py-8",children:"No summary data available."})})]})},N2=({user:r})=>{const[e,t]=de.useState([]),[i,o]=de.useState([]),[l,h]=de.useState(!0),[f,p]=de.useState(""),[y,w]=de.useState(!1),[S,P]=de.useState(""),[M,U]=de.useState("error"),[q,$]=de.useState(!1),[Q,X]=de.useState(!1),Z=de.useRef(null),te=de.useRef(null);de.useEffect(()=>{const E=d2(r.uid,t);return w2(r.uid).then(o).catch(A=>console.error("Failed to load summary:",A)).finally(()=>h(!1)),()=>E()},[r.uid]);const fe=()=>{te.current&&(te.current.getTracks().forEach(E=>E.stop()),te.current=null),$(!1)},J=async E=>{if(!E){P("Please enter a secret code."),U("error");return}w(!0),P("Verifying attendance..."),U("success");try{const A=await m2(r,E);P(A),U("success"),p("")}catch(A){P(A.message||"An unknown error occurred."),U("error")}finally{w(!1)}},R=async()=>{try{$(!0),P("Point your camera at the QR code..."),U("success");const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});if(Z.current){Z.current.srcObject=E,te.current=E;const A=setInterval(async()=>{if(!te.current){clearInterval(A);return}const N=await f2();N&&(clearInterval(A),fe(),J(N.secret))},2e3);setTimeout(()=>{te.current&&(clearInterval(A),fe(),P("QR scan timeout. Try manual entry."),U("error"))},3e4)}}catch{P("Could not start camera. Please grant permission."),U("error"),$(!1)}};return de.useEffect(()=>()=>{fe()},[]),I.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[I.jsx(P2,{user:r}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4",children:[I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-400",children:I.jsx(Aw,{className:"w-6 h-6"})}),I.jsx("h2",{className:"text-xl font-semibold text-white",children:"Mark Attendance"})]}),I.jsx("p",{className:"text-sm text-slate-400",children:"Scan the QR code from your faculty or enter the code manually."}),!Q&&!q&&I.jsxs("button",{onClick:R,className:"w-full flex justify-center items-center space-x-2 py-2.5 px-4 bg-slate-700 hover:bg-slate-600 rounded-md font-semibold",children:[I.jsx(Cw,{className:"w-5 h-5"}),I.jsx("span",{children:"Scan QR Code"})]}),q&&I.jsxs("div",{className:"space-y-2",children:[I.jsx("div",{className:"bg-slate-900 rounded-lg aspect-video flex items-center justify-center overflow-hidden",children:I.jsx("video",{ref:Z,onLoadedMetadata:()=>{var E;(E=Z.current)==null||E.play().catch(A=>console.error("QR Video play failed",A))},autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),I.jsxs("button",{onClick:fe,className:"w-full flex justify-center items-center space-x-2 py-2 px-4 bg-red-600/20 text-red-400 hover:bg-red-600/40 rounded-md text-sm",children:[I.jsx(E2,{className:"w-4 h-4"}),I.jsx("span",{children:"Stop Scanner"})]})]}),I.jsxs("div",{className:"text-sm",children:[I.jsx("input",{type:"checkbox",id:"manualCode",checked:Q,onChange:E=>X(E.target.checked),className:"mr-2 accent-indigo-500"}),I.jsx("label",{htmlFor:"manualCode",className:"text-slate-400",children:"Enter code manually"})]}),Q&&!q&&I.jsxs("div",{className:"space-y-4 pt-2",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"secretCode",className:"block text-sm font-medium text-slate-300 mb-1",children:"Secret Code"}),I.jsx("input",{id:"secretCode",type:"text",value:f,onChange:E=>p(E.target.value.toUpperCase()),placeholder:"e.g., FAC_XYZ789",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-indigo-500 focus:border-indigo-500 tracking-widest font-mono",disabled:y})]}),I.jsx("button",{onClick:()=>J(f),disabled:y||!f,className:"w-full flex justify-center items-center space-x-2 py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-indigo-500 disabled:bg-indigo-900/50 disabled:cursor-not-allowed",children:y?I.jsxs(I.Fragment,{children:[I.jsx(_s,{size:"sm"}),I.jsx("span",{children:"Verifying..."})]}):I.jsxs(I.Fragment,{children:[" ",I.jsx(Pw,{className:"w-5 h-5"})," ",I.jsx("span",{children:"Mark My Attendance"})]})})]}),S&&I.jsx("p",{className:`text-sm text-center pt-2 ${M==="success"?"text-green-400":"text-red-400"}`,children:S})]}),I.jsx(x2,{summary:i,isLoading:l})]}),I.jsx("div",{className:"lg:col-span-3",children:I.jsx(k2,{records:e})})]})]})};var po={},Cd,E_;function D2(){return E_||(E_=1,Cd=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Cd}var Rd={},mi={},T_;function Ss(){if(T_)return mi;T_=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return mi.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},mi.getSymbolTotalCodewords=function(i){return e[i]},mi.getBCHDigit=function(t){let i=0;for(;t!==0;)i++,t>>>=1;return i},mi.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');r=i},mi.isKanjiModeEnabled=function(){return typeof r<"u"},mi.toSJIS=function(i){return r(i)},mi}var Pd={},I_;function Sp(){return I_||(I_=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},r.from=function(i,o){if(r.isValid(i))return i;try{return e(i)}catch{return o}}})(Pd)),Pd}var kd,S_;function V2(){if(S_)return kd;S_=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},kd=r,kd}var xd,A_;function b2(){if(A_)return xd;A_=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,i,o){const l=e*this.size+t;this.data[l]=i,o&&(this.reservedBit[l]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},xd=r,xd}var Nd={},C_;function L2(){return C_||(C_=1,(function(r){const e=Ss().getSymbolSize;r.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),h=l===145?26:Math.ceil((l-13)/(2*o-2))*2,f=[l-7];for(let p=1;p<o-1;p++)f[p]=f[p-1]-h;return f.push(6),f.reverse()},r.getPositions=function(i){const o=[],l=r.getRowColCoords(i),h=l.length;for(let f=0;f<h;f++)for(let p=0;p<h;p++)f===0&&p===0||f===0&&p===h-1||f===h-1&&p===0||o.push([l[f],l[p]]);return o}})(Nd)),Nd}var Dd={},R_;function M2(){if(R_)return Dd;R_=1;const r=Ss().getSymbolSize,e=7;return Dd.getPositions=function(i){const o=r(i);return[[0,0],[o-e,0],[0,o-e]]},Dd}var Vd={},P_;function O2(){return P_||(P_=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},r.from=function(o){return r.isValid(o)?parseInt(o,10):void 0},r.getPenaltyN1=function(o){const l=o.size;let h=0,f=0,p=0,y=null,w=null;for(let S=0;S<l;S++){f=p=0,y=w=null;for(let P=0;P<l;P++){let M=o.get(S,P);M===y?f++:(f>=5&&(h+=e.N1+(f-5)),y=M,f=1),M=o.get(P,S),M===w?p++:(p>=5&&(h+=e.N1+(p-5)),w=M,p=1)}f>=5&&(h+=e.N1+(f-5)),p>=5&&(h+=e.N1+(p-5))}return h},r.getPenaltyN2=function(o){const l=o.size;let h=0;for(let f=0;f<l-1;f++)for(let p=0;p<l-1;p++){const y=o.get(f,p)+o.get(f,p+1)+o.get(f+1,p)+o.get(f+1,p+1);(y===4||y===0)&&h++}return h*e.N2},r.getPenaltyN3=function(o){const l=o.size;let h=0,f=0,p=0;for(let y=0;y<l;y++){f=p=0;for(let w=0;w<l;w++)f=f<<1&2047|o.get(y,w),w>=10&&(f===1488||f===93)&&h++,p=p<<1&2047|o.get(w,y),w>=10&&(p===1488||p===93)&&h++}return h*e.N3},r.getPenaltyN4=function(o){let l=0;const h=o.data.length;for(let p=0;p<h;p++)l+=o.data[p];return Math.abs(Math.ceil(l*100/h/5)-10)*e.N4};function t(i,o,l){switch(i){case r.Patterns.PATTERN000:return(o+l)%2===0;case r.Patterns.PATTERN001:return o%2===0;case r.Patterns.PATTERN010:return l%3===0;case r.Patterns.PATTERN011:return(o+l)%3===0;case r.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case r.Patterns.PATTERN101:return o*l%2+o*l%3===0;case r.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case r.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}r.applyMask=function(o,l){const h=l.size;for(let f=0;f<h;f++)for(let p=0;p<h;p++)l.isReserved(p,f)||l.xor(p,f,t(o,p,f))},r.getBestMask=function(o,l){const h=Object.keys(r.Patterns).length;let f=0,p=1/0;for(let y=0;y<h;y++){l(y),r.applyMask(y,o);const w=r.getPenaltyN1(o)+r.getPenaltyN2(o)+r.getPenaltyN3(o)+r.getPenaltyN4(o);r.applyMask(y,o),w<p&&(p=w,f=y)}return f}})(Vd)),Vd}var Fu={},k_;function Nw(){if(k_)return Fu;k_=1;const r=Sp(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Fu.getBlocksCount=function(o,l){switch(l){case r.L:return e[(o-1)*4+0];case r.M:return e[(o-1)*4+1];case r.Q:return e[(o-1)*4+2];case r.H:return e[(o-1)*4+3];default:return}},Fu.getTotalCodewordsCount=function(o,l){switch(l){case r.L:return t[(o-1)*4+0];case r.M:return t[(o-1)*4+1];case r.Q:return t[(o-1)*4+2];case r.H:return t[(o-1)*4+3];default:return}},Fu}var bd={},Ma={},x_;function F2(){if(x_)return Ma;x_=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let i=1;for(let o=0;o<255;o++)r[o]=i,e[i]=o,i<<=1,i&256&&(i^=285);for(let o=255;o<512;o++)r[o]=r[o-255]})(),Ma.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},Ma.exp=function(i){return r[i]},Ma.mul=function(i,o){return i===0||o===0?0:r[e[i]+e[o]]},Ma}var N_;function j2(){return N_||(N_=1,(function(r){const e=F2();r.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let h=0;h<i.length;h++)for(let f=0;f<o.length;f++)l[h+f]^=e.mul(i[h],o[f]);return l},r.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const h=l[0];for(let p=0;p<o.length;p++)l[p]^=e.mul(o[p],h);let f=0;for(;f<l.length&&l[f]===0;)f++;l=l.slice(f)}return l},r.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=r.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(bd)),bd}var Ld,D_;function U2(){if(D_)return Ld;D_=1;const r=j2();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(i.length+this.degree);o.set(i);const l=r.mod(o,this.genPoly),h=this.degree-l.length;if(h>0){const f=new Uint8Array(this.degree);return f.set(l,h),f}return l},Ld=e,Ld}var Md={},Od={},Fd={},V_;function Dw(){return V_||(V_=1,Fd.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Fd}var Xn={},b_;function Vw(){if(b_)return Xn;b_=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Xn.KANJI=new RegExp(t,"g"),Xn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Xn.BYTE=new RegExp(i,"g"),Xn.NUMERIC=new RegExp(r,"g"),Xn.ALPHANUMERIC=new RegExp(e,"g");const o=new RegExp("^"+t+"$"),l=new RegExp("^"+r+"$"),h=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Xn.testKanji=function(p){return o.test(p)},Xn.testNumeric=function(p){return l.test(p)},Xn.testAlphanumeric=function(p){return h.test(p)},Xn}var L_;function As(){return L_||(L_=1,(function(r){const e=Dw(),t=Vw();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},r.getBestModeForData=function(l){return t.testNumeric(l)?r.NUMERIC:t.testAlphanumeric(l)?r.ALPHANUMERIC:t.testKanji(l)?r.KANJI:r.BYTE},r.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},r.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+o)}}r.from=function(l,h){if(r.isValid(l))return l;try{return i(l)}catch{return h}}})(Od)),Od}var M_;function B2(){return M_||(M_=1,(function(r){const e=Ss(),t=Nw(),i=Sp(),o=As(),l=Dw(),h=7973,f=e.getBCHDigit(h);function p(P,M,U){for(let q=1;q<=40;q++)if(M<=r.getCapacity(q,U,P))return q}function y(P,M){return o.getCharCountIndicator(P,M)+4}function w(P,M){let U=0;return P.forEach(function(q){const $=y(q.mode,M);U+=$+q.getBitsLength()}),U}function S(P,M){for(let U=1;U<=40;U++)if(w(P,U)<=r.getCapacity(U,M,o.MIXED))return U}r.from=function(M,U){return l.isValid(M)?parseInt(M,10):U},r.getCapacity=function(M,U,q){if(!l.isValid(M))throw new Error("Invalid QR Code version");typeof q>"u"&&(q=o.BYTE);const $=e.getSymbolTotalCodewords(M),Q=t.getTotalCodewordsCount(M,U),X=($-Q)*8;if(q===o.MIXED)return X;const Z=X-y(q,M);switch(q){case o.NUMERIC:return Math.floor(Z/10*3);case o.ALPHANUMERIC:return Math.floor(Z/11*2);case o.KANJI:return Math.floor(Z/13);case o.BYTE:default:return Math.floor(Z/8)}},r.getBestVersionForData=function(M,U){let q;const $=i.from(U,i.M);if(Array.isArray(M)){if(M.length>1)return S(M,$);if(M.length===0)return 1;q=M[0]}else q=M;return p(q.mode,q.getLength(),$)},r.getEncodedBits=function(M){if(!l.isValid(M)||M<7)throw new Error("Invalid QR Code version");let U=M<<12;for(;e.getBCHDigit(U)-f>=0;)U^=h<<e.getBCHDigit(U)-f;return M<<12|U}})(Md)),Md}var jd={},O_;function z2(){if(O_)return jd;O_=1;const r=Ss(),e=1335,t=21522,i=r.getBCHDigit(e);return jd.getEncodedBits=function(l,h){const f=l.bit<<3|h;let p=f<<10;for(;r.getBCHDigit(p)-i>=0;)p^=e<<r.getBCHDigit(p)-i;return(f<<10|p)^t},jd}var Ud={},Bd,F_;function q2(){if(F_)return Bd;F_=1;const r=As();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let o,l,h;for(o=0;o+3<=this.data.length;o+=3)l=this.data.substr(o,3),h=parseInt(l,10),i.put(h,10);const f=this.data.length-o;f>0&&(l=this.data.substr(o),h=parseInt(l,10),i.put(h,f*3+1))},Bd=e,Bd}var zd,j_;function $2(){if(j_)return zd;j_=1;const r=As(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(i){this.mode=r.ALPHANUMERIC,this.data=i}return t.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(o){let l;for(l=0;l+2<=this.data.length;l+=2){let h=e.indexOf(this.data[l])*45;h+=e.indexOf(this.data[l+1]),o.put(h,11)}this.data.length%2&&o.put(e.indexOf(this.data[l]),6)},zd=t,zd}var qd,U_;function H2(){if(U_)return qd;U_=1;const r=As();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let i=0,o=this.data.length;i<o;i++)t.put(this.data[i],8)},qd=e,qd}var $d,B_;function W2(){if(B_)return $d;B_=1;const r=As(),e=Ss();function t(i){this.mode=r.KANJI,this.data=i}return t.getBitsLength=function(o){return o*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let o;for(o=0;o<this.data.length;o++){let l=e.toSJIS(this.data[o]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),i.put(l,13)}},$d=t,$d}var Hd={exports:{}},z_;function K2(){return z_||(z_=1,(function(r){var e={single_source_shortest_paths:function(t,i,o){var l={},h={};h[i]=0;var f=e.PriorityQueue.make();f.push(i,0);for(var p,y,w,S,P,M,U,q,$;!f.empty();){p=f.pop(),y=p.value,S=p.cost,P=t[y]||{};for(w in P)P.hasOwnProperty(w)&&(M=P[w],U=S+M,q=h[w],$=typeof h[w]>"u",($||q>U)&&(h[w]=U,f.push(w,U),l[w]=y))}if(typeof o<"u"&&typeof h[o]>"u"){var Q=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(Q)}return l},extract_shortest_path_from_predecessor_list:function(t,i){for(var o=[],l=i;l;)o.push(l),t[l],l=t[l];return o.reverse(),o},find_path:function(t,i,o){var l=e.single_source_shortest_paths(t,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(t){var i=e.PriorityQueue,o={},l;t=t||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=t.sorter||i.default_sorter,o},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){var o={value:t,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Hd)),Hd.exports}var q_;function G2(){return q_||(q_=1,(function(r){const e=As(),t=q2(),i=$2(),o=H2(),l=W2(),h=Vw(),f=Ss(),p=K2();function y(Q){return unescape(encodeURIComponent(Q)).length}function w(Q,X,Z){const te=[];let fe;for(;(fe=Q.exec(Z))!==null;)te.push({data:fe[0],index:fe.index,mode:X,length:fe[0].length});return te}function S(Q){const X=w(h.NUMERIC,e.NUMERIC,Q),Z=w(h.ALPHANUMERIC,e.ALPHANUMERIC,Q);let te,fe;return f.isKanjiModeEnabled()?(te=w(h.BYTE,e.BYTE,Q),fe=w(h.KANJI,e.KANJI,Q)):(te=w(h.BYTE_KANJI,e.BYTE,Q),fe=[]),X.concat(Z,te,fe).sort(function(R,E){return R.index-E.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function P(Q,X){switch(X){case e.NUMERIC:return t.getBitsLength(Q);case e.ALPHANUMERIC:return i.getBitsLength(Q);case e.KANJI:return l.getBitsLength(Q);case e.BYTE:return o.getBitsLength(Q)}}function M(Q){return Q.reduce(function(X,Z){const te=X.length-1>=0?X[X.length-1]:null;return te&&te.mode===Z.mode?(X[X.length-1].data+=Z.data,X):(X.push(Z),X)},[])}function U(Q){const X=[];for(let Z=0;Z<Q.length;Z++){const te=Q[Z];switch(te.mode){case e.NUMERIC:X.push([te,{data:te.data,mode:e.ALPHANUMERIC,length:te.length},{data:te.data,mode:e.BYTE,length:te.length}]);break;case e.ALPHANUMERIC:X.push([te,{data:te.data,mode:e.BYTE,length:te.length}]);break;case e.KANJI:X.push([te,{data:te.data,mode:e.BYTE,length:y(te.data)}]);break;case e.BYTE:X.push([{data:te.data,mode:e.BYTE,length:y(te.data)}])}}return X}function q(Q,X){const Z={},te={start:{}};let fe=["start"];for(let J=0;J<Q.length;J++){const R=Q[J],E=[];for(let A=0;A<R.length;A++){const N=R[A],x=""+J+A;E.push(x),Z[x]={node:N,lastCount:0},te[x]={};for(let V=0;V<fe.length;V++){const C=fe[V];Z[C]&&Z[C].node.mode===N.mode?(te[C][x]=P(Z[C].lastCount+N.length,N.mode)-P(Z[C].lastCount,N.mode),Z[C].lastCount+=N.length):(Z[C]&&(Z[C].lastCount=N.length),te[C][x]=P(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,X))}}fe=E}for(let J=0;J<fe.length;J++)te[fe[J]].end=0;return{map:te,table:Z}}function $(Q,X){let Z;const te=e.getBestModeForData(Q);if(Z=e.from(X,te),Z!==e.BYTE&&Z.bit<te.bit)throw new Error('"'+Q+'" cannot be encoded with mode '+e.toString(Z)+`.
 Suggested mode is: `+e.toString(te));switch(Z===e.KANJI&&!f.isKanjiModeEnabled()&&(Z=e.BYTE),Z){case e.NUMERIC:return new t(Q);case e.ALPHANUMERIC:return new i(Q);case e.KANJI:return new l(Q);case e.BYTE:return new o(Q)}}r.fromArray=function(X){return X.reduce(function(Z,te){return typeof te=="string"?Z.push($(te,null)):te.data&&Z.push($(te.data,te.mode)),Z},[])},r.fromString=function(X,Z){const te=S(X,f.isKanjiModeEnabled()),fe=U(te),J=q(fe,Z),R=p.find_path(J.map,"start","end"),E=[];for(let A=1;A<R.length-1;A++)E.push(J.table[R[A]].node);return r.fromArray(M(E))},r.rawSplit=function(X){return r.fromArray(S(X,f.isKanjiModeEnabled()))}})(Ud)),Ud}var $_;function Q2(){if($_)return Rd;$_=1;const r=Ss(),e=Sp(),t=V2(),i=b2(),o=L2(),l=M2(),h=O2(),f=Nw(),p=U2(),y=B2(),w=z2(),S=As(),P=G2();function M(J,R){const E=J.size,A=l.getPositions(R);for(let N=0;N<A.length;N++){const x=A[N][0],V=A[N][1];for(let C=-1;C<=7;C++)if(!(x+C<=-1||E<=x+C))for(let ae=-1;ae<=7;ae++)V+ae<=-1||E<=V+ae||(C>=0&&C<=6&&(ae===0||ae===6)||ae>=0&&ae<=6&&(C===0||C===6)||C>=2&&C<=4&&ae>=2&&ae<=4?J.set(x+C,V+ae,!0,!0):J.set(x+C,V+ae,!1,!0))}}function U(J){const R=J.size;for(let E=8;E<R-8;E++){const A=E%2===0;J.set(E,6,A,!0),J.set(6,E,A,!0)}}function q(J,R){const E=o.getPositions(R);for(let A=0;A<E.length;A++){const N=E[A][0],x=E[A][1];for(let V=-2;V<=2;V++)for(let C=-2;C<=2;C++)V===-2||V===2||C===-2||C===2||V===0&&C===0?J.set(N+V,x+C,!0,!0):J.set(N+V,x+C,!1,!0)}}function $(J,R){const E=J.size,A=y.getEncodedBits(R);let N,x,V;for(let C=0;C<18;C++)N=Math.floor(C/3),x=C%3+E-8-3,V=(A>>C&1)===1,J.set(N,x,V,!0),J.set(x,N,V,!0)}function Q(J,R,E){const A=J.size,N=w.getEncodedBits(R,E);let x,V;for(x=0;x<15;x++)V=(N>>x&1)===1,x<6?J.set(x,8,V,!0):x<8?J.set(x+1,8,V,!0):J.set(A-15+x,8,V,!0),x<8?J.set(8,A-x-1,V,!0):x<9?J.set(8,15-x-1+1,V,!0):J.set(8,15-x-1,V,!0);J.set(A-8,8,1,!0)}function X(J,R){const E=J.size;let A=-1,N=E-1,x=7,V=0;for(let C=E-1;C>0;C-=2)for(C===6&&C--;;){for(let ae=0;ae<2;ae++)if(!J.isReserved(N,C-ae)){let ze=!1;V<R.length&&(ze=(R[V]>>>x&1)===1),J.set(N,C-ae,ze),x--,x===-1&&(V++,x=7)}if(N+=A,N<0||E<=N){N-=A,A=-A;break}}}function Z(J,R,E){const A=new t;E.forEach(function(ae){A.put(ae.mode.bit,4),A.put(ae.getLength(),S.getCharCountIndicator(ae.mode,J)),ae.write(A)});const N=r.getSymbolTotalCodewords(J),x=f.getTotalCodewordsCount(J,R),V=(N-x)*8;for(A.getLengthInBits()+4<=V&&A.put(0,4);A.getLengthInBits()%8!==0;)A.putBit(0);const C=(V-A.getLengthInBits())/8;for(let ae=0;ae<C;ae++)A.put(ae%2?17:236,8);return te(A,J,R)}function te(J,R,E){const A=r.getSymbolTotalCodewords(R),N=f.getTotalCodewordsCount(R,E),x=A-N,V=f.getBlocksCount(R,E),C=A%V,ae=V-C,ze=Math.floor(A/V),Ze=Math.floor(x/V),$e=Ze+1,ie=ze-Ze,ge=new p(ie);let D=0;const H=new Array(V),le=new Array(V);let Pe=0;const we=new Uint8Array(J.buffer);for(let He=0;He<V;He++){const lr=He<ae?Ze:$e;H[He]=we.slice(D,D+lr),le[He]=ge.encode(H[He]),D+=lr,Pe=Math.max(Pe,lr)}const Ne=new Uint8Array(A);let Ae=0,Ce,Se;for(Ce=0;Ce<Pe;Ce++)for(Se=0;Se<V;Se++)Ce<H[Se].length&&(Ne[Ae++]=H[Se][Ce]);for(Ce=0;Ce<ie;Ce++)for(Se=0;Se<V;Se++)Ne[Ae++]=le[Se][Ce];return Ne}function fe(J,R,E,A){let N;if(Array.isArray(J))N=P.fromArray(J);else if(typeof J=="string"){let ze=R;if(!ze){const Ze=P.rawSplit(J);ze=y.getBestVersionForData(Ze,E)}N=P.fromString(J,ze||40)}else throw new Error("Invalid data");const x=y.getBestVersionForData(N,E);if(!x)throw new Error("The amount of data is too big to be stored in a QR Code");if(!R)R=x;else if(R<x)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+x+`.
`);const V=Z(R,E,N),C=r.getSymbolSize(R),ae=new i(C);return M(ae,R),U(ae),q(ae,R),Q(ae,E,0),R>=7&&$(ae,R),X(ae,V),isNaN(A)&&(A=h.getBestMask(ae,Q.bind(null,ae,E))),h.applyMask(A,ae),Q(ae,E,A),{modules:ae,version:R,errorCorrectionLevel:E,maskPattern:A,segments:N}}return Rd.create=function(R,E){if(typeof R>"u"||R==="")throw new Error("No input text");let A=e.M,N,x;return typeof E<"u"&&(A=e.from(E.errorCorrectionLevel,e.M),N=y.from(E.version),x=h.from(E.maskPattern),E.toSJISFunc&&r.setToSJISFunction(E.toSJISFunc)),fe(R,N,A,x)},Rd}var Wd={},Kd={},H_;function bw(){return H_||(H_=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let i=t.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+t);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}r.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,h=i.scale||4;return{width:l,scale:l?4:h,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},r.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},r.getImageWidth=function(i,o){const l=r.getScale(i,o);return Math.floor((i+o.margin*2)*l)},r.qrToImageData=function(i,o,l){const h=o.modules.size,f=o.modules.data,p=r.getScale(h,l),y=Math.floor((h+l.margin*2)*p),w=l.margin*p,S=[l.color.light,l.color.dark];for(let P=0;P<y;P++)for(let M=0;M<y;M++){let U=(P*y+M)*4,q=l.color.light;if(P>=w&&M>=w&&P<y-w&&M<y-w){const $=Math.floor((P-w)/p),Q=Math.floor((M-w)/p);q=S[f[$*h+Q]?1:0]}i[U++]=q.r,i[U++]=q.g,i[U++]=q.b,i[U]=q.a}}})(Kd)),Kd}var W_;function Y2(){return W_||(W_=1,(function(r){const e=bw();function t(o,l,h){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(l,h,f){let p=f,y=h;typeof p>"u"&&(!h||!h.getContext)&&(p=h,h=void 0),h||(y=i()),p=e.getOptions(p);const w=e.getImageWidth(l.modules.size,p),S=y.getContext("2d"),P=S.createImageData(w,w);return e.qrToImageData(P.data,l,p),t(S,y,w),S.putImageData(P,0,0),y},r.renderToDataURL=function(l,h,f){let p=f;typeof p>"u"&&(!h||!h.getContext)&&(p=h,h=void 0),p||(p={});const y=r.render(l,h,p),w=p.type||"image/png",S=p.rendererOpts||{};return y.toDataURL(w,S.quality)}})(Wd)),Wd}var Gd={},K_;function J2(){if(K_)return Gd;K_=1;const r=bw();function e(o,l){const h=o.a/255,f=l+'="'+o.hex+'"';return h<1?f+" "+l+'-opacity="'+h.toFixed(2).slice(1)+'"':f}function t(o,l,h){let f=o+l;return typeof h<"u"&&(f+=" "+h),f}function i(o,l,h){let f="",p=0,y=!1,w=0;for(let S=0;S<o.length;S++){const P=Math.floor(S%l),M=Math.floor(S/l);!P&&!y&&(y=!0),o[S]?(w++,S>0&&P>0&&o[S-1]||(f+=y?t("M",P+h,.5+M+h):t("m",p,0),p=0,y=!1),P+1<l&&o[S+1]||(f+=t("h",w),w=0)):p++}return f}return Gd.render=function(l,h,f){const p=r.getOptions(h),y=l.modules.size,w=l.modules.data,S=y+p.margin*2,P=p.color.light.a?"<path "+e(p.color.light,"fill")+' d="M0 0h'+S+"v"+S+'H0z"/>':"",M="<path "+e(p.color.dark,"stroke")+' d="'+i(w,y,p.margin)+'"/>',U='viewBox="0 0 '+S+" "+S+'"',$='<svg xmlns="http://www.w3.org/2000/svg" '+(p.width?'width="'+p.width+'" height="'+p.width+'" ':"")+U+' shape-rendering="crispEdges">'+P+M+`</svg>
`;return typeof f=="function"&&f(null,$),$},Gd}var G_;function X2(){if(G_)return po;G_=1;const r=D2(),e=Q2(),t=Y2(),i=J2();function o(l,h,f,p,y){const w=[].slice.call(arguments,1),S=w.length,P=typeof w[S-1]=="function";if(!P&&!r())throw new Error("Callback required as last argument");if(P){if(S<2)throw new Error("Too few arguments provided");S===2?(y=f,f=h,h=p=void 0):S===3&&(h.getContext&&typeof y>"u"?(y=p,p=void 0):(y=p,p=f,f=h,h=void 0))}else{if(S<1)throw new Error("Too few arguments provided");return S===1?(f=h,h=p=void 0):S===2&&!h.getContext&&(p=f,f=h,h=void 0),new Promise(function(M,U){try{const q=e.create(f,p);M(l(q,h,p))}catch(q){U(q)}})}try{const M=e.create(f,p);y(null,l(M,h,p))}catch(M){y(M)}}return po.create=e.create,po.toCanvas=o.bind(null,t.render),po.toDataURL=o.bind(null,t.renderToDataURL),po.toString=o.bind(null,function(l,h,f){return i.render(l,f)}),po}var Z2=X2();const eP=Sf(Z2),tP=({user:r})=>I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 flex justify-between items-center mb-6",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-2xl font-bold text-white",children:"Faculty Dashboard"}),I.jsxs("p",{className:"text-slate-400",children:[r.name," • ",r.email]})]}),I.jsxs("button",{onClick:()=>Sw(),className:"flex items-center space-x-2 px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/40 border border-red-600/30 transition-colors",children:[I.jsx(Rw,{className:"w-5 h-5"}),I.jsx("span",{children:"Logout"})]})]}),nP=({user:r,location:e,onSessionStart:t})=>{const[i,o]=de.useState(""),[l,h]=de.useState(""),[f,p]=de.useState(""),[y,w]=de.useState(""),[S,P]=de.useState(!1),M=de.useRef(null),[U,q]=de.useState(10),[$,Q]=de.useState(U),X=de.useRef(null),Z=de.useRef(!1),te=()=>{y&&(navigator.clipboard.writeText(y),P(!0),setTimeout(()=>P(!1),2e3))},fe=de.useCallback(async()=>{if(!Z.current){if(!e||!i||!l){w("");return}Z.current=!0,X.current&&clearInterval(X.current);try{w("");const R=parseInt(f)||0,{secret:E,sessionId:A}=await y2(r.uid,r.name,i,l,U,e,R);w(E),Q(U),t({id:A,totalStudents:R,subject:i,class:l}),X.current=setInterval(()=>{Q(N=>N-1)},1e3)}catch(R){console.error("Error generating QR:",R),w("")}finally{Z.current=!1}}},[r,e,i,l,f,t,U]);de.useEffect(()=>(i&&l&&e?fe():(X.current&&clearInterval(X.current),w(""),Q(U)),()=>{X.current&&clearInterval(X.current)}),[i,l,e,f,U,fe]),de.useEffect(()=>{$<=0&&fe()},[$,fe]),de.useEffect(()=>{y&&M.current&&eP.toCanvas(M.current,y,{width:320,margin:2,color:{dark:"#000000",light:"#FFFFFF"}},R=>{R&&console.error("QR Code Generation Error:",R)})},[y]);const J=()=>{const E={width:"320px",height:"320px"};return e?!i||!l?I.jsxs("div",{style:E,className:"flex flex-col items-center justify-center text-center text-slate-500 p-4",children:[I.jsx("p",{className:"font-semibold",children:"Session Not Started"}),I.jsx("p",{className:"text-xs",children:"Enter session details above to generate a QR code."})]}):y?I.jsx("canvas",{ref:M}):I.jsxs("div",{style:E,className:"flex flex-col items-center justify-center text-center text-slate-500 space-y-3",children:[I.jsx(_s,{}),I.jsx("span",{className:"text-sm font-medium",children:"Generating QR Code..."})]}):I.jsxs("div",{style:E,className:"flex flex-col items-center justify-center text-center text-slate-500 space-y-3",children:[I.jsx(_s,{}),I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsx(xw,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm font-medium",children:"Acquiring location..."})]})]})};return I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4",children:[I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg text-teal-400",children:I.jsx(Cw,{className:"w-6 h-6"})}),I.jsx("h2",{className:"text-xl font-semibold text-white",children:"Live Session QR"})]}),y&&I.jsxs("div",{className:"flex items-center space-x-2 text-slate-400 text-sm",children:[I.jsx(kw,{className:"w-4 h-4"}),I.jsxs("span",{children:[$,"s"]})]})]}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[I.jsx("input",{type:"text",placeholder:"Subject (e.g., Physics 101)",value:i,onChange:R=>o(R.target.value),className:"w-full px-3 py-2 bg-slate-700/80 border border-slate-600 rounded-md text-white placeholder-slate-400"}),I.jsx("input",{type:"text",placeholder:"Class (e.g., BSc-III)",value:l,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 bg-slate-700/80 border border-slate-600 rounded-md text-white placeholder-slate-400"}),I.jsx("input",{type:"number",placeholder:"Total Students",value:f,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 bg-slate-700/80 border border-slate-600 rounded-md text-white placeholder-slate-400"}),I.jsx("div",{children:I.jsxs("select",{id:"duration",value:U,onChange:R=>q(Number(R.target.value)),className:"w-full px-3 py-2 bg-slate-700/80 border border-slate-600 rounded-md text-white placeholder-slate-400 h-full","aria-label":"QR Code Lifespan",children:[I.jsx("option",{value:"10",children:"10s Lifespan (Default)"}),I.jsx("option",{value:"15",children:"15s Lifespan"}),I.jsx("option",{value:"20",children:"20s Lifespan"}),I.jsx("option",{value:"30",children:"30s Lifespan"})]})})]}),I.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[I.jsx("div",{className:"p-4 bg-white/90 rounded-lg",children:J()}),y&&I.jsxs("div",{className:"w-full p-4 bg-slate-900/70 rounded-lg text-center relative",children:[I.jsx("p",{className:"text-sm text-slate-400",children:"Secret Code"}),I.jsx("p",{className:"font-mono text-2xl font-bold tracking-widest text-white h-8",children:y}),I.jsx("button",{onClick:te,disabled:!y,className:"absolute top-3 right-3 p-2 bg-slate-700/50 rounded-lg text-slate-400 hover:text-white hover:bg-slate-600 transition-colors disabled:opacity-50",title:"Copy Code",children:I.jsx(T2,{className:"w-5 h-5"})}),I.jsx("p",{className:`text-xs transition-opacity duration-300 h-4 mt-1 ${S?"opacity-100 text-teal-400":"opacity-0"}`,children:"Copied to clipboard!"})]})]})]})},rP=({user:r})=>{const[e,t]=de.useState([]),[i,o]=de.useState([]),[l,h]=de.useState(null),[f,p]=de.useState(null);de.useEffect(()=>{const w=v2(r.uid,t),S=U=>{const q={lat:U.coords.latitude,lng:U.coords.longitude};h(q),_2(r.uid,q)},P=U=>console.error(U.message);navigator.geolocation.getCurrentPosition(S,P,{enableHighAccuracy:!0});const M=navigator.geolocation.watchPosition(S,P,{enableHighAccuracy:!0});return()=>{w(),navigator.geolocation.clearWatch(M)}},[r.uid]),de.useEffect(()=>{f&&o(e.filter(w=>w.sessionId===f.id))},[e,f]);const y=f&&f.totalStudents>0?Math.round(i.length/f.totalStudents*100):0;return I.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6",children:[I.jsx(tP,{user:r}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[I.jsx("div",{className:"space-y-6",children:I.jsx(nP,{user:r,location:l,onSessionStart:p})}),I.jsx("div",{className:"space-y-6",children:I.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400",children:I.jsx(Ip,{className:"w-6 h-6"})}),I.jsx("h2",{className:"text-xl font-semibold text-white",children:"Live Session Activity"})]}),f&&I.jsxs("span",{className:"px-3 py-1 text-sm font-semibold text-blue-300 bg-blue-500/20 rounded-full",children:[i.length," / ",f.totalStudents," Present"]})]}),f?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-4",children:[I.jsxs("p",{className:"text-center font-bold text-lg text-slate-200",children:[f.subject," - ",f.class]}),I.jsx("div",{className:"flex justify-between items-baseline mt-2",children:I.jsxs("span",{className:"text-sm font-medium text-slate-400",children:["Attendance: ",y,"%"]})}),I.jsx(If,{percentage:y})]}),I.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:i.length>0?i.map(w=>I.jsxs("div",{className:"flex justify-between items-center bg-slate-700/50 p-3 rounded-lg",children:[I.jsxs("div",{children:[I.jsx("p",{className:"font-medium text-slate-200",children:w.studentName}),I.jsx("p",{className:"text-xs text-slate-400",children:w.time})]}),I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("span",{className:"text-xs text-slate-400",children:w.distance}),I.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-500/20 text-green-300",children:"Present"})]})]},w.id)):I.jsx("p",{className:"text-slate-500 text-center py-8",children:"Waiting for students to check in..."})})]}):I.jsx("p",{className:"text-slate-500 text-center py-8",children:"Start a session to see live activity."})]})})]})]})};function iP(){const[r,e]=de.useState(null),[t,i]=de.useState(!0);if(de.useEffect(()=>{const l=h2(h=>{e(h),i(!1)});return()=>l()},[]),t)return I.jsxs("div",{className:"w-screen h-screen flex flex-col items-center justify-center",children:[I.jsx(_s,{size:"lg"}),I.jsx("p",{className:"mt-4 text-white/80",children:"Initializing Attendance System..."})]});const o=()=>{if(!r)return I.jsx(w_,{});switch(r.role){case"student":return I.jsx(N2,{user:r});case"faculty":return I.jsx(rP,{user:r});default:return I.jsx(w_,{})}};return I.jsx("main",{className:"min-h-screen w-full font-sans",children:o()})}const Lw=document.getElementById("root");if(!Lw)throw new Error("Could not find root element to mount to");const sP=XE.createRoot(Lw);sP.render(I.jsx(HE.StrictMode,{children:I.jsx(iP,{})}));
